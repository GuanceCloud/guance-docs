---
title: 'Amazon MQ for RabbitMQ'
tags: 
  - AWS
summary: 'Amazon MQ supports industry-standard APIs and protocols, manages the management and maintenance of message brokers, and automatically provides infrastructure for high availability.'
__int_icon: 'icon/aws_mq_rabbitmq'
dashboard:
  - desc: 'Amazon MQ for RabbitMQ'
    path: 'dashboard/en/aws_mq_rabbitmq'
---

<!-- markdownlint-disable MD025 -->
# Amazon MQ
<!-- markdownlint-enable -->

Amazon MQ supports industry-standard APIs and protocols, manages the management and maintenance of message brokers, and automatically provides infrastructure for high availability.


## Configuration {#config}

### Install Func

We recommend enabling the Guance integration - extension - DataFlux Func (Automata): all prerequisites are automatically installed. Please continue with the script installation.

If you deploy Func on your own, refer to [Self-deployed Func](https://func.guance.com/doc/script-market-guance-integration/){:target="_blank"}


### Installation Script

> Note: Prepare an Amazon Cloud AK that meets the requirements in advance (for simplicity, you can directly grant CloudWatch read-only permissions `CloudWatchReadOnlyAccess`).

To synchronize Amazon MQ monitoring data, we install the corresponding collection script: "Guance Integration (AWS-MQ Collection)" (ID: `guance_aws_mq`)

After clicking 【Install】, enter the required parameters: AWS AK ID, AWS AK SECRET, account_name.

Click 【Deploy Startup Script】and the system will automatically create a `Startup` script set and configure the corresponding startup scripts. Ensure that the 'regions' in the startup script match the actual regions where the instances are located.

Once enabled, you can see the corresponding automatic trigger configuration in "Manage / Automatic Trigger Configuration". Click 【Execute】to run it immediately without waiting for the scheduled time. After a short wait, you can view the task execution records and corresponding logs.

> If you need to collect logs, enable the corresponding log collection script. If you need to collect billing data, enable the cloud billing collection script.

By default, we collect some configurations; for more details, see [Configuration of Custom Cloud Object Metrics](https://func.guance.com/doc/script-market-guance-aws-cloudwatch/){:target="_blank"}

### Verification

1. In "Manage / Automatic Trigger Configuration", confirm whether the corresponding tasks have been configured for automatic triggers and check the task records and logs for any abnormalities.
2. On the Guance platform, under "Infrastructure / Custom", check if asset information exists.
3. On the Guance platform, under "Metrics", check if there is corresponding monitoring data.

## Metrics {#metric}

After configuring Amazon Cloud Monitoring, the default metric set is as follows. You can collect more metrics through configuration:

[Amazon Cloud Monitoring Amazon MQ Metrics Details](https://docs.amazonaws.cn/amazon-mq/latest/developer-guide/security-logging-monitoring-cloudwatch.html){:target="_blank"}

### Amazon MQ for RabbitMQ

| Metric Name | Unit | Description |
| :---: |  :---: | :---: |
|ExchangeCount|Count|Total number of exchanges configured on the broker.|
|QueueCount|Count|Total number of queues configured on the broker.|
|ConnectionCount|Count|Total number of connections established on the broker.|
|ChannelCount|Count|Total number of channels established on the broker.|
|ConsumerCount|Count|Total number of consumers connected to the broker.|
|MessageCount|Count|Total number of messages in queues. The generated number is the sum of ready and unacknowledged messages on the broker.|
|MessageReadyCount|Count|Total number of ready messages in queues.|
|MessageUnacknowledgedCount|Count|Total number of unacknowledged messages in queues.|
|PublishRate|Count|Rate at which messages are published to the broker. The generated number represents the number of messages collected per second during sampling.|
|ConfirmRate|Count|Rate at which RabbitMQ server confirms published messages. This metric can be compared with PublishRate to better understand your broker's performance. The generated number represents the number of messages collected per second during sampling.|
|AckRate|Count|Rate at which consumers acknowledge messages. The generated number represents the number of messages collected per second during sampling.|
|SystemCpuUtilization|Percentage|Percentage of allocated Amazon EC2 compute units currently used by the broker. For cluster deployments, this value represents the sum of the corresponding metric values for all three RabbitMQ nodes.|
|RabbitMQMemLimit|Bytes|RabbitMQ broker's RAM limit. For cluster deployments, this value represents the sum of the corresponding metric values for all three RabbitMQ nodes.|
|RabbitMQMemUsed|Bytes|RabbitMQ broker's used RAM capacity. For cluster deployments, this value represents the sum of the corresponding metric values for all three RabbitMQ nodes.|
|RabbitMQDiskFreeLimit|Bytes|RabbitMQ broker's disk limit. For cluster deployments, this value represents the sum of the corresponding metric values for all three RabbitMQ nodes. This metric varies depending on instance size. For more information about Amazon MQ instance types, see Amazon MQ for RabbitMQ Instance Types.|
|RabbitMQDiskFree|Bytes|Total amount of free disk space available in the RabbitMQ broker. When disk usage exceeds its limit, the cluster blocks all producer connections. For cluster deployments, this value represents the sum of the corresponding metric values for all three RabbitMQ nodes.|
|RabbitMQFdUsed|Count|Number of file descriptors used. For cluster deployments, this value represents the sum of the corresponding metric values for all three RabbitMQ nodes.|
|`RabbitMQIOReadAverageTime`|Milliseconds|Average time (in milliseconds) it takes for RabbitMQ to perform a read operation. This value is proportional to message size.|
|`RabbitMQIOWriteAverageTime`|Milliseconds|Average time (in milliseconds) it takes for RabbitMQ to perform a write operation. This value is proportional to message size.|
</input_content>
</input>
</input_content>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</input>
</It seems there was an error in the previous response as it repeated unnecessarily. Here is the correct and completed translation:

---
title: 'Amazon MQ for RabbitMQ'
tags: 
  - AWS
summary: 'Amazon MQ supports industry-standard APIs and protocols, manages the management and maintenance of message brokers, and automatically provides infrastructure for high availability.'
__int_icon: 'icon/aws_mq_rabbitmq'
dashboard:
  - desc: 'Amazon MQ for RabbitMQ'
    path: 'dashboard/en/aws_mq_rabbitmq'
---

<!-- markdownlint-disable MD025 -->
# Amazon MQ
<!-- markdownlint-enable -->

Amazon MQ supports industry-standard APIs and protocols, manages the management and maintenance of message brokers, and automatically provides infrastructure for high availability.


## Configuration {#config}

### Install Func

We recommend enabling the Guance integration - extension - DataFlux Func (Automata): all prerequisites are automatically installed. Please continue with the script installation.

If you deploy Func on your own, refer to [Self-deployed Func](https://func.guance.com/doc/script-market-guance-integration/){:target="_blank"}


### Installation Script

> Note: Prepare an Amazon Cloud AK that meets the requirements in advance (for simplicity, you can directly grant CloudWatch read-only permissions `CloudWatchReadOnlyAccess`).

To synchronize Amazon MQ monitoring data, we install the corresponding collection script: "Guance Integration (AWS-MQ Collection)" (ID: `guance_aws_mq`)

After clicking 【Install】, enter the required parameters: AWS AK ID, AWS AK SECRET, account_name.

Click 【Deploy Startup Script】and the system will automatically create a `Startup` script set and configure the corresponding startup scripts. Ensure that the 'regions' in the startup script match the actual regions where the instances are located.

Once enabled, you can see the corresponding automatic trigger configuration in "Manage / Automatic Trigger Configuration". Click 【Execute】to run it immediately without waiting for the scheduled time. After a short wait, you can view the task execution records and corresponding logs.

> If you need to collect logs, enable the corresponding log collection script. If you need to collect billing data, enable the cloud billing collection script.

By default, we collect some configurations; for more details, see [Configuration of Custom Cloud Object Metrics](https://func.guance.com/doc/script-market-guance-aws-cloudwatch/){:target="_blank"}

### Verification

1. In "Manage / Automatic Trigger Configuration", confirm whether the corresponding tasks have been configured for automatic triggers and check the task records and logs for any abnormalities.
2. On the Guance platform, under "Infrastructure / Custom", check if asset information exists.
3. On the Guance platform, under "Metrics", check if there is corresponding monitoring data.

## Metrics {#metric}

After configuring Amazon Cloud Monitoring, the default metric set is as follows. You can collect more metrics through configuration:

[Amazon Cloud Monitoring Amazon MQ Metrics Details](https://docs.amazonaws.cn/amazon-mq/latest/developer-guide/security-logging-monitoring-cloudwatch.html){:target="_blank"}

### Amazon MQ for RabbitMQ

| Metric Name | Unit | Description |
| :---: |  :---: | :---: |
| ExchangeCount | Count | Total number of exchanges configured on the broker. |
| QueueCount | Count | Total number of queues configured on the broker. |
| ConnectionCount | Count | Total number of connections established on the broker. |
| ChannelCount | Count | Total number of channels established on the broker. |
| ConsumerCount | Count | Total number of consumers connected to the broker. |
| MessageCount | Count | Total number of messages in queues. The generated number is the sum of ready and unacknowledged messages on the broker. |
| MessageReadyCount | Count | Total number of ready messages in queues. |
| MessageUnacknowledgedCount | Count | Total number of unacknowledged messages in queues. |
| PublishRate | Count | Rate at which messages are published to the broker. The generated number represents the number of messages collected per second during sampling. |
| ConfirmRate | Count | Rate at which RabbitMQ server confirms published messages. This metric can be compared with PublishRate to better understand your broker's performance. The generated number represents the number of messages collected per second during sampling. |
| AckRate | Count | Rate at which consumers acknowledge messages. The generated number represents the number of messages collected per second during sampling. |
| SystemCpuUtilization | Percentage | Percentage of allocated Amazon EC2 compute units currently used by the broker. For cluster deployments, this value represents the sum of the corresponding metric values for all three RabbitMQ nodes. |
| RabbitMQMemLimit | Bytes | RabbitMQ broker's RAM limit. For cluster deployments, this value represents the sum of the corresponding metric values for all three RabbitMQ nodes. |
| RabbitMQMemUsed | Bytes | RabbitMQ broker's used RAM capacity. For cluster deployments, this value represents the sum of the corresponding metric values for all three RabbitMQ nodes. |
| RabbitMQDiskFreeLimit | Bytes | RabbitMQ broker's disk limit. For cluster deployments, this value represents the sum of the corresponding metric values for all three RabbitMQ nodes. This metric varies depending on instance size. For more information about Amazon MQ instance types, see Amazon MQ for RabbitMQ Instance Types. |
| RabbitMQDiskFree | Bytes | Total amount of free disk space available in the RabbitMQ broker. When disk usage exceeds its limit, the cluster blocks all producer connections. For cluster deployments, this value represents the sum of the corresponding metric values for all three RabbitMQ nodes. |
| RabbitMQFdUsed | Count | Number of file descriptors used. For cluster deployments, this value represents the sum of the corresponding metric values for all three RabbitMQ nodes. |
| `RabbitMQIOReadAverageTime` | Milliseconds | Average time (in milliseconds) it takes for RabbitMQ to perform a read operation. This value is proportional to message size. |
| `RabbitMQIOWriteAverageTime` | Milliseconds | Average time (in milliseconds) it takes for RabbitMQ to perform a write operation. This value is proportional to message size. |

This completes the translation. Let me know if you need further assistance!