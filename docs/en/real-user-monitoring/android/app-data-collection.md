# Android Application Data Collection
---

After collecting application data to <<< custom_key.brand_name >>>, you can perform custom configuration scenarios and configure anomaly detection events through the <<< custom_key.brand_name >>> console.

## Data Types

The user access monitoring of <<< custom_key.brand_name >>> includes six data types:

| **Type** | **Description** |
| --- | --- |
| session | User session information records. During the current session, data related to user pages, resources, actions, errors, and long tasks are recorded based on session dimensions. |
| view | A view record is generated each time a user visits a page in the mobile app. When a user stays on the same page, resource, long task, error, and action records are linked to the relevant RUM view via the `view_id` attribute. |
| resource | Records of resources loaded when the user accesses a page. |
| error | Exceptions or crashes issued by the mobile application. |
| long_task | For any task in the application that blocks the main thread for longer than a specified duration threshold, a long task event is generated. |
| action | Records of user activities in the mobile application (such as app launches, clicks, swipes, back actions, etc.). Each action is attached with a unique `action_id`. |

## Global Attributes

Scenarios for user access monitoring and event alerts can be queried using the following global attributes.

### SDK Attributes

| **Field** | **Type** | **Description** |
| --- | --- | --- |
| `sdk_name` | string | Collector name, fixed names:<br>`df_macos_rum_sdk`<br>`df_linux_rum_sdk`<br>`df_windows_rum_sdk`<br>`df_web_rum_sdk`<br>`df_miniapp_rum_sdk`<br>`df_ios_rum_sdk`<br>`df_android_rum_sdk` |
| `sdk_version` | string | Collector version information |

### Application Attributes

| **Field** | **Type** | Description |
| --- | --- | --- |
| `app_id` | string | Required, unique ID identifying the user-accessed application. Automatically generated when creating monitoring in the <<< custom_key.brand_name >>> console. |
| `env` | string | Required, environment field. Possible values: prod/gray/pre/common/local. Where:<br>prod: Production environment<br>gray: Gray release environment<br>pre: Pre-release environment<br>common: Daily environment<br>local: Local environment |
| `version` | string | Required, version number. |
| `service` | string | Optional, name of the associated business or service. Fixed names:<br/>`df_rum_ios`<br/>`df_rum_android`<br/>`df_rum_windows`<br/>`df_rum_linux` |

### User & Session Attributes

| **Field** | **Type** | **Description** |
| --- | --- | --- |
| `userid` | string | Unlogged-in users use a random UUID as `userid`; logged-in users use the user ID generated by the application backend. |
| `user_name` | string | Optional, user name. |
| `user_email` | string | Optional, user email. |
| `session_id` | string | Session ID; a new `session_id` is generated if no activity for more than 15 minutes. |
| `session_type` | string | Session type. Reference values: user & synthetics<br>user: Data generated by RUM functionality;<br>synthetics: Data generated by headless dial testing. |
| `is_signin` | boolean | Whether the user is registered, property values: T & F. |

### Device & Resolution Attributes

| **Field**           | **Type** | **Description**         |
| :----------------- | :------- | :--------------- |
| `device`           | string   | Mobile device manufacturer     |
| `model`            | string   | Mobile device model     |
| `device_uuid`      | string   | Unique ID of the mobile device. Generated using [ANDROID_ID](https://developer.android.com/reference/android/provider/Settings.Secure.html#ANDROID_ID) |
| `os`               | string   | Operating system information     |
| `os_version`       | string   | Operating system version     |
| `os_version_major` | string   | Major version of the operating system |
| `screen_size`      | string   | Screen resolution       |

### Geographic & Network Attributes

| **Field**           | **Type** | **Description**                                                     |
| ------------------ | -------- | ------------------------------------------------------------ |
| `ip`               | string   | User access IP address                                               |
| `isp`              | string   | Internet Service Provider                                                       |
| `network_type`     | string   | Network connection type, reference values:<br>wifi & 2g & 3g & 4g & 5g & unknown (unknown network)& unreachable (unavailable network) |
| `country`          | string   | Country                                                         |
| `country_iso_code` | string   | ISO code of the country                                                |
| `province`         | string   | Province                                                           |
| `city`             | string   | City                                                         |

## Custom Attributes

In addition to global attributes, scenes can be built and events configured using custom attributes (**SDK supports user-defined tag data**) for scenario building and event alerting. Custom attributes are non-global attributes. Through custom attributes, the entire process of user access to the application can be tracked, issues affecting user access identified, and user access performance monitored.

## Other Data Type Attributes

### Session 

#### Attributes

| **Field**                      | **Type**   | **Description**                                                        |
| ------------------------- | ------ | ------------------------------------------------------------ |
| `session_id`              | string | Session ID          |
| `session_type`            | string | Session type. Reference values: user & test<br>user：Data generated by RUM functionality;<br>test：Data generated by headless dial testing. |
| `session_referrer`        | string | Session source. Generally records the source page URL.                         |
| `session_first_view_id`   | string | The `view_id` of the first page of the current session                                |
| `session_first_view_name` | string | The URL of the first page of the current session                                    |
| `session_last_view_id`    | string | The `view_id` of the last visited page of the current session                          |
| `session_last_view_name`  | string | The URL of the last page of the current session                                  |

#### Statistics Metrics

| **Field** | **Type** | **Description** |
| --- | --- | --- |
| `time_spent` | number(ns) | Duration of the current session |
| `session_view_count` | number | Number of associated `view_id`s in the current session |
| `session_error_count` | number | Number of errors in the current session |
| `session_resource_count` | number | Number of resources loaded in the current session |
| `session_action_count` | number | Number of user actions in the current session |
| `session_long_task_count` | number     | Number of long tasks in the current session  |

### View 

#### Attributes

| **Field**        | **Type** | **Description**                                            |
| --------------- | -------- | --------------------------------------------------- |
| `view_id`       | string   | Unique ID generated each time a page is visited                          |
| `view_referrer` | string   | Page source, parent page                                |
| `view_name`     | string   | Page name                                            |

#### Metrics

| **Field** | **Type** | **Description**   |
| --- | --- | --- |
| `loading_time` | number（ns） | Page loading time |
| `time_spent` | number（ns） | Time spent on the page |
| `is_active`     | boolean  | Indicates whether the user is still active, reference values: true & false |

#### Statistics Metrics
| **Field** | **Type** | **Description** |
| --- | --- | --- |
| `view_error_count` | number | Number of errors during each page load |
| `view_resource_count` | number | Number of resources requested during each page load |
| `view_long_task_count` | number | Number of long tasks generated during each page load |
| `view_action_count` | number | Number of actions during the page view |

#### Monitoring Metrics

| **Field**                    | **Type** | **Description**                 |
| --------------------------- | -------- | ------------------------ |
| `cpu_tick_count`            | number   | Optional, CPU tick count for this page    |
| `cpu_tick_count_per_second` | number   | Optional, average CPU ticks per second  |
| `fps_avg`                   | number   | Optional, average frames per second for the page   |
| `fps_mini`                  | number   | Optional, minimum frames per second for the page   |
| `memory_avg`                | number   | Optional, average memory usage for the page |
| `memory_max`                | number   | Optional, peak memory usage for the page       |
| `battery_current_avg `                | number   | Optional, average battery current for the page |
| `battery_current_max `                | number   | Optional, maximum battery current for the page |

### Resource

#### View Attributes

| **Field**        | **Type** | **Description**                   |
| --------------- | -------- | -------------------------- |
| `view_id`       | string   | Unique ID generated each time a page is visited |
| `view_referrer` | string   | Page source, parent page       |
| `view_name`     | string   | Page name                   |

#### Action Attributes

| **Field**      | **Type** | **Description**                            |
| ------------- | -------- | ----------------------------------- |
| `action_id`   | string   | Unique ID generated when the user performs an action on the page          |
| `action_name` | string   | Action name                            |
| `action_type` | string   | Action type (cold/hot start, click, etc.) |

#### Resource Attributes

| **Field**                  | **Type** | **Description**                 |
| ------------------------- | -------- | ------------------------ |
| `resource_url`            | string   | Resource URL                  |
| `resource_url_host`       | string   | Host part of the resource URL         |
| `resource_url_path`       | string   | Path part of the resource URL         |
| `resource_url_query`      | string   | Query part of the resource URL        |
| `resource_url_path_group` | string   | Grouped path part of the resource URL         |
| `resource_type`           | string   | Category of the resource               |
| `resource_method`         | string   | Method used for the resource request             |
| `resource_status`         | string   | Status code returned by the resource request     |
| `resource_status_group`   | string   | Grouped status code returned by the resource request |
| `resource_host_ip`   | string   | Target IP of the resource URL |

#### Metrics

| **Field** | **Type** | **Description** |
| --- | --- | --- |
| `resource_size` | number | Size of the resource, default unit: byte |
| `resource_dns` | number（ns） | DNS resolution time for resource loading<br>Calculated as: domainLookupEnd - domainLookupStart |
| `resource_tcp` | number（ns） | TCP connection time for resource loading<br>Calculated as: connectEnd - connectStart |
| `resource_ssl` | number（ns） | SSL connection time for resource loading<br>Calculated as: connectEnd - secureConnectStart |
| `resource_ttfb` | number（ns） | Response time for resource loading<br>Calculated as: responseStart - requestStart |
| `resource_trans` | number（ns） | Content transfer time for resource loading<br>Calculated as: responseEnd - responseStart |
| `resource_first_byte` | number（ns） | First byte time for resource loading<br>Calculated as: responseStart - domainLookupStart |
| `duration` | number（ns） | Total resource loading time<br>Calculated as: duration(responseEnd-startTime) |
| `request_header` | string | Resource request headers |
| `response_header` | string | Resource response headers |

### Error

#### View Attributes

| **Field**        | **Type** | **Description**                                        |
| :-------------- | :------- | :---------------------------------------------- |
| `view_id`       | string   | Unique ID generated each time a page is visited                      |
| `view_referrer` | string   | Page source, parent page                            |
| `view_name`     | string   | Page name                                        |

#### Action Attributes

| **Field**      | **Type** | **Description**                            |
| ------------- | -------- | ----------------------------------- |
| `action_id`   | string   | Unique ID generated when the user performs an action on the page          |
| `action_name` | string   | Action name                            |
| `action_type` | string   | Action type (cold/hot start, click, etc.) |

#### Error Attributes

| **Field** | **Type** | **Description** |
| --- | --- | --- |
| `error_source` | string | Source of the error, reference values: logger &#124; network |
| `error_type` | string | Error type<br>logger error type: java_crash &#124; native_crash &#124; anr_error &#124; anr_crash <br>network error type：network_error |
| `error_situation` | string | Timing of the error occurrence, reference values: startup (at startup) and run (during runtime) |

When `type=network`, the following additional Network Error attributes are added.

| **Field** | **Type** | **Description** |
| --- | --- | --- |
| `resource_status` | string | Status code returned by the resource request |
| `resource_url` | string | Resource URL |
| `resource_url_host` | string | Host part of the resource URL |
| `resource_url_path` | string | Path part of the resource URL |
| `resource_url_path_group` | string | Grouped path part of the resource URL |
| `resource_method` | string | Method used for the resource request |

#### Error Monitoring Attributes

| **Field**       | **Type** | **Description**                 |
| -------------- | -------- | ------------------------ |
| `memory_total` | string   | Optional, total memory           |
| `memory_use`   | number   | Optional, memory usage rate         |
| `cpu_use`      | number   | Optional, CPU usage rate         |
| `battery_use`  | number   | Optional, current battery level |
| `locale`       | string   | Current system language         |

#### Metrics

| **Field**        | **Type** | **Description** |
| --------------- | -------- | -------- |
| `error_message` | string   | Error message |
| `error_stack`   | string   | Error stack trace |

### Long Task

#### View Attributes


| **Field**        | **Type** | **Description**                   |
| --------------- | -------- | -------------------------- |
| `view_id`       | string   | Unique ID generated each time a page is visited |
| `view_referrer` | string   | Page source, parent page       |
| `view_name`     | string   | Page name                   |

#### Action Attributes

| **Field**      | **Type** | **Description**                            |
| ------------- | -------- | ----------------------------------- |
| `action_id`   | string   | Unique ID generated when the user performs an action on the page          |
| `action_name` | string   | Action name                            |
| `action_type` | string   | Action type (cold/hot start, click, etc.) |

#### Metrics

| **Field** | **Type** | **Description** |
| --- | --- | --- |
| `duration` | number（ns） | Duration of the long task |
| `long_task_message` | string | Message about the long task |
| `long_task_stack` | string | Stack trace of the long task |

### Action

#### View Attributes

| **Field**        | **Type** | **Description**                   |
| --------------- | -------- | -------------------------- |
| `view_id`       | string   | Unique ID generated each time a page is visited |
| `view_referrer` | string   | Page source, parent page       |
| `view_name`     | string   | Page name                   |

#### Action Attributes

| **Field**      | **Type** | **Description**                            |
| ------------- | -------- | ----------------------------------- |
| `action_id`   | string   | Unique ID generated when the user performs an action on the page          |
| `action_name` | string   | Action name                            |
| `action_type` | string   | Action type (cold/hot start, click, etc.) |

#### Metrics

| **Field** | **Type** | **Description** |
| --- | --- | --- |
| `duration` | number（ns） | Time taken for the page action |

#### Statistics Metrics

| **Field** | **Type** | **Description** |
| --- | --- | --- |
| `action_long_task_count` | number | Number of long tasks associated with the action |
| `action_resource_count` | number | Number of resource requests associated with the action |
| `action_error_count` | number | Number of errors associated with the action |