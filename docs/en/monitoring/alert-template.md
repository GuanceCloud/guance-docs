# Alert Aggregation Notification Template

## Title

> You have {N} {{level}} alert notifications


## Content

### No Aggregation

> You have N new <<< custom_key.brand_name >>> alerts
>
> 1st / 2nd:
>
> Title
>
> Content
>
> <font color=#2F61CC> Go to Workspace to View </font>
>
> ---
>
> 2nd / 2nd:
>
> Title
>
> Content
>
> <font color=#2F61CC> Go to Workspace to View </font>


- Go to Workspace to View: Redirects to the Event Viewer to view current events (filter condition: `df_event_id`)

*Diagram:*

<img src="../img/alert-template.png" width="70%" >

### Rule Aggregation

#### All

> Associated Events: 123
>
> Aggregation Period: 2023/11/20 10:00 ~ 2023/11/20 10:05
>
> Associated Detection Rules:
>
> - {{Event Title}} <font color=#2F61CC> >>View  </font>

- View: Redirects to the Explorer to view all events generated by the current monitor within the aggregation period (filter condition: `df_monitor_checker_id`)

*Diagram:*

<img src="../img/alert-template-1.png" width="70%" >

#### Detection Rule - Monitor

> Detection Type: Monitor
>
> Detection Rule Name: {{Host}} CPU exceeds {Result}%
>
> Detection Rule ID: rule_cdbkjcbsdjcb1234445455
>
> Associated Events: 123
>
> Aggregation Period: 2023/11/20 10:00 ~ 2023/11/20 10:05
>
> <font color=#2F61CC> Go to Workspace to View </font>

- Redirects to the Explorer to view associated events for the current monitor (filter condition: `df_monitor_checker_id`)

*Diagram:*

<img src="../img/alert-template-2.png" width="70%" >


#### Detection Rule - Smart Check

> Detection Type: Smart Check
>
> Detection Rule Name: {{Host}} CPU exceeds {Result}%
>
> Detection Rule ID: rule_cdbkjcbsdjcb1234445455
>
> Associated Events: 123
>
> Aggregation Period: 2023/11/20 10:00 ~ 2023/11/20 10:05
>
> <font color=#2F61CC> Go to Workspace to View </font>

- Redirects to the Explorer to view associated events for the current smart check rule (filter condition: `df_monitor_checker_id`)

*Diagram:*

<img src="../img/alert-template-3.png" width="70%" >

#### Detection Rule - SLO

> Detection Type: SLO
>
> Detection Rule Name: {{Host}} CPU exceeds {Result}%
>
> Detection Rule ID: rule_cdbkjcbsdjcb1234445455
>
> Associated Events: 123
>
> Aggregation Period: 2023/11/20 10:00 ~ 2023/11/20 10:05
>
> <font color=#2F61CC> Go to Workspace to View </font>

- Redirects to the Explorer to view associated events for the current SLO (filter condition: `df_monitor_checker_id`)

*Diagram:*

<img src="../img/alert-template-3.png" width="70%" >

#### Detection Dimensions

> Detection Dimensions: service:kodo,host:test
>
> Associated Events: 123
>
> Aggregation Period: 2023/11/20 10:00 ~ 2023/11/20 10:05
>
> Associated Detection Rules:
>
> - {{Event Title}} <font color=#2F61CC> >>View  </font>

<img src="../img/alert-template-4.png" width="70%" >

#### Tags

> Tags: service:kodo,host:test
>
> Associated Events: 123
>
> Aggregation Period: 2023/11/20 10:00 ~ 2023/11/20 10:05
>
> Associated Detection Rules:
>
> - {{Event Title}} <font color=#2F61CC> >>View  </font>

- Redirects to the Explorer to view associated events for the current detection rule (filter condition: `df_monitor_checker_id`)

*Diagram:*

<img src="../img/alert-template-5.png" width="70%" >

### Intelligent Aggregation

#### Title Clustering

> Title: {{Host}} CPU exceeds {Result}%
>
> Associated Events: 123
>
> Aggregation Period: 2023/11/20 10:00 ~ 2023/11/20 10:05
>
> Associated Detection Rules:
>
> - {{Event Title}} <font color=#2F61CC> >>View  </font>

- Redirects to the Explorer to view all events generated by the current detection rule within the aggregation period (filter condition: `df_monitor_checker_id`)

*Diagram:*

<img src="../img/alert-template-6.png" width="70%" >

#### Content Clustering

> Title: {{Host}} CPU exceeds {Result}%
>
> Associated Events: 123
>
> Aggregation Period: 2023/11/20 10:00 ~ 2023/11/20 10:05
>
> Associated Detection Rules:
>
> - {{Event Title}} <font color=#2F61CC> >>View  </font>

- Redirects to the Explorer to view all events generated by the current detection rule within the aggregation period (filter condition: `df_monitor_checker_id`)

*Diagram:*

<img src="../img/alert-template-7.png" width="70%" >

### AI Aggregation

> Title: Summary of this alert.

> Handling Suggestions: Recommendations for handling the current alert.
        
> Aggregated Alerts: "Summary": Multiple hosts experienced CPU and memory anomalies, with the highest anomaly value being 98% (host 172.16.200.108). Host 1
        
> Related Detection Rules: df_monitor_checker_ids: Involved monitors (rule IDs).
        
> Aggregated Alerts: "Summary": Multiple hosts experienced CPU and memory anomalies, with the highest anomaly value being 98% (host 172.16.200.108). Host 1
        
> Related Detection Rules: df_monitor_checker_ids: Involved monitors (rule IDs).

Example:

```
Title: Within the aggregation period, a total of 3 monitors triggered alert events, generating 19 alert notifications.

Handling Suggestions: Prioritize handling high-frequency alert hosts, such as host 172.16.200.101 involving CPU anomalies, memory anomalies, and communication issues, requiring a comprehensive inspection. Check alert correlations; multiple monitors (rule IDs) involve host resources (CPU, memory) and module communication, which may indicate a systemic issue. Optimize monitoring strategies to reduce repeated alerts within short time periods and apply alert noise reduction based on time windows.

Aggregated Host Alerts: Multiple hosts experienced CPU and memory anomalies, with the highest anomaly value being 98% (host 172.16.200.108). Host 172.16.200.101 triggered both CPU and memory alerts and requires focused inspection.
        
Related Detection Rules: View title ("rul_e68e2d5e620b40c691128a399de3f479")
        
Aggregated Application Alerts: Multiple hosts experienced CPU and memory anomalies, with the highest anomaly value being 98% (host 172.16.200.108). Host 172.16.200.101 triggered both CPU and memory alerts and requires focused inspection.
        
Related Detection Rules: View title ("rul_e68e2d5e620b40c691128a399de3f479")

```

*Diagram:*

<img src="../img/alert-template-8.png" width="70%" >