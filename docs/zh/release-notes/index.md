---
icon: zy/release-notes
---
# 更新日志（2024 年）
---

本文档记录观测云每次上线发布的更新内容说明。

<div class="grid cards" markdown>

-   :material-view-quilt:{ .lg .middle } __[DataKit](../datakit/changelog.md)__

    ---

    包括迭代发布、Hotfix 等内容。


</div>

## 2024 年 10 月 16 日

### 新增集成 {#inte1016}

- [Hadoop hdfs datanode](../integrations/hadoop_hdfs_datanode.md)；
- [Hadoop hdfs namenode](../integrations/hadoop_hdfs_namenode.md)；
- [Hadoop yarn nodemanager](../integrations/hadoop_yarn_nodemanager.md)；
- [Hadoop yarn resourceManager](../integrations/hadoop_yarn_resourcemanager.md)；
- [Fluent Bit](../integrations/fluent_bit.md)；
- [Azure VM](../integrations/azure_vm.md)；
- [NPD](../integrations/npd.md)：新增事件模式采集&介绍。

### 功能更新 {#feature1016}

#### AI 智能助手

观测云引入 [AI 智能助手](../guance-ai/index.md)，提供快速响应，解答观测云相关的问题。

#### 云账单智能监控

1. 新增云账单查看器：当账单数据收集到观测云后，可以通过云账单查看器模版创建云账单查看器查看到云账单的全部数据
2. 新增云账单系统视图：通过对云账单的产品、地域、实例级别的消费分析，帮助用户快速分析和了解当前云资源的消费趋势，为未来云资源费用规划提供参考
3. 新增[云账单智能监控](../monitoring/intelligent-monitoring/index.md)：云账单智能监控提供高效的云成本管理工具，帮助用户实时监控云服务消费，识别异常费用并预警，避免不必要支出。它支持多维度可视化功能，帮助用户分析和理解云资源的消费模式，为未来预算规划提供依据，从而优化云资源配置，确保费用物尽其用。

#### 监控

1. [监控器配置](../monitoring/monitor/monitor-rule.md)交互优化：
    - 支持针对选中等级事件配置[异常追踪 Issue 关联](../monitoring/monitor/monitor-rule.md#issue)创建；
    - 优化 Crontab 自定义检测频率和检测区间配置交互；
    - 新增[通知内容自定义](../monitoring/monitor/monitor-rule.md#content)。
2. 告警策略配置优化：
    - 规则内针对事件过滤条件新增[正则匹配](../monitoring/alert-setting.md#filter)；
    - 优化过滤条件配置显示。
3. 数据采样优化：在监控器配置页面和指标分析页面，当图表因数据量过大自动触发数据采样时，用户可以手动关闭数据采样功能。

#### 日志

1. 日志新增[错误追踪](../logs/log-tracing.md)：支持错误日志追踪查看分析。


#### 场景

1. 仪表板[可见范围](../scene/dashboard/index.md#range)优化：仪表板可见范围在公开的基础上，支持自定义配置可见成员，同时支持批量设置仪表板可见范围，以提高仪表板管理效率。
2. [模板变量](../scene/visual-chart/chart-link.md#time)调整：新增 `#{startTime}`、`#{endTime}` 两个时间变量，支持获取到当前图表实际查询时间，可在图表查询、图表链接中应用此变量。
3. 日志流图显示列优化：日志流图的显示列若为 `@json` 格式切出字段，可对此字段设置单位，以统一图表数据的查看和分析体验。
4. 平台图表配色升级：平台图表配色得到升级，提供更佳的视觉效果。
5. 跨工作空间查询：所有图表内的表达式查询功能现已支持跨工作空间查询。

#### 管理

1. 黑名单功能增强：支持对所有数据类型的数据来源进行全选、单选、多选配置。
2. 自建索引/敏感数据扫描/数据转发：为优化数据处理和写入性能，涉及功能规则配置过滤条件去掉 ”match“ 和 ”not match“ 匹配模式。


#### 事件

1. [未恢复事件查看器](../events/event-explorer/unrecovered-events.md)优化：
    - 优化批量操作交互，新增**一键勾选当前页**和**一键勾选全部**选项，支持快速恢复当前选中的异常事件；
    - 手动恢复产生恢复后，OK 事件标题显示优化。

#### 基础设施

1. 资源目录优化：资源目录支持自定义资源分类图标，提供丰富的图标选择，以提升用户体验。

### Bug 修复 {#bug1016}

1. 解决了英文版集成无法搜索的问题。
2. 解决了 RUM 快照分享无法访问的问题。
3. 解决了组合监测 A&&B 不生效，A||B生成的 Result 只有 A 的值，没有B的值的问题。
4. 解决了视图变量的值带星号会导致其他视图变量选不到值的问题。
5. 解决了视图设置主从时匹配空值失败的问题。
6. 解决了双写的日志观测云与 SLS 数量对不上的问题。
7. 解决了场景 > 排行榜图表展示的数据中，只能保留 2 位小数，实际数值比较小的数据被四舍五入丢弃的问题。
8. 解决了开启连续触发判断次数 >10 次时无法保存的问题。
9. 解决了 APM 和日志迁入火山底座后数据无法聚合的问题。
10. 解决了管理后台同时开启本地和 LDAP 登录方式，前台只显示本地登录的问题。
11. 解决了可用性监测无数据的问题。
12. 解决了日志导出没有 `message` 内容这一列的问题。
13. 解决了日志排序异常的问题。
14. 解决了部分日志丢失的问题。
15. 解决了日志查看器中选择多索引就不显示上下文日志的问题。
16. 解决了 Grafana 图表转换工具转化效率兼容性低的问题。
17. 解决了 API 查询设置 offset 后命中率变成 -1 的问题。
18. 解决了可用性检测 > 数量统计配置时，添加的字段在输入框外的问题。
19. 解决了日志查看器中日志显示错乱的问题。
20. 解决了异常追踪配置 Issue 发现后在产生异常事件后没有产生 Issue 的问题。
21. 解决了日志查看器时间排序问题。
22. 解决了仪表板视图变量下拉列表不支持关键字查询的问题。
23. 解决了 Doris 存储通过 SQL 批量修改 logging 热存储时长后，冷存策略未变化；新建空间无法修改热存配置，会报错 406 的问题。
24. 解决了排行榜图表中 bottom 选项无返回值的问题。
25. 解决了文本无法正常写入 Doris 排查的问题。
26. 解决了同一时间段事件状态数量会变的问题。
27. 解决了定时报告仪表板邮件显示不全的问题。
28. 调整角色查询逻辑，解决了角色数量超出 100 时搜索不到的问题。
29. 解决了日志监控器获取不到检测维度的问题。

#### 部署版更新

1. 仪表板视图变量下拉框列出值取消 `limit 50` 的限制，以满足不同的数据查询需求。
2. 管理后台更新：管理[菜单](../deployment/menu.md)隐藏项新增“帮助”、“头像”、“系统通知”和“快捷入口”选项，以提高管理效率。


## 2024 年 9 月 25 日

### Breaking Changes {#breakingchanges0925}

拨测标签：字段名由 `tags.info` 调整为 `df_label`。

### 功能更新 {#feature0925}

#### 场景

1. 仪表板新增[历史版本记录](../scene/dashboard/history-version.md)：可查看此仪表板三个月内保存的版本记录，选中某版本后，可查看此版本图表详情，并以 JSON 格式、通过不同颜色标记选中版本的变更内容。
    - 支持将当前仪表板还原至选中的历史版本；
    - 支持克隆仪表板某个版本。
2. [自定义查看器](../scene/explorer/custom-explorer.md)支持变更显示列顺序：自定义查看器编辑配置时，可拖拽所选字段变更字段展示顺序。

#### 监控

监控器新增自定义操作权限：配置操作权限后，仅被赋予权限的对象可对此监控器进行启用/禁用、编辑、删除操作。

- 注意：若未配置操作权限，则监控器权限跟随“监控器配置管理”默认权限。

#### 用户访问监测

1. 会话重放增强：移动端上线会话重放功能，支持移动端应用通过会话重放的方式回溯用户行为轨迹、定位使用问题。
2. 数据访问增强：用户访问新增[数据访问](../real-user-monitoring/rumdata_access.md)功能，支持针对应用级别配置数据查看范围，精细化管理成员数据查询边界。

#### 管理

1. 跨空间授权优化：将登录空间的定义更新为“当前空间”，以简化用户在不同空间间的操作。
2. [数据转发规则](../management/backup/index.md)支持指定存储目录：存档类型为 AWS S3、华为云 OBS、阿里云 OSS时，支持将数据转发到存储桶下的对应目录中，帮助更好地管理转发数据。
    - 注意：请谨慎变更存储路径，由于更新配置存在 5 分钟左右的延迟，变更后可能会有部分数据依然转发到原目录下。
3. 数据转发查看器优化：
    - 时间控件调整：调整为查看器通用时间控件，可获取精确到分钟的转发数据。
    - SLS query logstore 数据存储位置调整：“数据转发”不再保留 SLS query logstore 的数据，可在“日志查看器”中查询。

#### 可用性监测

标签格式若为 `key:value`，在结果中会将 `key` 值提取到一级字段。

- 注意：若自定义的标签 key 值与其他拨测结果属性值重复，则做丢弃操作。

#### 基础设施

1. [资源目录](../infrastructure/custom/index.md)功能增强：优化了资源目录架构，支持用户自定义资源查看器模板，并提供列表和蜂窝图两种视图模式，以提升资源数据的查看和分析体验。
2. 容器交互优化：容器及 K8s 基础设施查看器切换查看时，筛选、搜索条件保留不重置。

### 帮助中心 {#helpcenter0925}

整合了帮助中心页面，允许用户通过统一入口访问所有[集成列表](https://docs.guance.com/integrations/integration-index/)，并支持搜索及标签过滤功能，以提高查找效率。

### Bug 修复 {#bug0925}

1. 解决了视图中 PromQL 查询结果设置规则映射不生效的问题。
2. 解决了主机存活告警 v2 监控器偶发无法恢复的问题。
3. 解决了仪表板定时报告发送到邮件时，报告中仪表板打开失败的问题。
4. 解决了使用 OpenAPI 创建的拨测任务无法修改的问题。
5. 解决了付费计划中 PV 统计量和费用详情里的 PV 数量不一致的问题。
6. 解决了 Webhook 添加用户信息后未携带手机号码的问题。
7. 解决了视图变量的取值和仪表板中的取值不一致的问题。
8. 解决了共享工作空间的首页数据显示问题。
9. 解决了数据授权空间中，模板变量值下拉框获取的数据与实际获取的数据对不上的问题。
10. 解决了时序表格图在仪表板中时常加载不出来数据的问题。
11. 优化了若干页面显示问题。

### 部署版更新 {#deployment0925}

1. [Datakit 管理](../deployment/setting.md#datakit)支持筛选在线主机：支持筛选最近 10 分钟、最近 15 分钟、最近 30 分钟、最近 1 小时、最近 3 小时内有数据上报的主机。
2. 管理后台：
    - 空间存储类型为“火山引擎”时，支持配置热数据保留时长。
    - 新建工作空间文案和交互优化，默认主引擎只有一个选项时用户无需额外指定。
3. 平台配色模板增强：支持定义导航栏及导航文字显示颜色配置。
4. License 使用和过期提醒：针对 License 即将到期、已过期和使用超量等状态新增控制台全局提示；针对平台组件版本升级新增控制台全局提示。

## 2024 年 9 月 4 日

### 功能更新 {#feature0904}

#### 日志

1. 日志查看器新增交互：长按 Ctrl 可针对查看器列表文本分词进行 “添加到查询”、“从查询中排除”、“复制” 操作，便捷目标数据的快速查询追加。同理日志详情页内容区域也支持此交互。
2. 日志支持绑定[火山引擎 TLS 外部索引](../logs/multi-index/tls.md)：可绑定外部索引，在观测云平台直接查看及分析火山引擎日志数据。
3. 日志 > [数据访问](../logs/logdata-access.md)优化：
    - 新增数据访问导航页，页面右上角新增帮助文档跳转链接；
    - 数据访问规则新增【名称】字段为唯一性 ID，新增规则【描述】字段，可自定义名称及描述以区分规则使用场景。
4. 日志查看器筛选项优化：日志查看器列表【日志索引】筛选项支持搜索，可关键字搜索索引并进行勾选。
5. 日志[状态自定义](../logs/manag-explorer.md#status-color)：支持自定义日志状态值，并在控制台中为每个状态值设置颜色，适应不同的日志接入场景，同时使日志的状态显示更加个性化和直观。



#### 场景

1. 新增图表类型[热力图](../scene/visual-chart/heatmap_scene.md)：用户可以通过颜色深浅直观地查看数据的分布和趋势，帮助更好地理解数据。
2. [图表链接重定向跳转](https://www.guance.com/learn/articles/Chart-Links)：联动 Function 函数结合仪表板数据实现链接重定向跳转。  
3. [告警统计图表](../scene/visual-chart/alert-statistics.md)组件升级：更换列出逻辑，新版本的告警统计图列出效果同未恢复事件查看器一致，统一用户查看体验。      
    - 注意：跨工作空间列出情况下不支持 “创建 Issue” 和 “手动恢复” 操作。   
4. 分组表格图自定义显示列：在分组表格图中，新增自定义显示列功能，支持对返回的列设置显示或隐藏，提供更灵活的数据展示方式。
5. 图表跨空间授权查询交互优化：开启空间授权功能后，可以直接在查询上方选择被授权的空间列表，操作更加直观和便捷。

#### 异常追踪

异常追踪 Issue 和监控器事件：内容若存在 `@ 成员`配置，则通过 Webhook 对外传递时 Issue 或事件会同步携带 `@成员`的账号属性信息。


#### 监控

1. 外部事件检测：支持自定义事件发生时间和标签属性追加。注意：
    - 字段值统一使用字符串类型；
    - 字段名称不支持以 `_` 下划线和 `df_` 前缀开头且不能与当前事件默认字段重名；
    - 自定义标签字段名不能与 `dimension_tags` 内定义字段名重名。
2. 名词调整：“无数据” 正式更新为 “数据断档”，保证页面配置查看体验统一。

#### Pipeline

将拨测数据和日志数据分离处理，并新增“可用性拨测”数据类型。避免在数据处理时的相互干扰，确保数据处理的准确性和效率。

注意：仅中心 Pipeline 支持“可用性拨测”数据类型，且拨测节点的 DataKit 版本必须 >= 1.28.0。

#### 其他

1. 工作空间列表显示优化：针对列表操作栏，新增显示创建人头像鼠标悬浮提示创建人、创建时间、更新人、更新时间；同时对操作项整体显示进行优化。
2. 列表新增跳转审计事件：列表操作栏新增审计事件跳转链接，点击可跳转查看对应审计事件。
3. 账号管理显示调整：单点登录用户【账号管理】菜单下不显示密码项。


### Bug 修复 {#bugs0904}

1. 解决了本地 Function 函数做为数据源 查询时时间范围未联动时间控件问题。
2. 解决了 PromQL 数据查询结果 展示顺序不正确的问题。
3. 解决了监控器和图表查询 的筛选组件不统一的问题。
4. 解决了从异常追踪入口点击智能监控的相关事件会在非智能监控事件列表中显示导致无查询结果的问题。
5. 解决了飞书异常追踪 Webhook 集成无数据、无回调的问题。
6. 解决了万进制单位显示数字的问题。
7. 解决了查看器分析模式下，添加筛选条件时无法搜索字段的问题。
8. 解决了从监控事件创建 Issue 无来源链接的问题。
9. 解决了日志导出到 CSV 失败的问题。
10. 解决了未收到高消费预警邮件通知的问题。
11. 解决了异常追踪切换频道，Issue 的列表无变化的问题。
12. 解决了日志索引 a、b 存在相同字段名(忽略大小写)时，日志查看器中勾选索引 a、b 出现报错 的问题。

### 部署版更新

1. 图表自定义返回数量：时序图、饼图、表格图、排行榜、矩形树图和地图支持自定义返回数据的数量，无最大限制，以满足不同的数据展示需求。
2. 管理后台 > Datakit 管理，支持导出 Datakit 清单。




## 2024 年 8 月 21 日


### Breaking Changes {#breakingchanges0821}

- OpenAPI / 全局 API：【事件】未恢复事件数据源从 `UE` 变更为 `E`。


### 新增功能 {#new0821}

- 管理：新增 [Client Token](../management/client-token.md) 统一管理入口，用户使用公网 DataWay 接入 RUM 应用时，可更换系统默认生成的 Token，使用自定义创建的 Token。

![](img/overall-token.png)


### 持续优化 {#consistent0821}

- 异常追踪：
    - 新增 [Issue 发现](../exception/config-manag/issue-discovery.md)页面。通过这一功能，您可以定制 Issue 发现的具体规则，对监控器检测规则触发的异常事件和相关数据进行统一管理和筛选。将一系列事件视为由单一原因引起，并为这些事件设置筛选条件，然后选择聚合维度来进一步细化数据。细化后，数据会根据您设定的检测频率进行聚合。最终，系统会根据您预设的 Issue 标题和描述，自动将这些信息推送到指定的频道，确保所有相关方都能及时接收并有效处理这些 Issue。
    - 配置管理 > 通知策略：通知策略列表新增创建/更新的信息显示。


### 常规更新 {#usual0821}

- 数据保存策略：
    - 原【应用性能】项拆分为【应用性能-链路】、【应用性能-Profile】，支持用户分别配置 Trace 数据和 Profile 数据的保存策略；
    - 原【数据转发】名称修改为【数据转发-观测云】。
- 监控 > 通知对象管理：连续一天发送失败会发系统通知；连续两天发送失败会发系统通知且自动禁用。
- [未恢复事件查看器](../events/event-explorer/unrecovered-events.md)：
    - 数据源变更为查询事件数据，以 `df_fault_id` 作为唯一标识进行聚合，获取最近一条数据结果返回展示。
    - 页面整体 UI 改造。
- 应用性能监测（APM）> 链路：[服务调用关系图](../application-performance-monitoring/explorer/explorer-analysis.md#call)新增绑定内置视图能力，点击服务的卡片，即可快速查看与该服务关联的相关用户视图。
- 管理：
    - 新增【工作空间描述】；
    - 编辑模式下，交互变更为打开新窗口；
    - 工作空间列表下支持通过工作空间的名称或描述来搜索定位。
- 日志 > BPF 日志 > 七层 BPF 网络日志：网络请求拓扑图 UI 优化，突出了服务端与客户端的区分。
- 可用性监测 > HTTP 监测 > 高级设置 > 请求设置默认添加 `Accept-Encoding:identity`。
  

### 部署版更新

- 新增[拨测节点管理](../deployment/task.md)入口，支持创建平台级别拨测节点，并通过节点列表统一管理所有节点。通过此入口创建的拨测节点支持配置中英文节点名，从而适配观测云的国内外站点显示和上报数据结果内容。

![](img/task.png)

- 数据保存策略：

    - 考虑到用户处于存储成本等因素的考量，需要自定义这些数据的保存时长，部署版管理后台新增【会话重放】配置项。
    - 原【数据转发】名称修改为【数据转发-默认存储】；
    - 原【应用性能】项拆分为【应用性能-链路】、【应用性能-Profile】，支持用户分别配置 Trace 数据和 Profile 数据的保存策略；
- 支持火山引擎 TLS 做为底层数据存储引擎。

### BUG 修复 {#bugs0821}

- 解决异常追踪的通知策略未生效的问题；
- 解决应用性能监测链路追踪导出异常的问题；
- 解决通过 OpenAPI 修改通知对象报错无权限配置显示的问题；
- 解决日志查看器重新设置时间范围后不能自动获取 `source` 筛选的问题；
- 解决查看器搜索栏已添加 `source` 筛选条件范围，但在“快捷筛选”中依旧显示过滤条件外的全部 `source` 的问题；
- 解决突变检测报错的问题；
- 解决通过 OpenAPI 写入数据访问规则后，UI 页面打开无法查看角色信息的问题；
- 解决图表设置的数据格式对图例中数据不生效的问题；
- 解决自建拨测节点下，关联的拨测任务删除后，实际拨测还在运行的问题。


## 2024 年 8 月 7 日


### 新增功能 {#new0807}

- 用户访问监测（RUM）：新增[热图](../real-user-monitoring/heatmap.md)。以视觉方式呈现访客与网站的互动情况，获取页面元素的点击数据和点击位置，了解用户的关注点。

- 应用性能监测（APM） > 链路：新增[安装引导](../application-performance-monitoring/explorer/index.md)页面。

- 监控：新增检测类型——[区间检测 V2](../monitoring/monitor/interval-detection-v2.md)，以检测指标的的历史数据建立的置信区间来预测正常波动范围。

### 持续优化 {#consistent0807}

- 异常追踪:
    - 配置管理 > 通知策略：新增[操作审计和执行日志](../exception/config-manag.md#check-events)查看入口。在接收 Issue 通知时，有时会遇到通知未正常发送或针对通知策略有疑议，此时可查看当前通知策略的操作审计事件和执行日志数据来进行判断。
    - APM / RUM [Issue 自动发现](../application-performance-monitoring/error.md#issue)支持添加筛选条件；
    - 针对部署版，新增[统一管理异常追踪等级](../deployment/setting.md#global-settings)入口；
    - 日程：
        - 在日程编辑页面，不同的通知对象会自动生成颜色；
        - 日程管理：【我的日程】与【所有日程】新增统计数量；


### 常规更新 {#usual0807}

- 监控 > [SLO](../monitoring/slo.md#slo)：
    - 新增标签配置，最终作用到产生的事件数据信息内；
    - 配置优化：通过设置【目标】和【最低目标】的 7 天达标率范围，判断生成警告或紧急事件；
    - 支持通过关联【告警策略】实现告警通知发送。
- 可用性监测：
    - 拨测任务新增标签配置；
    - 配置拨测任务页面的[测试模块](../usability-monitoring/request-task/http.md#test)优化；
    - 列表新增[快捷筛选](../usability-monitoring/request-task/index.md#manag)模块；
- 查看器：分析模式下支持导出 CSV 文件。
- 基础设施 > 容器：新增进程关联页面展示。

### BUG 修复 {#bugs0807}

- 解决【任务调用】计费统计次数未显示的问题；
- 解决图表查询时【左 * 匹配】问题；
- 解决 BPF 网络日志返回数据未包含容器等相关信息的问题；
- 解决中心 Pipeline 失效问题。 

### Breaking Changes {#breakingchanges0807}

- OpenAPI：
    - SLO 创建/修改接口新增 `tags`、`alertPolicyUUIDs` 并弃用 `alertOpt` 参数；
    - SLO 获取详情和列表接口返回结果中新增 `tagInfo`、`alertPolicyInfos` 字段，丢弃了 `alertOpt` 字段。


## 2024 年 7 月 24 日

### 观测云更新

- 异常追踪：
    - 新增[分析看板](../exception/issue-view.md)：可视化展示不同指标数据。
    - 新增[日程](../exception/calendar.md)管理和[通知策略](../exception/config-manag.md#notify-strategy)：对 Issue 的内容范围做进一步通知分配。
- 场景：
    - 图表：新增[时间偏移](../scene/visual-chart/timeseries-chart.md#advanced-setting)设置。启用时间偏移后，当查询相对时间区间时，实际查询时间范围向前偏移 1 分钟，以防止入库延迟导致数据获取为空。
    - 仪表板：新增[历史快照](../scene/dashboard/config_list.md#history)入口。
    - 快照：保存快照时自动获取当前页面上选取的时间范围；分享快照时，可选择允许查看者更改时间范围。
- 监控：
    - 基础设施存活检测 V2：新增[附加信息](../monitoring/monitor/infrastructure-detection.md#config)。选定字段后，系统会做额外查询，但不会用于触发条件的判断。
    - 通知对象管理：新增【操作权限】选项配置，由开关控制通知对象的操作（编辑、删除）权限。



## 2024 年 7 月 10 日

### 观测云更新

- 场景：
    - [视图变量](../scene/view-variable.md#add)：
        - 新增配置项开关：包含 * 选项。
        - 选择隐藏视图变量时，列表新增隐藏标识。
    - 仪表板：[分组](../scene/dashboard/config_list.md#group)组件支持配置颜色。
    - 图表：别名功能覆盖排行榜、矩形树图、桑基图。
    - 仪表板/查看器/内置视图：新增[卡片属性](../scene/dashboard/config_page.md#metadata)信息，优化编辑配置。
- 监控：
    - 通知对象管理：配置 [Webhook 通知对象](../monitoring/notify-object.md#custom-webhook)，支持追加成员信息。
    - 应用智能检测：新增追踪历史变化，过滤周期性的异常数据突变；新增异常服务关联影响的用户数。
- 事件 >[ 事件列表查看器](../events/event-explorer/event-list.md)：显示列新增告警通知状态标识。
- 日志：
    - 索引：绑定 [SLS 外部索引](../logs/multi-index.md#sls)时，新增访问类型选择，支持自定义公网访问或者内网访问；
    - 日志查看器：[聚类分析](../logs/explorer.md#cluster)模式下，支持导出显示列数据及关联日志页面数据。



### 观测云部署版更新

- 新增全局功能[菜单管理配置](../deployment/menu.md)，支持自定义控制台显示菜单范围，并同步至工作空间功能菜单栏。
- [模版管理](../deployment/integration.md)：自定义模板管理上传逻辑优化。

## 2024 年 6 月 26 日

### 观测云更新

- [Pipelines](../pipeline/index.md)：支持选择中心 Pipeline 执行脚本。
- 付费计划与账单：新增[中心 Pipeline 计费项](../billing/billing-method/index.md#pipeline)，统计所有命中中心 Pipeline 处理的原始日志的数据大小。
- 监控
    - 通知对象管理：新增[权限控制](../monitoring/notify-object.md#permission)。配置操作权限后，仅被赋予权限的对象可对此通知对象进行编辑、删除操作。
    - 智能监控 > 日志智能检测：新增追踪历史变化，过滤周期性的异常数据突变。
- 日志 
    - [数据访问](../logs/logdata-access.md#config)：新增对被授权查看的日志索引做访问权限配置。
    - 日志查看器：显示列拓展，支持[添加 json 对象内字段内容](../logs/manag-explorer.md#json-content)到一级返回显示。
    - [BPF 网络日志](../logs/bpf-log.md)：
        - 连接展示效果优化；
        - 支持直接跳转至详情页；
        - 支持自定义添加显示列。
- 场景
    - 时序图：折线图、面积图新增[断点连接](../scene/visual-chart/timeseries-chart.md#breakpoint)设置，柱状图新增【显示返回值】按钮。
- [可用性监测](../usability-monitoring/request-task/index.md#manag)：任务列表新增表头排序。
- DataFlux Func：支持观测云异常追踪脚本[集成钉钉应用](https://func.guance.com/doc/script-market-guance-issue-dingtalk-integration/)。

### 观测云部署版更新

Profile：通过配置参数，支持文件存储和对象存储两种方式。 

## 2024 年 6 月 13 日

### 观测云更新

- [BPF 网络日志](../logs/bpf-log.md)：优化 BPF 网络功能，增强 L4/L7 网络联动。
- APM/RUM：新增 【[Issue 自动发现](../application-performance-monitoring/error.md#issue)】功能。启用该配置后，观测云会将符合配置项规则的错误数据记录自动创建 Issue。
- 监控
    - 智能监控：新增 [Kubernetes 智能检测](../monitoring/intelligent-monitoring/k8s.md)：通过智能算法自动检测 Kubernetes 中的异常，检测指标包含 Pod 总数，Pod 重启，APIServer QPS 等。
    - 告警策略管理：
        - 新增[过滤](../monitoring/alert-setting.md#filter)功能。在进行告警规则配置时，该功能允许在原有等级基础上增加更细致的过滤条件，仅匹配等级+过滤条件的事件才会发送给对应的通知对象。
        - 支持选择外部邮箱做为通知对象。
    - 监控器 > 事件内容：支持自定义输入外部邮箱。
- 场景
    - 拓扑图：新增链接配置。
    - 桑基图：由原先支持最多 4 个节点配置改为 6 个。
- Pipeline：列表新增过滤条件显示。
- 日志 > 索引：列表显示优化。


### 观测云部署版更新

Profile：文件大小由原先的固定 5MB 修改为支持自定义，点击查看[如何配置](../deployment/application-configuration-guide.md#studio-front)。

## 2024 年 6 月 3 日

### 观测云更新

- **管理 > [跨工作空间授权](../management/data-authorization.md#site)**：添加页面新增【数据范围】，支持多选数据类型。
- **日志 > 日志查看器**：支持[跨工作空间索引查询](../logs/cross-workspace-index.md)，快速获取其它空间的日志数据，从而突破日志数据存储位置的限制，大幅度提升数据分析和故障定位的效率。


## 2024 年 5 月 29 日

### 观测云更新

- [DCA](../dca/index.md)
    - 支持私有化部署，可直接通过工作空间页面按钮前往 DCA 控制台。
    - 支持批量管理功能。
- 异常追踪：
    - Webhook 接收通道：支持 Issue 回复的新增、修改通知；
    - 支持选择团队或添加外部邮箱为 Issue 负责人。
- 日志 > [上下文日志](../logs/explorer-details.md#up-down)：查询逻辑修改；支持通过日志上下文详情页对相关数据作进一步查询管理。
- 场景
    - 视图变量：分组标题/图表标题支持配置 `#{视图变量}` 显示。
    - 时序图 > 分析模式：支持调整时间间隔 interval。
    - 仪表板/自定义查看器：当标签数量超过 20 个时，显示搜索框；标签名前显示颜色。
- 监控
    - 监控器/智能监控/静默管理 > 快捷筛选：当值超过 20 个时，出现搜索框，支持搜索定位。
    - 监控器：针对 PromQL 查询检测，事件通知中自动列出可使用的模板变量。
- 基础设施 > 网络：网络详情页 > 网络分析支持 `ip:端口` 和 `ip` 两种维度统计列出展示。
- 应用性能监测 > 服务 > 新建/修改服务清单：填写仓库链接、文档链接时增加格式校验。

#### Breaking Changes

- 管理 > 属性声明：自定义属性字段值调整为字符串类型进行存储。


### 观测云部署版更新

- [模版管理](../deployment/integration.md)：新增导入模版入口，模版范围包括视图模板、监控器模板、自定义查看器模板、Pipeline。支持部署版用户将自定义模板变更为平台级别模板供其他工作空间使用。
- 用户管理：批量操作交互优化。

## 2024 年 5 月 15 日

### 观测云更新

- 监控 
    - 监控器 > [突变检测](../monitoring/monitor/mutation-detection.md) > 检测指标：支持【环比上期】选项，从而实现某个固定时间段内的数据进行最终比较。
    - [静默管理](../monitoring/silent-management.md)：新增【附加信息】功能，支持针对静默规则添加解释说明，从而标识静默的原因或者来源等信息。
    - 智能监控 > 主机智能监控：新增网络流量、磁盘 IO 两项检测维度。
- 场景 > 仪表板：
    - [视图变量](../scene/view-variable.md)：编辑页面样式优化，支持定义下拉单选、多选。
    - 分组表格图、指标分析 > 表格图支持多列查询结果显示适配，如 
```
L::RE(`.*`):(count(*),message,host) {index = 'default' and status = 'error'} BY source,service
```
- 查看器：
    - 日志查看器 > [上下文日志](../logs/explorer-details.md#up-down)支持微秒级的数据查询过滤，解决出现同一时刻（毫秒）有多条数据，导致不能命中定位显示某条日志上下文的问题。
    - 所有查看器支持选择[导出](../getting-started/function-details/explorer-search.md#csv)数据量为 CSV 文件。
    - 新增查看器搜索查询审计事件，即由用户手动发起的查询操作会计入审计事件记录。
- 服务管理：由原来所属的路径【场景】迁移至【应用性能监测】，优化使用体验。
- 生成指标：支持配置多个 by 分组，不做数量限制。
- DQL 查询：表达式查询支持指定值填充，支持针对子查询做结果填充和最终值填充。
- 用户访问监测 > Android：应用配置显示优化。
- 事件：新增详情页关联查看跳转入口。在不存在检测维度数据的情况下，可在详情页跳转查看器查看。

### 观测云部署版更新

- 新增 [DataKit 清单管理](../deployment/setting.md#datakit)页面。
- 部署版配置单点登录对接时，支持自定义登录[显示标题、描述和 logo](../deployment/azure-ad-pass.md#config)。
- [用户](../deployment/user.md#edit)：新增扩展属性配置。
    - 支持本地用户直接在编辑页面配置属性。
    - 支持单点登录时默认自动将第三方用户属性配置通过 userinfo 接口追加到观测云。

## 2024 年 4 月 24 日

### 观测云更新

- 管理：
    - 新增[云账号管理](../management/cloud-account-manag.md)：将企业所有的云服务账号集中起来进行统一管理，并借由账号下某些配置的唯一性来进行区分。通过配置集成采集器，针对每个账号下的云服务进行独立管理，从而实现对业务数据的精细化控制。
    - 账号管理：[账号登录过期时间](../management/index.md#login-hold-time)调整。
- 新增[快速搜索](../management/index.md#quick-entry)弹窗，可快速查看当前工作空间内最近访问的页面和其他各功能相关页面。
- 基础设施 > 容器：新增 [Statefulset](../infrastructure/container.md#statefulset)、[Persistent Volumes](../infrastructure/container.md#persistent-volumes) 两种对象查看器。
- 异常追踪：
    - 新增 Issue 负责人配置，观测云会为负责人发送邮件通知。
    - 频道管理：支持[升级配置](../exception/channel.md#upgrade)。即，设置新 Issue 超过某特定分钟数时，若未指定负责人，则发送升级通知给对应的通知对象。
- 监控 
    - 监控器：检测配置：支持在【触发条件】配置连续多次判断触发条件生效后，再次触发生成事件。
    - [静默管理](../monitoring/silent-management.md)：
        - 静默规则列表页展示优化：支持列出当前工作空间所有静默规则，可通过快捷筛选快速过滤列出目标规则。
        - 事件属性匹配支持反选，筛选条件格式如下：`attribute:value`、`attribute:*value*`、`-attribute:value`、`-attribute:*value*`，不同字段组合关系为 AND，相同字段的多个值为 OR。
- DQL `match` 函数的含义变更为`完全匹配`。此变更仅针对新引擎，分别应用查看器、监控器这两个场景。
    - 查看器场景示例：`host:~cn_hangzhou`。
    - 监控器场景示例：
    ```
    window("M::`cpu`:(avg(`load5s`)) { `host` = match('cn-hangzhou.172.16.***') } BY `host`", '1m')
    ```
- 场景 > 仪表板[图表](../scene/visual-chart/index.md#download)可直接下载为 PNG 图片，表格图还可导出为 CSV 文件。
- 日志 > 绑定索引：【字段映射】更改为非必填项。
- 集成/内置视图：模版新增标签管理。
- Service Map 跨工作空间节点[样式显示调整](../application-performance-monitoring/service-manag/service-map.md#servicemap)。

### 观测云部署版更新

- 管理 > 基本信息 > License 信息：DataKit 数量限制支持按照数据统计范围调整，变更为存活时间 >= 12 小时以上的主机或 DK 数量。
- 支持配置黑名单，自定义选择导入观测云集成、视图模板、监控器模板范围。

### OpenAPI 更新

- Pipelines [新增](../open-api/pipeline/add.md)/[修改](../open-api/pipeline/modify.md)：新增 profiling 类型；
- 用户视图[新增](../open-api/inner-dashboard/add.md)/[修改](../open-api/inner-dashboard/modify.md)：支持绑定仪表板配置。

## 2024 年 4 月 10 日

### 观测云更新

- 监控 > 监控器 > 新建：新增【数据断档】、【信息生成】配置区域，以便更好地区分异常数据和数据断档情况。
- 管理：新增[系统通知](../management/index.md#system-notice)页面，可查看当前账号下的工作空间所有配置的异常状态消息。
- 场景：
    - 图表查询：新增 [Rollup 函数](../dql/rollup-func.md)，该函数同样适用于【指标分析】与【查询工具】；
    - 仪表板/用户视图：新增 [pin 钉住](../scene/dashboard/config_list.md#pin)功能。在当前访问工作空间被授权查看若干其他工作空间数据的前提下，支持将查询其他工作空间数据设为默认选项。  
    - 系统视图：支持克隆创建为仪表板或者用户视图；
    - 自定义查看器：优化搜索模式；非编辑模式下，hover 在【数据范围】即可查看所有筛选条件。
- 查看器 > [快捷筛选](../getting-started/function-details/explorer-search.md#quick-filter)：
    - 新增【维度分析】按钮，点击后可快速切换到查看器分析模式；
    - 支持通过点击外部按钮直接将当前字段添加到显示列/从显示列移除。
- [体验版工作空间](../plans/trail.md#upgrade-entry) > 导航栏：新增【立即升级】按钮。
- 基础设施 > 容器 > 蜂窝图：新增 CPU 使用率（标准化）和 MEM 使用率（标准化）两种指标填充方式。

### 观测云部署版更新

工作空间管理：新增[数据上报限制](../deployment/space.md#report-limit)，帮助利益相关方节约资源等使用成本。

## 2024 年 3 月 27 日

### 观测云更新

- 监控：
    - 告警策略管理：每条通知规则（包含默认通知和自定义通知）配置新增[支持升级通知条件](../monitoring/alert-setting.md#upgrade)。
    - 监控器 > 事件内容：新增[自定义高级配置](../monitoring/monitor/threshold-detection.md#advanced-settings)，支持添加关联日志和错误堆栈；
    - 主机智能监控：将当前突变展示更改为基于周期以预测的方式进行异常告警，趋势图会展示当前指标及置信区间上下界，超出置信区间的异常会标红展示。
- 场景 > 图表：新增[拓扑图](../scene/visual-chart/topology-map.md)。
- APM > 链路详情页 > [服务调用关系](../application-performance-monitoring/explorer/explorer-analysis.md#call)：调整为服务拓扑展示，并展示服务与服务之间的调用次数。
- 数据保存策略：Session Replay 的数据保存策略与 RUM 的保存策略保持联动一致，即 RUM 数据保存 3 天，Session Replay 的数据也保存 3 天。
- 查看器：
    - 事件查看器 > 基础属性：新增检测指标是否显示配置，缓存到本地，全局适配；
    - APM > 错误追踪 > 聚类分析 > 详情页：支持创建异常追踪 Issue；
    - RUM > Error > 聚类分析 > 详情页：支持创建异常追踪 Issue；
    - RUM > View > 详情页：
        - 性能：新增【所有条目】选项，列出当前 View 下所有关联数据；
        - Fetch/XHR：点击数据行，支持打开对应链路详情页或 Resource 详情页。
    - 时间控件：获取 “当前时间” 时，精确到毫秒。
- 管理 > [工单管理](../management/work-order-management.md)：
    - 新增评星和评价；
    - 已反馈的工单需要调整为 7 天内无客户反馈则自动关单；
    - 支持工单列表导出；
    - 状态为【已完成】【已撤销】的工单可以进行重启操作；
    - 账号注销后其下提交的未关闭状态工单支持自动关闭处理。
- 云市场开通流程整体优化。

### 观测云部署版更新

- 数据保存策略：支持工作空间拥有者配置数据保存策略，且支持自定义输入保存时长。应用场景：
    - 指标管理 > 指标集；
    - 日志 > 索引 > 新建。
- 用户：支持[通过邮箱账号](../deployment/user.md#via-email)邀请成员。


## 2024 年 3 月 13 日

### 观测云更新

- 监控 > 监控器：监控器类型【[组合检测](../monitoring/monitor/composite-detection.md)】上线。支持将多个监控器的结果通过表达式组合成一个监控器，最终基于组合后的结果进行告警。
- 场景 > 服务：支持[跨工作空间 Service Map 查询](../application-performance-monitoring/service-manag/service-map.md#servicemap)。

### 观测云部署版更新

- 管理 > 基本信息：新增 “已用 DK 数量” 显示；
- 管理 > 用户：新增[分组](../deployment/user.md#team)页面，基于组可配置关联工作空间及角色，用户可通过组获得对应工作空间的访问权限。



## 2024 年 3 月 6 日

### 观测云更新

- 监控
    - 监控器 > 检测频率：新增 **[Crontab 自定义输入](../monitoring/monitor/detection-frequency.md)**，满足仅需在特定的时间段执行检测的需求；
    - 突变检测：新增【最近 1 分钟】、【最近 5 分钟】的检测区间；
    - 静默管理：选择静默范围时“事件属性”为非必填项，可根据需要自行配置更细颗粒度的匹配规则。
- DataFlux Func：新增 [Function 外部函数](../dql/dql-out-func.md)。允许第三方用户充分利用 Function 的本地缓存和本地文件管理服务接口编写函数，在工作空间内执行数据分析查询。
- APM > [链路](../application-performance-monitoring/explorer/explorer-analysis.md)：
    - Title 区域 UI 显示优化；
    - 针对火焰图、瀑布图、Span 列表超过 1 万的 Span 结果，支持通过**偏移**设置查看未展示 Span；
    - 新增 **Error Span** 筛选入口；支持输入 Span 对应的资源名称或 Span ID 进行搜索匹配。
- 场景
    - 图表：新增[桑基图](../scene/visual-chart/sankey.md)；
    - 视图变量：新增**选中**按钮，勾选后默认全选当前所有值，可按需再反选。
- 账号管理：新增[注销](../management/index.md#cancel)入口。
- 查看器：
    - UI 显示优化；
    - 筛选新增正则匹配 / 反向正则匹配模式；
    - Wildcard 筛选和搜索支持左 * 匹配。
- 事件 > 详情页：【告警通知】tab 页 UI 显示优化。


### 观测云部署版更新

- 新增[登录方式选择](../deployment/setting.md#login-method)，对登录方式进行统一管理；
- 针对本地账号和单点登录账号新增[删除](../deployment/user.md#delete)操作。

## 2024 年 1 月 31 日

### 观测云更新

- 监控：
    - [智能监控](../monitoring/intelligent-monitoring/index.md)：
        - 主机、日志、应用智能检测频率调整为每 10 分钟执行一次，每执行一次检测计算为 10 次调用费用；
        - 为提升算法精度，日志、应用智能检测采用数据转存的方式，开启一个智能监控后，会生成对应的指标集及指标数据。这一调整会产生额外的时间线，具体数量为当前监控配置的过滤条件所过滤的检测维度数量(service、source) * 检测指标数量，由于没有对监控器的过滤条件进行存储，如果发生监控器过滤条件配置修改的情况，会生成新的等量时间线，所以在修改监控器过滤条件配置当日会有时间线重复计费的情况，修改后次日恢复正常。
    - 告警策略管理：
        - [新增自定义通知时间配置](../monitoring/alert-setting.md#custom)，按周期、时间区间细化告警通知配置；
        - 重复告警新增【永久】这一事件选项。
    - 监控器 
        - 告警配置：支持配置多组告警策略；若配置多个，则 `df_monitor_name` 与 `df_monitor_id` 会以多个的形式呈现，并由 `;` 分隔开；
        - 联动异常追踪 Issue 改造：新增【事件恢复同步关闭 Issue】开关，当异常事件恢复时，则同步恢复异常追踪 Issue；
        - 监控器列表[新增克隆按钮](../monitoring/monitor/index.md#options)。
    - 通知对象管理：新增[简单 HTTP 通知类型](../monitoring/notify-object.md#http)，直接通过 Webhook 地址接收告警通知；       
- 场景：
    - 图表：单位新增【货币】选项；高级配置 > 同期对比更改为【同环比】；
    - 服务管理 > 资源调用：排行榜新增 TOP / Bottom 数量选择。
- 查看器：显示列设置新增【时间列】开关。
- 付费计划与账单：
    - 工作空间锁定弹窗页面新增[新建工作空间](../billing-center/workspace-management.md#workspace-lock#lock)入口，优化操作体验；
    - AWS 注册流程优化。

### 观测云部署版更新

- 支持 [LDAP 单点登录](../deployment/ldap.md)；
- 工作空间管理 > 数据存储策略新增自定义选项，范围为<= 1800 天（ 5 年）；其中，指标新增可选项 720 天、1080 天等保存时长；在控制台中设置 > 编辑数据存储策略，修改保存后即可同步更新后台数据存储；
- 用户：支持为用户账号一键配置分配工作空间以及角色；
- 新增控制台审计事件查看入口，可快速查看所有工作空间相关操作审计；  
- 新增【管理后台 MFA 认证】。


## 2024 年 1 月 11 日

### 观测云更新

- 日志：
    - 新增 BPF 网络日志采集及日志详情页，支持 JSON 格式转化；详情页新增可读的展示模式；
    - 新增绑定【关联网络日志】；
    - 数据访问：新增批量操作。
- 定时报告：新增可选分享方式【公开分享】或【加密分享】。
- 仪表板：
    - 视图变量新增【所有变量值】传参选项；
    - 时序图：新增排序逻辑（仅限新引擎），支持针对返回结果进行排序。
- 生成指标：支持批量操作；标准及以上权限成员支持克隆。
- 监控器：
    - 通知对象管理：适配新的钉钉机器人，创建时「密钥」选项非必填，快速关联钉钉机器人。
    - SLO 扣分逻辑优化。
- 用户访问监测（RUM）：公网 Dataway 支持 ip 转换成地理位置信息。

