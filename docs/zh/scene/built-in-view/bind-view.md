# 绑定内置视图
---


观测云支持自定义绑定内置视图（用户视图）到查看器。通过将内置视图与链路服务、应用、日志源、项目、或其他自定义字段进行关联绑定，匹配字段值的查看器，可通过侧滑详情页查看新增被绑定的内置视图。

**注意**：支持自定义绑定内置视图的查看器包括场景自定义查看器、基础设施、日志、链路、服务、用户访问、安全巡检、可用性监测。


## 开始绑定 {#bind}

进入**内置视图 > 用户视图 > 绑定**：

1、创建绑定关系

您可以基于链路服务(`service`)、应用(`app_id`)、日志源(`source`)、项目(`project`)、标签(`label`) 或自定义输入空间内的 `key`、`value` 进行内置视图与查看器绑定；支持 `value` 的模糊匹配。

<img src="../../img/4.view_7.png" width="60%" >

**注意**：为保证数据的一致性，创建用户视图与查看器的绑定关系时，需**至少添加指定对象分类下的一个字段作为该内置视图的绑定关系**，系统会依据这个绑定关系自动同步内置视图。

2、在查看器详情查看绑定的内置视图

完成绑定关系的配置后，您可以前往匹配绑定字段值的查看器侧滑详情页面查看该内置视图。

![](../img/4.view_8.png)


3、删除查看器详情已绑定的内置视图

如若您需要删除查看器详情中已绑定的内置视图，清除**绑定**中的字段内容，点击**确定**即可。

<img src="../../img/4.view_4.png" width="60%" >


## 字段说明

在内置视图绑定字段时，除下列**固定字段**数据范围以外，还支持用户**自定义输入空间内已有的字段(`key`)、字段值(`value`)** 生成绑定关系。

| **字段名** | **数据范围** | **适配范围** | **数值范围** |
| --- | --- | --- | --- |
| `service`<br /> | 当前工作空间 Tracing 数据中的 `service` 值 | <li>场景 > 自定义查看器<br /><li>基础设施 > 所有查看器<br /><li>日志查看器<br /><li>链路查看器<br /><li>RUM > Session、View<br />安全巡检查看器<br /><li>可用性查看器 | `*`：表示匹配全部服务<br />`value`：表示仅匹配对应的服务，支持单值匹配、多值匹配、模糊匹配等多种方式 |
| `app_id`<br /> | 当前工作空间 View 数据中的 `app_id` 值 | <li>场景 > 自定义查看器<br /><li>基础设施 > 所有查看器<br /><li>日志查看器<br /><li>链路查看器<br /><li>RUM > Session、View<br />安全巡检查看器<br /><li>可用性查看器 | `*`：表示匹配全部应用<br />`value`：表示仅匹配对应的应用，支持单值匹配、多值匹配、模糊匹配等多种方式 |
| `source`<br />| 当前工作空间 Logging 数据中的 `source` 值 | <li>场景 > 自定义查看器<br /><li>基础设施 > 所有查看器<br /><li>日志查看器<br /><li>链路查看器<br /><li>安全巡检查看器<br /><li>可用性查看器 | `*`：表示匹配全部日志源<br />`value`：表示仅匹配对应的日志源，支持单值匹配、多值匹配、模糊匹配等多种方式 |
| `project`<br /> | 当前工作空间的 Object 数据中的 `project` 值 | <li>场景 > 自定义查看器<br /><li>基础设施 > 所有查看器<br /><li>日志查看器<br /><li>链路查看器<br /><li>RUM > Session、View<br />安全巡检查看器<br /><li>可用性查看器 | `*`：表示匹配全部项目<br />`value`：表示仅匹配对应的项目，支持单值匹配、多值匹配、模糊匹配等多种方式 |
| `label` | 当前工作空间的 Object 数据中的 `label` 值 | 基础设施 > 所有查看器 | `*`：表示匹配全部项目<br />`value`：表示仅匹配对应的 label，支持单值匹配、多值匹配、模糊匹配等多种方式 |

???+ abstract "绑定字段后在查看器详情页的显示逻辑说明："

    1）绑定字段的 `value` 值支持 4 种模式： `*`、单值、多值、模糊匹配。

    - 若 `value` 值选择 `*`，如配置 `service:*`，所有列表里面存在 `service` 字段的查看器详情页会绑定该内置视图；
    - 若 `value` 值选择“单值”，如配置 `service:value1`，所有列表里面存在 `service=value1` 的查看器详情页会绑定该内置视图；
    - 若 `value` 值选择“多值”，如配置 `service:value1,value2`，所有列表数据中存在 `service=value1` 或者 `service=value2` 的查看器详情页会绑定该内置视图；若存在多个 `key:value`，如配置 `Service:value1`，`source:value2`，所有列表数据中存在 `service=value1` 或者 `source=value2` 的查看器详情页会绑定该内置视图；
    - 若 `value` 值选择 `wildcard` 模糊匹配，则显示 `*Service:`，如配置 `*service:*sql`：所有列表里面存在 `service` 以 `sql` 结尾的字段（例如：`service=mysql`; `service=pymysql`）的查看器详情页会绑定该内置视图。

    2）绑定字段显示顺序：`service` > `app_id` > `source` > `project` > `label`，相同字段的顺序不做特殊处理。

    - 若 `service = ${value}`、`source = ${value}`、`project = ${value}` 匹配到同一个内置视图，则在查看器详情页只显示这个内置视图；
    - 若 `service = ${value}`、`source = ${value}`、`project = ${value}` 匹配到不同的内置视图，则在查看器详情页按照 `service` > `source` > `project` 顺序显示对应的内置视图。

    3）在查看器详情页绑定的内置视图，默认显示的时间范围是“最近 15 分钟”，且会获取当前数据记录的时间在图中标注显示。

<!--
## <u>示例说明（固定字段）</u>

下面以绑定**用户视图 > CPU 监控视图**到匹配全部项目的查看器为例。

### 1、创建绑定关系

在观测云工作空间**场景 > 内置视图 > 用户视图**，在设置下选择**绑定**，可以看到上面表格中列出的几个字段名，具体介绍可参考上面的表格。

![](../img/4.view_4.png)

在**绑定**中选择 `project:*`，点击**确定**。

![](../img/4.view_5.png)

### 2、在查看器详情查看绑定的内置视图

1）在基础设施主机详情页查看绑定的内置视图，前提条件该主机具有 “project（项目）”的标签。

![](../img/4.view_bang_4.png)

2）在日志查看器详情页查看绑定的内置视图，前提条件该主机具有 “project（项目）”的标签。

![](../img/4.view_bang_5.png)


---


## <u>示例说明（自定义 Key、Value）</u>

下面以绑定**用户视图 > Network 监控视图**到主机名为 `guance.local` 的主机查看器详情页为例：

### 1、创建绑定关系

在观测云工作空间**场景 > 内置视图 > 用户视图**，在设置下选择**绑定**，即能够以 `host:guance.local` 为绑定字段创建当前内置视图与 `host` 为 `guance.local` 的关联关系。

**注意**：选择绑定字段（自定义 Key、Value）时，您需要确保该字段能够在当前工作空间内与支持配置内置视图的查看器对象进行准确匹配。如 Key、Value 输入的值工作空间没有，则无法匹配查看器。

![](../img/4.view_10.png)


### 2、在查看器详情查看绑定的内置视图

当前绑定关系为 `host:guance.local`，您可以前往匹配 `host:guance.local` 字段的自定义查看器、基础设施、日志、链路、服务、用户访问、安全巡检、可用性查看器，查看详情页绑定成功的 “Network 监控视图”。

下图以 `host:guance.local` 的主机查看器详情为例：  

![](../img/4.view_11.png)

-->