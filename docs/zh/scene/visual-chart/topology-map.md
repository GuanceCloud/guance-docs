# 拓扑图

为了增强仪表板的可视化效果，观测云根据现有的服务拓扑以及资源调用图进行组件化。可用于展示不同事物之间的关系和相对位置。



## 图表查询

### 服务关系图

<img src="../../img/resource-chart.png" width="70%" >

1. 服务名：可选择所有相关的视图变量或具体的值；
2. 颜色填充：包含请求数、P50 响应时间、P75 响应时间、P99 响应时间和错误率；
3. 筛选：可选 `env`、`version`、`project`、`source_type` 四种字段。

点击服务图标，即可查看当前服务的上下游关联、服务概览、日志等信息。

<img src="../../img/chart-relate.png" width="70%" >

> 此处同样支持 [Service Map 跨工作空间查询](../../application-performance-monitoring/service-manag/service-map.md##servicemap)。



### 资源关系图

<img src="../../img/service-chart.png" width="70%" >

1. 服务名：可选择所有相关的视图变量或具体的值；
2. 资源名：可选择所有相关的视图变量或具体的值；
3. 颜色填充：包含 P99 响应时间、请求错误率、事件状态；
4. 筛选：可选 `env`、`version` 两种字段。

**注意**：资源关系图仅支持针对单个资源进行绘制。因此，当**资源名**选择了单个值，此时服务名也需为单个值。若服务名选择了某个视图变量且该变量包含多个值，此时图表会报错。

点击资源图标，即可查看当前资源相关的日志、用户访问、事件等信息。

<img src="../../img/chart-relate-1.png" width="70%" >


### 外部数据查询

通过外部数据查询的方式，只需按照系统规定的数据结构上报数据，您就可以使用任意数据来绘制拓扑图，并通过本地 Function 函数实现最终图表的生成与展示。

<img src="../../img/chart-relate-2.png" width="70%" >

> 关于如何通过函数处理数据，可查看 [Func 函数详细使用说明与示例](../../studio-backend/tracing-service-map.md)。
> 
> 关于对接数据所需的拓扑图数据结构，可查看 [相关接口响应数据说明](../../studio-backend/tracing-service-map.md)。


## 图表配置

> 更多详情，可参考 [图表配置](./chart-config.md)。

<!--


## 图表链接 {#link}

链接可以帮助实现从当前图表跳转至目标页面。您可以添加平台内部链接或外部链接，能通过模板变量修改链接中对应的变量值将数据信息传送过去，实现数据联动。

> 更多相关设置说明，可参考 [图表链接](chart-link.md)。

### 标题

1. 标题：为图表设置标题名称，设置完成后，在图表的左上方显示，支持隐藏。
2. 描述：为图表添加描述信息，设置后图表标题后方会出现【i】的提示，不设置则不显示。 

### 颜色

1. 渐变区间

- 自动：
 
    - 可选择包含从 2～100 的等级数量，系统默认为 60；
    - 包含 4 种渐变色系；
    - 支持自定义最大值和最小值，如不设置，自动获取返回数据的最大最小值计算。

- 自定义：可选择包含从 2～5 的等级数量，系统默认为 5。


### [图例](./timeseries-chart.md#legend)

1. 添加别名，图例的名称也会随之变化；
2. 选择图例位置，包含直接隐藏或置于图表底部。

### 时间

锁定时间：即固定当前图表查询数据的时间范围，不受仪表板或其他全局时间组件的限制。设置成功后，当前图表直接展示您设定的时间，如【xx分钟】、【xx小时】、【xx天】。

-->