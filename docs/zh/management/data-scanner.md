# 敏感数据扫描

在使用观测云产品的过程中，会不可避免地产生如网络设备地址、Token、API 密钥、个人隐私等诸多敏感数据。为避免信息泄露，造成安全风险，观测云提供敏感数据扫描的功能，通过为数据创建脱敏规则的方式，实现自定义信息屏蔽。

## 新建脱敏规则

进入**管理 > 敏感数据扫描**，可选择自定义[**新建规则**](#custom)，或直接从[**内置规则库**](#official)创建。

![](img/scan-3.png)

### 自定义新建 {#custom}

![](img/scan.png)

1、扫描范围：

| 字段 | 描述    |
| ---------- | ------------- |
| 数据类型 | 即需要扫描的数据类型；默认选中【日志】。    |
| 数据过滤 | 即需要扫描的数据范围。    |


2、定义匹配规则：

| 字段 | 描述    |
| ---------- | ------------- |
| 规则名称 | 即当前数据规则的名称。    |
| 正则表达式 | 用于匹配需要加密的数据字符串。    |
| 数据测试 | 输入一串数据，点击测试，即可验证是否与正则表达式相匹配。<br />:warning:测试数据不会保存。    |

3、敏感数据处理：

- 脱敏字段：支持全部字段、指定字段和排除字段三种选项；默认选中【指定字段】；
- 脱敏方式： 
 
    :material-numeric-1-circle: 通用加密：以 * 替换所有匹配的敏感数据；  

    :material-numeric-2-circle: 部分加密：以 * 替换敏感数据中的部分字符串，可以保留部分敏感信息，例如：手机号 *******1005；  

    :material-numeric-3-circle: 替换加密：以指定的字符串替换所有匹配的敏感数据，替换后不可逆；

    :material-numeric-4-circle: MD5 加密：对任意数据都可以加密成固定长度字符串，替换后不可逆。

??? abstract "MD5 加密的特点"

    - 长度固定：不管多长的字符串，加密后长度相同，即 32 位；
    - 高度离散：对原数据进行任何改动，即便是微小变化，也会导致运算结果差异巨大；
    - 运算不可逆：已知运算结果的情况下，无法通过逆运算得到原始字符串，但仍能进行筛选定位。

- 添加标签：您可以为脱敏后的数据添加自定义标签；多个标签之间用【,】分隔。

### 官方规则库 {#official}

![](img/scan-1.png)

在**新建规则 > 官方规则库**页面，左侧为所有监控模版类型，右侧为模板类型下的所有检测规则。您可进行以下操作：

- 在左侧检测库，勾选特定规则库可进行对应筛选；
- 多选检测规则，您可批量创建多个数据规则。

当您选中一个或多个检测规则，点击创建；

在创建页面，**定义匹配规则**自动收起，您可以在此处再次按需选择官方规则。

![](img/scan-2.gif)

创建成功后，可在规则列表查看创建的所有规则。

## 脱敏规则列表

1. 查询：在 🔍栏 基于监控器名称进行搜索。
2. 点击 :fontawesome-regular-trash-can: 可删除当前规则。
3. 点击编辑按钮可修改当前规则。
4. 支持启用或禁用当前规则。
5. 批量操作：点击规则名称旁的 :fontawesome-regular-square: 符号可选择批量禁用、启用、删除已选中的规则。

![](img/scan-4.png)