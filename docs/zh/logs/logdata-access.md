# 数据访问
---

## 简介

为使当前工作空间内不同[成员角色](../management/role-list.md)数据查询范围更精细，观测云支持在**数据访问**页面为不同角色配置对应的日志数据访问查询范围。      

为保证日志数据访问链路的完整性，数据查询权限范围包含：<br/>
- L：日志数据查询<br/>
- T：链路数据查询<br/>
- P：Profile 数据查询<br/>
- O: 基础设施数据查询<br/>
- OH：基础设施历史数据查询<br/>
- CO：自定义对象数据查询<br/>
- COH：自定义对象历史数据查询<br/>
- N：网络数据查询<br/>
- M：指标数据查询<br/>
- R：用户访问数据查询<br/>
- S：安全巡检数据查询<br/>
- E：事件数据查询<br/>
- UE：未恢复事件数据查询<br/>
> **注意**：系统[默认角色](../management/role-management.md#自定义角色-customized-roles)与[自建角色](../management/role-management.md#默认角色-default-roles)默认拥有以上权限。


## 配置规则    

在**日志 > 数据访问**页面，点击**新建规则**。在弹出的新建页面中，选择**索引**，设置**筛选**条件，并决定**授权**的角色对象。有关索引更多相关操作，可参考文档[日志索引](../logs/multi-index.md).<br/>
- 索引：多选；当前工作空间内日志索引，包含日志默认索引、自定义索引、绑定的外部索引；       
- 筛选：支持通过 `标签/属性` 进行值的筛选，包括正向筛选、反向筛选、模糊匹配、反向模糊匹配、存在和不存在等多种筛选方式；     
- 授权给：多选；包含系统内默认角色及自建角色。       

### <u>示例</u>

1. 在**日志 > 索引**页面，新建名为`tcp_dial_testing`的索引，筛选过滤条件`source` 为 `tcp_dial_testing` 的日志数据，并设置数据存储天数为7天。     

![](img/logdata_5.png)

2. 回到**数据访问**页面，点击**新建规则**，选择索引`tcp_dial_testing`，设置筛选条件`status`为`OK`，并选择拥有该日志数据查询的角色。

![](img/logdata_4.png)

3. 创建完成后，即可查看该索引下数据访问权限关联的角色数量以及角色下对应的成员数量。

![](img/logdata_6.png)


???+ attention  

    - 基于**用户角色存在日志数据查询权限**的基础，日志数据访问的规则才能生效；
    - 角色匹配规则后，您只能在规则配置的基础范围内继续添加筛选，若超出此范围查询，则返回数据为空。



## 其他操作

- 规则配置完成后，可查看该条规则关联的**角色**数量与角色对应**成员**数量。
  
![](img/logdata_2.png)

- 在**操作**栏，点击规则右侧**编辑**图标，可修改规则下的索引、筛选条件及授权角色等设置。

![](img/logdata_1.png)

- 在**操作**栏，点击规则右侧**删除**图标，点击确认，即可删除该条规则。
  
![](img/logdata_3.png)

