# 指标管理
---


完成指标数据采集后，您可以在**工作空间 > 指标管理**中查看所有上报的指标集，以及相关的指标、标签、时间线数量和数据存储策略等信息。

## 指标集

指标集是指同一类型指标的集合，一个指标集可以包含多个指标和标签。点击指标集，您可以在详情页查看该指标集下所有可用的[指标](#metrics)和[标签](#labels)，并可通过模糊搜索快速定位所需内容。

![](img/11.metrics_3.png)



### 指标 {#metrics}

指标能够帮助您快速了解系统的整体运行状况，例如服务器 CPU 使用率、网站加载时间、剩余磁盘空间等。

指标由为**指标名**和**指标值**两部分组成，其中指标名是该指标的别称，指标值则是采集时的具体数值。在工作空间 > 指标管理中，点击指标集名称即可查看对应的指标列表，包括指标名、字段类型、单位等详细信息。

- 通过 :octicons-search-24:，基于关键字搜索相关的指标；  
- 通过 :material-export-variant:，导出指标列表为 CSV 文件至本地。
- 点击操作下的图标，一键进行指标分析；
- 点击展开指标数据，可对指标配置进行编辑。

<img src="../img/1.metrics_2.png" width="70%" >

#### 编辑指标

在**指标管理**中，您可以查看所有上报到<<< custom_key.brand_name >>>的指标，包括指标名称、字段类型、单位以及描述，并对指标的**单位**和**描述**进行自定义编辑，保存后即可在图表查询中应用。

![](img/1.metrics_3.png)

???+ warning "权限与优先级"

    - 指标详情仅允许标准成员及以上权限可编辑；  
    - 在**指标管理**自定义添加的**单位**和**描述**优先级大于默认采集的数据，如**单位**从 `B` 改成 `GB`，在场景进行图表查询时，图表上的单位会转换成 `GB` 进行数据展示。

#### 应用场景

在进行指标查询的时候，您可以通过查看指标的名称、字段类型、单位以及描述，更方便地进行数据查询与分析。如在场景中进行图表查询、在监控器中进行指标检测时，您可以实时查看指标的详细信息。

<img src="../img/11.metrics_6.png" width="70%" >

### 标签 {#labels}

标签能够帮助您关联不同来源的数据，{{ custom_key.brand_name }}支持将所有指标、日志和链路数据统一上报到工作空间。通过为采集的数据打上相同的标签，您可以进行关联分析，从而快速发现并解决潜在风险。

标签是用于标识数据点采集对象属性的集合，由**标签名**和**标签值**组成，一个数据点可以拥有多个标签。在工作空间 > 指标管理中，点击指标集名称即可查看对应的标签列表，包括标签名、标签值统计数量以及描述等详细信息。

- 点击 :octicons-search-24:，基于关键字搜索相关的标签； 
- 点击 :material-export-variant:，导出标签列表为 CSV 文件至本地；

<img src="../img/1.tag_1.png" width="70%" >

#### 应用场景

在进行指标查询时，您可以通过查看标签描述快速理解其含义。例如，在进行图表查询或监控器中的指标检测时，您可以实时查看标签的描述信息。<<< custom_key.brand_name >>>默认提供系统字段/标签说明，您也可以在[字段管理](../management/field-management.md)中根据需要替换这些说明。

<img src="../img/11.metrics_7.png" width="70%" >

## 时间线

在当前工作空间中，基于标签可以组合而成的指标数据组合数量是动态计算的。在<<< custom_key.brand_name >>>，时间线由指标、标签（字段）以及数据存储时长共同构成。其中，“指标”与“标签（字段）的组合”是数据存储的主键。


| 名词      | 描述                          |
| ----------- | ------------------------------------ |
| Database       | 数据库。  |
| Measurement      | 即指标集，可以理解为 mysql 里的 table。 |
| Field    | 即指标，InfluxDB 中记录真实数据的键值对 (在 Influxdb 中是必须的，不会被索引)。|
| Field Set      | Field 键值对的集合。                          |
| Field Key      | 组成 Field 键值对里的键。                          |
| Field Value      | 组成 Field 键值对里的值 (真正的数据)。                          |
| Tag      | 即标签，用来描述 Field 的键值对 (在 Influxdb 中是可选的，会被索引)。                          |
| Tag Set      | Tag 键值对的集合。                          |
| Tag Key      | 组成 Tag 键值对里的键。                          |
| Tag Value      | 组成 Tag 键值对里的值。                          |
| TimeStamp      | 数据点关联的日期和时间。                          |
| Retention Policy      | 数据存储时间 (数据保存策略)。                          |
| Series      | 时间线由 Retention Policy、Measurement、Tag Set 三部分组成。                          |

## 指标存储策略 {#storage}

指标存储策略分成两种：

- 针对指标工作空间级别的全局设置；
- 针对指标集的自定义设置。

### 修改策略

指标集的自定义设置优先级高于指标的全局设置。即，指标集自定义设置数据存储策略后，更改指标的全局设置，不影响该指标集的数据存储策略。

**注意**：

- 在指标管理中修改指标集数据保存策略后，工作空间全局策略中保存的对应指标集数据将被删除且无法恢复，请谨慎操作。若再次修改指标集数据保存策略，之前策略下的指标集数据也会被删除。
- 修改指标集数据保存策略后，该指标集数据将单独存储。此时，修改工作空间指标的全局数据存储策略时长，不会更改该指标集的存储策略时长。
- 修改指标集数据保存策略后，若将其改回全局默认的指标数据存储策略时长，该指标集将被重新存入全局数据库。此时，再次修改工作空间指标的全局数据存储策略时长，会同步更改该指标集的存储策略时长。
- 修改指标集数据保存策略后，如果将工作空间指标的全局数据存储策略时长与指标集的存储策略时长设置为一致，该指标集数据仍将单独保存，不会存入全局数据库。


#### 全局设置指标

在**管理 > 设置 > 危险操作**，可查看指标工作空间的全局数据存储策略，默认指标数据为 7 天，包括 3 天、7 天、14 天、30 天、180 天和 360 天。

> 更多详情，可参考 [数据存储策略](../billing-method/data-storage.md)。

<img src="../img/2.data_storage_3.png" width="70%" >


#### 自定义设置指标集

在指标管理中，您可以查看并自定义设置指标集的数据存储策略。


点击操作栏中的 :octicons-gear-24: 按钮，即可自定义指标集的数据保存策略，可选时长包括：3 天、7 天、14 天、30 天、180 天和 360 天。若未进行自定义设置，则默认与指标全局数据保存策略保持一致。

![](img/19.metrics_6.png)

**注意**：

- 指标集存储策略仅支持由工作空间拥有者配置，且体验版不支持自定义数据保存策略；
- 修改指标集数据保存策略时长后，之前策略下的指标集数据也会被删除，且不能恢复。



???+ abstract "针对部署版"

    工作空间拥有者可为指标集配置数据保存策略，支持自定义输入保存时长，范围为 1~1800 天。

    <img src="../img/deploy-metric.png" width="60%" >