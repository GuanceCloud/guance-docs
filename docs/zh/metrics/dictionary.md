# 指标管理
---


完成指标数据采集后，在{{{ custom_key.brand_name }}}工作空间的**指标管理**可以查看所有上报的指标集和相关的指标、标签、时间线数量、数据存储策略等。

## 指标集

指标集是指<u>同一类型指标的集合，一个指标集可以包含多个指标和标签</u>。点击指标集，您可以在详情页查看该指标集下所有可用的指标和标签，支持通过模糊搜索来查询指标集。

![](img/11.metrics_3.png)



### 指标

指标可以帮助您了解系统的整体可用性，比如：服务器 CPU 使用情况，网站的加载耗时、剩余磁盘空间等。

指标分为<u>指标名和指标值</u>两部分，指标名指标识该指标的一个别名，指标值指采集时指标的具体数值。在{{{ custom_key.brand_name }}}工作空间的**指标管理**中，点击**指标集名称**，即可查看对应的指标列表，包括指标名、指标的字段类型、单位等。

- 通过 :octicons-search-24: ，基于关键字搜索相关的指标；  
- 通过 :material-export-variant: ，导出指标列表为 CSV 文件至本地。

<img src="../img/1.metrics_2.png" width="70%" >

#### 编辑指标

在**指标管理**中，您可以查看所有上报到{{{ custom_key.brand_name }}}的指标，包括指标名称、字段类型、单位以及描述，并对指标的**单位**和**描述**进行自定义编辑，保存后即可在图表查询中应用。

![](img/1.metrics_3.png)

???+ warning "权限与优先级"

    - 指标详情仅允许标准成员及以上权限可编辑；  
    - 在**指标管理**自定义添加的**单位**和**描述**优先级大于默认采集的数据，如**单位**从 `B` 改成 `GB`，在场景进行图表查询时，图表上的单位会转换成 `GB` 进行数据展示。

#### 应用场景

在进行指标查询的时候，您可以通过查看指标的名称、字段类型、单位以及描述，更方便地进行数据查询与分析。如在场景中进行图表查询、在监控器中进行指标检测时，您可以实时查看指标的详细信息。

<img src="../img/11.metrics_6.png" width="70%" >

### 标签

标签可以帮助您关联数据，{{{ custom_key.brand_name }}}支持把所有的指标、日志、链路数据统一上报到工作空间，通过对采集的数据打上相同的标签进行关联分析，帮助您快速发现并解决存在的潜在风险。

标签是指标识一个数据点采集对象的属性的集合，标签分为标签名和标签值，一个数据点可以有多个标签。在{{{ custom_key.brand_name }}}工作空间的**指标管理**中，点击**指标集名称**，即可查看对应的标签列表，包括标签名、标签值统计数量、描述等。

- 通过 :octicons-search-24: ，基于关键字搜索相关的标签； 
- 通过 :material-export-variant: ，可以导出标签列表为 CSV 文件至本地。

<img src="../img/1.tag_1.png" width="70%" >

#### 应用场景

在进行指标查询的时候，您可以通过查看标签的描述快速理解标签的含义，如在场景中进行图表查询、在监控器中进行指标检测时，您可以实时查看标签的描述信息。{{{ custom_key.brand_name }}}会默认提供系统字段/标签说明，您可以在 [字段管理](../management/field-management.md) 替换系统字段/标签说明。

<img src="../img/11.metrics_7.png" width="70%" >

## 时间线

当前工作空间，上报的指标数据中基于标签可以组合而成的所有组合数量。在{{{ custom_key.brand_name }}}中时间线是由指标、标签（字段）、数据存储时长组合而成的，“指标”和“标签（字段）的组合”是数据存储的主键。

相关名词解释如下：

| 名词      | 描述                          |
| ----------- | ------------------------------------ |
| Database       | 数据库。  |
| Measurement      | 即指标集，可以理解为 mysql 里的 table。 |
| Field    | 即指标，InfluxDB 中记录真实数据的键值对 (在 Influxdb 中是必须的，不会被索引)。|
| Field Set      | Field 键值对的集合。                          |
| Field Key      | 组成 Field 键值对里的键。                          |
| Field Value      | 组成 Field 键值对里的值 (真正的数据)。                          |
| Tag      | 即标签，用来描述 Field 的键值对 (在 Influxdb 中是可选的，会被索引)。                          |
| Tag Set      | Tag 键值对的集合。                          |
| Tag Key      | 组成 Tag 键值对里的键。                          |
| Tag Value      | 组成 Tag 键值对里的值。                          |
| TimeStamp      | 数据点关联的日期和时间。                          |
| Retention Policy      | 数据存储时间 (数据保存策略)。                          |
| Series      | 时间线由 Retention Policy、Measurement、Tag Set 三部分组成。                          |

## 指标存储策略 {#storage}

指标存储策略分成两种，一种是<u>针对指标工作空间级别的全局设置</u>，另外一种是<u>针对指标集的自定义设置</u>。

???+ warning "修改后的注意事项"

    - 指标集的自定义设置优先级高于指标的全局设置，即指标集自定义设置数据存储策略后，更改指标的全局设置，不影响指标集的数据存储策略；
    - 在指标管理一旦修改指标集数据保存策略，工作空间全局策略中保存的对应指标集数据将会被删除，且不能恢复，请谨慎操作；若在指标管理再次修改指标集数据保存策略，之前策略下的指标集数据也会被删除；
    - 在指标管理修改指标集的数据保存策略后，该指标集数据会单独存储，若在工作空间管理修改指标全局数据存储策略时长，则不会更改该指标集的存储策略时长；
    - 在指标管理修改指标集数据保存策略后，改回全局默认的指标数据存储策略时长，该指标集会被重新存入全局数据库，此时再次修改工作空间指标的全局数据存储策略时长，则同时更改该指标集的存储策略时长；
    - 在指标管理修改指标集数据保存策略后，修改工作空间指标的全局数据存储策略时长和指标集的存储策略时长一致，该指标集数据仍然会单独保存，不会存入全局数据库。

### 指标全局设置

在{{{ custom_key.brand_name }}}工作空间**管理 > 设置 > 危险操作**，可查看指标工作空间的全局数据存储策略，默认指标数据为 7 天，包括 3 天、7 天、14 天、30 天、180 天和 360 天。

> 更多详情，可参考 [数据存储策略](../billing-method/data-storage.md)。

<img src="../img/2.data_storage_3.png" width="70%" >


### 指标集自定义设置

在指标管理，可查看和自定义设置指标集的数据存储策略。

**注意**：指标集存储策略仅拥有者可配置，且体验版不支持指标集自定义数据保存策略。

点击**操作**下的设置按钮可自定义设置指标集的数据保存策略，包括 3 天、7 天、14 天、30 天、180 天和 360 天，默认和指标全局数据保存策略一致。

![](img/19.metrics_6.png)

???+ abstract "针对部署版"

    工作空间拥有者配置指标集的数据保存策略，支持自定义输入保存时长（范围：1~1800）。

    <img src="../img/deploy-metric.png" width="60%" >

修改指标集数据保存策略时长后，之前策略下的指标集数据也会被删除，且不能恢复。

![](img/19.metrics_7.png)

