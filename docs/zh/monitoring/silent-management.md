# 静默管理
---

观测云提供**静默管理**功能，您可以对当前工作空间下不同的监控器、智能巡检、自建巡检、SLO、告警策略的全部静默规则进行管理，设置静默后，静默对象在静默时间内不向任一告警通知对象发送告警通知。静默指的是满足条件的事件不发送告警，但事件依然产生。


## 新建静默规则

![](img/monitor07.png)

1、选择静默范围

- 主要包含四个维度：

<div class="grid" markdown>

=== "基于监控规则"

    选择需要静默的监控规则，包含【监控器】【智能监控】【智能巡检】【SLO】；可多选。选中的监控规则在静默时间内不发送告警通知，但仍然会产生事件。      

=== "基于告警策略"

    关联告警策略的监控规则在静默时间内不发送告警通知，但仍然会产生事件；可多选。           

=== "基于监控器标签"

    选择标签，若监控器属于所选标签则会被静默；可多选。

=== "自定义"

    可以基于任意维度选择要静默的监控器；可多选；<br/>可以选定相关的监控器、智能巡检、自建巡检、SLO、告警策略作为静默对象，点击 :material-arrow-right-top-bold: 即可跳转到详情页查看详情。          

</div>

- 高级筛选：监控规则的检测结果都会记录为事件，所有事件的属性字段都可以做筛选条件对静默范围做进一步过滤。

事件属性可以通过下拉列表提供的字段进行标签筛选；还可以手动输入 `key`、`value` 进行绑定。筛选条件格式如下：`attribute:value`、`attribute:*value*`、`-attribute:value`、`-attribute:*value*`，不同字段组合关系为 AND，相同字段的多个值为 OR。

支持标签筛选条件静默。输入静默范围后，针对**标签**存在以下几种情况：

![](img/logic.png)

*示例：*

假设前提为监控器存在 by host,service 分组。在高级筛选，我们配置 `host:cn-hangzhou AND service:guance` 的筛选条件。若 `host:cn-hangzhou AND service:guance` 和 `host:cn-shanghai AND service:guance` 这两个组合的检测对象同时触发阈值生成了事件，那么仅 `host:cn-hangzhou AND service:guance` 会被静默，`host:cn-shanghai AND service:guance` 仍然发送告警通知。

> 更多示例，可参考 [如何理解静默规则中的事件属性](#faq)。


<!--
???+ abstract "静默范围"

    静默范围必填，标签非必填。只有当同时满足【静默范围】和【标签】的条件时，静默才会生效。举例说明如下：

    假设静默范围选择 【监控器 A】和【智能巡检 B】，标签选择：【host:aaa】和【city:Shanghai】。当同时符合 监控器 A , host:aaa 以及 city:Shanghai 这三个条件时，该通知静默；当同时符合 智能巡检 B, host:aaa 以及 city:Shanghai 这三个条件时，该通知静默。
-->

2、定义静默时间

静默时间即表示，在设定的时间范围内将不发送告警信息。

| 时间设置      | 描述               |
| ----------- | --------------- |
| 仅一次      | 您可以自定义告警静默的时区、开始时间和结束时间，还可以快速设定为1小时/6小时/12小时/1天/1周。               |
| 重复      | 选定静默时间段、周期和到期时间，即可按照您的设置重复静默。               |

    
**注意**：调整[全局时区](../management/index.md#zone)不影响此处设置静默规则的静默时间。

3、配置通知对象

| 通知设置      | 描述               |
| ----------- | --------------- |
| 通知对象      | 每一个静默任务都可以配置相关的[通知对象](notify-object.md)，您可以为静默规则的产生和修改配置一个或多个通知对象；可通过邮件、机器人（企业微信、钉钉、飞书）、Webhook 进行设置。               |
| 通知内容      | 设定通知对象后，您需要自定义相关的通知内容以确保被通知人能够了解静默详情，最多可包含 256 个字符。               |
| 通知时间      | 设定通知对象后，您需要设定触发通知的时间，支持设定立刻、静默开始前 15 分钟、静默开始前 30 分钟、静默开始前 1 小时触发通知行为。               |


## 静默规则列表

在静默规则列表，您可以查看当前工作空间内的全部静默规则，包含其静默范围、状态信息、静默类型、重复频率、静默时间和其他操作。

![](img/monitor08.png)

???- abstract "三种静默状态详解"

    待生效：还未到静默生效时间；

    进行中：正在静默时间范围内，匹配到的事件处于静默状态不会对外发送告警通知；

    已过期：静默时间为过去时间，静默规则已失效。

您可以针对静默规则进行以下操作：

| 操作      | 描述                          |
| ----------- | ------------------------- |
| 搜索      | 支持基于静默范围的关键字搜索相关静默规则。      |
| 编辑      | 支持通过编辑对静默任务进行重新编辑。              |
| 删除      | 支持删除静默任务，被删除的静默范围将会恢复告警状态。                       |
| 禁用/启用      | 支持禁用/启用静默任务：<br/><li>启用：静默规则按照正常流程执行；<br/><li>禁用：静默规则不生效；若有设置静默通知策略，选择的是开始前“xx分钟”且静默通知操作还未执行的情况下，通知不会执行；<br/>:warning: 禁用/启用静默规则都会产生操作审计事件，可前往观测云工作空间**管理 > 操作审计**查看。                          |
| 快捷筛选      | 支持基于状态、是否启用、静默类型、创建人和更新人五种字段进行筛选过滤。                          |


## FAQ {#faq}

:material-chat-question: 如何理解静默规则中的【事件属性】？

当监控器产生异常事件，会发送告警通知。此时，支持**基于事件维度**进行告警静默：

在设置静默规则时，可以配置事件属性，即为当前静默规则设定标签。比如，四台主机 A、B、C、D 均产生异常事件，但若不想接收来自主机 C 的告警通知，则可以在事件属性中填入 `host:C`。此时，当监控器捕捉到异常事件告警，会针对已配置的属性过滤筛选，仅发送主机 A、B、D 的告警通知。


