# 告警聚合通知模板

## 标题

> 您有 {{N}} 条{{等级}}告警通知


## 内容

### 不聚合

> 您有 N 条新的观测云告警
>
> 第 1 / 2 条：
>
> 标题
>
> 内容
>
> <font color=#2F61CC> 前往工作空间查看 </font>
>
> ---
>
> 第 2 / 2 条：
>
> 标题
>
> 内容
>
> <font color=#2F61CC> 前往工作空间查看 </font>


- 前往工作空间查看：即跳转至事件查看器查看当前事件（筛选条件：`df_event_id`）

*示意图：*

<img src="../img/alert-template.png" width="70%" >

### 规则聚合

#### 全部

> 关联事件：123
>
> 聚合周期：2023/11/20 10:00 ~ 2023/11/20 10:05
>
> 关联检测规则：
>
> - {{事件标题}} <font color=#2F61CC> >>查看  </font>

- 查看：跳转至查看器查看当前监控器在聚合周期内产生的所有事件（筛选条件：     `df_monitor_checker_id`）

*示意图：*

<img src="../img/alert-template-1.png" width="70%" >

#### 检测规则 - 监控器

> 检测类型：监控器
>
> 检测规则名称：{{主机}} CPU 超 {{Result}}%
>
> 检测规则 ID：rule_cdbkjcbsdjcb1234445455
>
> 关联事件：123
>
> 聚合周期：2023/11/20 10:00 ~ 2023/11/20 10:05
>
> <font color=#2F61CC> 前往工作空间查看 </font>

- 跳转至查看器查看当前监控器关联事件（筛选条件：`df_monitor_checker_id`）

*示意图：*

<img src="../img/alert-template-2.png" width="70%" >


#### 检测规则 - 智能巡检

> 检测类型：智能巡检
>
> 检测规则名称：{{主机}} CPU 超 {{Result}}%
>
> 检测规则 ID：rule_cdbkjcbsdjcb1234445455
>
> 关联事件：123
>
> 聚合周期：2023/11/20 10:00 ~ 2023/11/20 10:05
>
> <font color=#2F61CC> 前往工作空间查看 </font>


- 跳转至查看器查看当前智能巡检规则关联事件（筛选条件：`df_monitor_checker_id`）

*示意图：*

<img src="../img/alert-template-3.png" width="70%" >

#### 检测规则 - SLO

> 检测类型：SLO
>
> 检测规则名称：{{主机}} CPU 超 {{Result}}%
>
> 检测规则 ID：rule_cdbkjcbsdjcb1234445455
>
> 关联事件：123
>
> 聚合周期：2023/11/20 10:00 ~ 2023/11/20 10:05
>
> <font color=#2F61CC> 前往工作空间查看 </font>


- 跳转至查看器查看当前 SLO 关联事件（筛选条件：`df_monitor_checker_id`）

*示意图：*

<img src="../img/alert-template-3.png" width="70%" >

#### 检测维度

> 检测维度：service:kodo,host:test
>
> 关联事件：123
>
> 聚合周期：2023/11/20 10:00 ~ 2023/11/20 10:05
>
> 关联检测规则：
>
> - {{事件标题}} <font color=#2F61CC> >>查看  </font>

<img src="../img/alert-template-4.png" width="70%" >

#### 标签

> 标签：service:kodo,host:test
>
> 关联事件：123
>
> 聚合周期：2023/11/20 10:00 ~ 2023/11/20 10:05
>
> 关联检测规则：
>
> - {{事件标题}} <font color=#2F61CC> >>查看  </font>

- 跳转至查看器查看当前检测规则关联事件（筛选条件：`df_monitor_checker_id`）

*示意图：*

<img src="../img/alert-template-5.png" width="70%" >

### 智能聚合

#### 标题聚类

> 标题：{{主机}} CPU 超 {{Result}}%
>
> 关联事件：123
>
> 聚合周期：2023/11/20 10:00 ~ 2023/11/20 10:05
>
> 关联检测规则：
>
> - {{事件标题}} <font color=#2F61CC> >>查看  </font>

- 跳转至查看器查看当前检测规则在聚合周期内产生的所有事件（筛选条件：`df_monitor_checker_id`）

*示意图：*

<img src="../img/alert-template-6.png" width="70%" >

#### 内容聚类

> 标题：{{主机}} CPU 超 {{Result}}%
>
> 关联事件：123
>
> 聚合周期：2023/11/20 10:00 ~ 2023/11/20 10:05
>
> 关联检测规则：
>
> - {{事件标题}} <font color=#2F61CC> >>查看  </font>

- 跳转至查看器查看当前检测规则在聚合周期内产生的所有事件（筛选条件：`df_monitor_checker_id`）

*示意图：*

<img src="../img/alert-template-7.png" width="70%" >


### AI 聚合

> 标题：title：描述本次告警的概要信息。

> 处理意见：suggestion: 对当前告警的处理建议。
        
> {xxx相关}告警汇聚："summary": "多台主机出现 CPU 和内存异常，最高异常值为 98% (主机 172.16.200.108)。主机 1
        
> 相关检测规则：df_monitor_checker_ids: 涉及的监控器 (规则 ID)。
        
> {xxx相关}告警汇聚："summary": "多台主机出现 CPU 和内存异常，最高异常值为 98% (主机 172.16.200.108)。主机 1
        
> 相关检测规则：df_monitor_checker_ids: 涉及的监控器 (规则 ID)。

示例：

```
标题：聚合周期内，共有 3 个监控器触发了告警事件，产生了 19 条告警通知。

处理意见：优先处理高频告警主机，主机 172.16.200.101 涉及 CPU 异常、内存异常和通信问题，需要全面检查。检查告警相关性，多个监控器 (规则 ID) 均涉及主机资源 (CPU、内存) 和模块通信，可能是系统性问题。优化监控策略，减少短时间内重复触发的告警，结合时间窗口进行告警降噪处理。

主机相关告警汇聚：多台主机出现 CPU 和内存异常，最高异常值为 98% (主机 172.16.200.108)。主机 172.16.200.101 同时触发 CPU 和内存告警，需重点检查。
        
相关检测规则： title 查看("rul_e68e2d5e620b40c691128a399de3f479")
        
应用相关告警汇聚：多台主机出现 CPU 和内存异常，最高异常值为 98% (主机 172.16.200.108)。主机 172.16.200.101 同时触发 CPU 和内存告警，需重点检查。
        
相关检测规则：title 查看("rul_e68e2d5e620b40c691128a399de3f479")

```

*示意图：*

<img src="../img/alert-template-8.png" width="70%" >