# 告警策略管理
---

## 概述

观测云支持对监控器的检测结果进行告警策略管理，通过发送告警通知邮件或者群消息通知，让您及时了解监测的异常数据情况，发现问题，解决问题。

???+ attention

    - 每个监控器创建时必须选择一个告警策略，默认选中**默认**；   
    - 当某个告警策略被删除时，删除告警策略下的监控器将自动归类到**默认**下。

## 新建告警策略 {#create}

在观测云工作空间**监控 > 告警策略管理**，点击**新建告警策略**即可添加新的告警策略。可以为告警策略配置告警对象和告警沉默。

![](img/monitor2.png)

=== "名称"

    即当前告警策略的名称。

=== "事件通知等级"

    事件通知等级：包括<u>信息、紧急、重要、警告、无数据、恢复、无数据恢复、无数据视为恢复</u>。
    
    > 事件等级详情参考 [事件等级说明](monitor/event-level-description.md) 。

    告警通知对象：告警通知支持选择不同的通知类型，对多个对象发送告警通知。包括<u>空间成员、邮件组、钉钉机器人、企业微信机器人、飞书机器人和 Webhook 自定义</u>。

    | 通知类型      | 说明      |
    | ----------- | ---------------- |
    | 空间成员      | 邮件通知，通过在**管理 > 成员管理**，添加通知对象，可参考此文档中的**告警示例**。      |
    | 成员组      | 邮件通知，一个成员组可添加多个空间成员，通过在**管理 > 成员管理 > 成员组管理**，添加通知对象。      |
    | 邮件组      | 邮件通知，一个邮件组可添加多个成员组，通过在**监控 > [通知对象管理](notify-object.md)**，添加通知对象。      |
    | 钉钉机器人、企业微信机器人、飞书机器人      | 群通知，通过在**监控 > [通知对象管理](notify-object.md)** ，添加通知对象。      |
    | Webhook 自定义      | 用户自行设定，通过在**监控 > [通知对象管理](notify-object.md)** ，添加通知对象。      |
    | 短信      | 短信通知，一个短信组可以添加多个空间成员，通过在**监控 > [通知对象管理](notify-object.md)** ，添加通知对象。观测云免费版无短信通知，其他版本短信通知 0.1 元 / 条，按天计费，没有免费额度。      |

    您可按需选择事件通知等级和告警通知对象，支持<u>不同级别告警到不同的通知对象</u>；  

    ???+ attention

        - 邮件、钉钉、微信、飞书、短信告警通知都是每分钟合并了发送，并不是产生后立刻发送，会存在约一分钟的延迟； 
        - 邮件、钉钉、微信、飞书收到的告警通知包含“观测云跳转链接”，点击可直接跳转到对应的观测云事件详情，时间范围为当前时间的往前 15 分钟，即 `18:45:00` 的事件，点击链接后跳转至事件详情页，时间范围固定为 `4.20 18:30:00 ~ 4.20 18:45:00`。

=== "告警沉默"

    若同一个事件不是非常紧急，但是告警通知频率高，可以通过设置告警沉默的方式减少告警通知频率。

    ???+ attention

        告警沉默后事件会继续产生，但是告警通知不会再发送，产生的事件会存入事件管理。

## 告警策略列表

**告警策略**列表中，保存有当前工作空间内的全部告警策略。您可以查看告警策略名称、关联监控器、告警沉默时间以及相关操作。

![](img/monitor12.png)

| 功能 | 说明 |
| --- | --- |
| 查询 | 告警策略列表支持基于告警策略名称进行搜索与授权。 |
| 批量操作 | 您可以选择批量删除特定告警策略。 |
| 关联监控器 | 展示告警策略下的监控器个数，点击个数可以跳转到监控器查看告警策略下的监控器详情。 |
| 告警配置 | 点击 :material-bell-cog: 可以修改当前告警策略。 |
| 删除 | 当告警策略被删除时，删除告警策略下的监控器将自动归类到**默认**下。<br/>您还可以点击名称旁的 :material-crop-square: ，即可选中特定图表批量删除。 |

## 告警示例

### 1、创建监控器

在**监控**中，新建监控器，点击 **+新建监控器** ，并选择对应检测规则（如：[阈值检测](monitor/threshold-detection.md)），开始配置检测规则。

![](img/monitor10.png)

### 2、配置告警对象

- 添加[告警对象](notify-object.md)

在**管理**，进入**成员管理**，点击**添加成员**，添加成功后，可用于告警通知的对象。

- 配置告警对象

在**监控器**，选择指定告警策略进行**告警配置**，并选择相关通知对象和告警沉默，点击**确定**。

![](img/monitor3.png)

### 3、告警通知

配置完成告警对象后，即可收到告警通知。

![](img/1-alert-1129.png)

???+ attention

    点击通知内容里的**前往观测云查看**，您可以通过观测云 APP 查看异常事件的详情信息。下载观测云 APP 可以帮助您在移动设备上接收事件的告警通知，更多详情可前往 [移动端](../mobile/index.md)。


### 4、告警事件

在**监控器**，点击**查看相关事件**，即可在 **[事件](../events/index.md)** 查看对应的告警事件列表。
