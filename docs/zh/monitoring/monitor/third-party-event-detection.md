# 外部事件检测

外部事件检测用于接收第三方系统产生的异常记录并产生相关事件，通过检测规则中标准的 Webhook 地址在观测云生成相应的监控器事件数据和相应的告警策略及可视化仪表板。

## 应用场景

将第三方系统产生的异常事件或记录通过指定 URL 地址，以 POST 请求方式发送到 HTTP 服务器后生成观测云的事件数据。

## 新建

点击**监控器 > 新建监控器 > 外部事件检测**，进入规则的配置页面。

![](../img/third-party.png)

### 步骤一：默认配置

1）**监控器名称**：支持自定义名称

2）**Webhook 地址**：默认进入创建页面时生成 Webhook 地址，支持自定义追加参数标记地址用途。

外部事件数据由第三方系统主动向观测云中心上报，并提供必要的事件数据。只有检测并匹配到对应字段才能生成事件产生异常记录后进行告警。

必需字段可参见下图示例：必须包含 `event` 下的五大字段才能与观测云侧匹配成功；`extra_data` 则为自定义添加的字段：

```
{
    "event": {
        "status": "warning",
        "title": "外部事件监控器测试1",
        "message": "你好，这是外部事件监控器的message",
        "dimension_tags": {"heros": "caiwenji"},
        "check_data": 20
    },
    "extraData": {
        "name": "xxxxxxxx"
    }
}
```

### 步骤二：通知 & 异常追踪

1）**关联异常追踪**：开启关联后，若该监控器下产生了异常事件，将同步创建 Issue。选择 Issue 的等级以及需要投递的目标频道，产生的 Issue 可以前往[异常追踪](../../exception/index.md) > 您选定的[频道](../../exception/channel.md)进行查看。

在事件恢复后，可以同步关闭 Issue。

![](../img/issue-create.png)


2）**告警策略**：所有当前监控器的 Webhook 接收到的事件数据都将应用此告警策略配置。监控满足触发条件后，立即发送告警消息给指定的通知对象。[告警策略](../alert-setting.md)中包含需要通知的事件等级、通知对象、以及告警沉默周期。

### 步骤三：关联

**关联仪表板**：每一个监控器都支持关联一个仪表板，可快速跳转查看。
