# 监控器
---

## 概述

在观测云，您可以使用开箱即用的监控[模板](../monitor/template.md)来[新建监控器](#template)；您也可以[自定义新建](#rules)监控器，通过阈值检测、日志检测、突变检测、区间检测等十余种[检测规则](#detect)来设置检测规则和触发条件。开启监控器后，即可接收到由检测规则触发的相关异常事件告警。

工作空间的全部监控器可通过观测云平台的**监控**进行查看和管理。创建完监控器后，您可以对现有告警策略、监控器进行管理、删除、批量操作等。

## 新建监控器 {#new}

观测云支持您从主机、Docker、Elasticsearch 等监控模板快速创建监控器，或自定义新的监控器和触发条件并配置告警。

### 从模板新建 {#template}

观测云内置多种开箱即用的监控[模板](../monitor/template.md)，支持一键创建主机、Docker、Elasticsearch、Redis、阿里云 RDS、阿里云 SLB、Flink 监控等。即自动添加对应的官方监控器至当前工作空间。

???+ attention

    反复从模板创建监控器会导致监控器列表内出现重复的监控器，观测云支持检测重复的监控器，您可以通过在弹窗提示中选择“是”正常创建模板库中所有的监控器，或选择“否”仅创建不重复的监控器。

    ![](../img/image_8.png)

### 自定义新建 {#rules}

在监控器中，支持通过 **+新建监控器** 添加新的监控器，并自定义触发规则。

![](../img/monitor1.png)

#### 检测规则 {#detect}

|                   <font color=coral size=3>**检测规则**</font>                         |                                                              |                                                              |
| :----------------------------------------------------------: | :----------------------------------------------------------: | :----------------------------------------------------------: |
| [阈值检测](threshold-detection.md){ .md-button .md-button--primary } | [日志检测](log-detection.md){ .md-button .md-button--primary } | [突变检测](mutation-detection.md){ .md-button .md-button--primary } |
| [区间检测](interval-detection.md){ .md-button .md-button--primary } | [离群检测](outlier-detection.md){ .md-button .md-button--primary } | [安全巡检异常检测](security_checker.md){ .md-button .md-button--primary } |
| [应用性能指标检测](application-performance-detection.md){ .md-button .md-button--primary } | [用户访问指标检测](real-user-detection.md){ .md-button .md-button--primary } | [进程异常检测](processes-detection.md){ .md-button .md-button--primary } |
| [基础设施存活检测](infrastructure-detection.md){ .md-button .md-button--primary } | [可用性监测数据检测](usability-detection.md){ .md-button .md-button--primary } | [网络数据检测](network-detection.md){ .md-button .md-button--primary } |

## 恢复监控器 {#recover}

观测云支持查看已有监控器的状态、最后更新时间、创建时间以及创建人，支持通过恢复监控器来查看监控器的历史配置，帮助您快速和团队其他成员沟通协作来更新监控器。

### <u>操作示例</u>

在**监控 > 监控器**，选择编辑已有的监控器，在监控器配置页面，点击右上角的 ![](../img/8.monitor_recover_3.png) 按钮，即可查看监控器的状态、最后更新时间、创建时间以及创建人。

![](../img/8.monitor_recover_1.png)

点击上图中**更新时间**右侧的 :material-text-search: 查看按钮，即可打开新的浏览器窗口查看上一版本的监控器配置；

![](../img/8.monitor_recover_1.1.png)

点击上一版本监控器右上角的**恢复此版本**，在弹出的对话框中，确认恢复，即可恢复到上一版本的监控器配置进行编辑和保存。

![](../img/8.monitor_recover_1.2.png)

## 告警策略管理

告警策略功能支持您在设定监控器时，自定义创建有意义的监测器组合，您可以通过**告警策略**筛选出对应监控器，方便告警策略管理各项监控器。

???+ attention

    - 每个监控器创建时必须选择一个告警策略，默认选中**默认**；
    - 当某个告警策略被删除时，删除告警策略下的监控器将自动归类到**默认**下。

### 新建告警策略

在观测云工作空间**监控 > 告警策略管理**，点击**新建告警策略**即可添加新的告警策略。可以为[告警策略](../alert-setting.md)配置告警对象和告警沉默。

<img src="../img/monitor2.png" width="60%" >

### 配置监视器告警策略

创建告警策略以后，可以为监视器选择告警策略。在观测云工作空间**监控 > 监控器**，点击**新建监控器**，即可在创建监控器时选择告警策略。

## 监控器列表

**监控器**列表中，保存有当前工作空间内的全部监控器。您可以查看监控器名称、告警策略、状态、操作和是否被添加到 SLO 的 SLI 目标列表中。被添加至 SLO 作为 SLI 的监控器将以特殊标识展示。

![](../img/monitor3.png)

### 查询

监控器列表支持基于监控器名称、告警策略名称进行搜索。

- 在搜索框 🔍，支持监控器名称、告警策略名称搜索；      
- 在**告警策略**，支持基于指定告警策略筛选出对应监控器。

### 批量操作

点击**监控器名称**旁的 :material-crop-square: ，即可选中特定图表**批量删除**、**批量导出**。

![](../img/monitor4.png)

### 导入 {#management}

在**监控器**中支持**导入**，即通过导入监控器配置 JSON 文件的方式创建监控器。导入的 JSON 文件将直接导入为监控器，并默认分组。

<font color=coral>**注意：**</font>导入的 JSON 文件需要是来自观测云的配置 JSON 文件。

## 操作说明

| **操作** | **说明** |
| --- | --- |
| 状态 | 当前监控器的状态包含 已启用/禁用 两种状态，可以通过操作栏来启用或禁用监控器。 |
| 启动/禁用 | 观测云支持启用/禁用已有的监控器。新建的监控器将默认启动，您可以**禁用**监控器，或重新**启动**被禁用的监控器。<br>:warning: **禁用**的监控器将不再生效；被禁用的监控器可以通过**启动**重新开启。 |
| 测试 | 观测云支持手动触发监控器检测。若当前检测规则触发，你可以在事件查看器查看相关详情。<br>:warning: 为了方便进行监控器的测试，手工触发的事件不受到**告警沉默**影响（即只要是手工触发，一定会发送告警通知）。<br>**静默规则**不受影响，被指定为静默的对象依然会被跳过。 |
| 编辑 | 观测云支持对已有的监控器进行重新编辑，通过点击监控器名称或**编辑**即可对监控器的触发条件进行重新编辑。 |
| 删除 | 观测云支持对已有的监控器进行**删除**。当不需要某个监控器时，可以通过**删除**按钮删除对应监控器。<br>:warning: 一旦删除监控器，将无法恢复监控器数据，事件数据仍做保留。 |
| 查看相关事件 | 由同一监控器触发的告警事件统一存储在对应**监控器**下，通过**查看相关事件**，可直接跳转由该规则触发的全部未恢复事件来进行[事件管理](../../events/index.md)。 |
| 查看相关视图（关联仪表板） | 每一个监控器都支持关联一个仪表板，编辑监控器，即可通过**关联仪表板**功能关联对应所需的仪表板。 |
