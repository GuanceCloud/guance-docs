# 创建 Issue
---


**Issue** 作为**异常追踪**这一功能的最终落地单元，承担了整合当前工作空间中的异常问题来源、描述、相关成员等信息的角色。观测云将任何成员观测到的现象定义成一个 Issue，并通知相关成员来追踪处理。本文将介绍 <u>Issue 主要创建入口及相关操作</u>。

## 概念先解 {#concepts}

| 字段 | 说明 |
| --- | --- |
| 投递频道 | 默认投递到 “全部”，支持自定义添加其他频道。 |
| 标题 | 即 Issue 标题。 |
| 描述 | 详细描述当前 Issue 的现象，支持在文本框中 `@成员` 发送通知或添加 `#频道` 将当前 Issue 投递到对应频道。 |
| 等级 | 可选择默认等级配置，其中等级的紧急程度依次为：P0 > P1 > P2；支持手动修改；<br/>也可以选择[自定义等级](#level)。 |
| 来源 | 包含以下几种来源：仪表板、未恢复事件、事件、查看器、监控器。 |
| 负责人 | 新建 Issue 时指定负责人后，观测云会为负责人发送邮件通知。<br/>您可选择当前工作空间的**成员或团队**为负责人；还可按需直接手动输入**外部邮箱**回车添加。 |
| 附件 | 支持在 Issue 详情页追加上传图片、视频、文本（CSV/TXT/JSON/PDF等）；<br/>支持配置关联链接。 |

## 新建 Issue

Issue 的创建支持两种方式：手动创建、自动创建。

### 手动创建 {#manual}

观测云支持您在<u>异常追踪</u>或在<u>查看器及视图级别的功能模块</u>根据<u>图标</u>快速手动创建 Issue。

#### 异常追踪
    
进入**异常追踪**，点击**新建 Issue**。

<img src="../img/creat-issue-1.png" width="60%" >

#### 仪表板 {#dashboards}

进入**场景 > 仪表板 > 设置**，点击**新建 Issue**；
<!--
![](img/exception-issue-1.png)
-->
自动显示当前仪表板的名称为该条 Issue 来源名称。点击**来源**可自动跳转至对应仪表板，若仪表板不存在，则跳转至**场景**默认页面。

![](img/issue-cpu.png)

#### 查看器 

进入观测云工作空间，可以在<u>各大查看器级别的功能模块页面</u>点击右下角按钮 ![](img/buttom.png) 新建 Issue；

比如，在**日志 > 查看器**，点击右下角**创建 Issue** 图标，即可进入新建页面。
 
![](img/exception-issue-2.png)

Hover 即可显示该条 Issue 来源。点可自动跳转至对应查看器。观测云会按照 Issue 创建时查看器保存的时间范围和筛选搜索条件做过滤显示。

<img src="../img/issue-scheck.png" width="50%" >

您还可以点击进入**查看器**下某条日志的详情页，点击右下角按钮后新建 Issue。会自动显示当前查看器详情页为该条 Issue 来源。点击**来源**可自动跳转至对应查看器详情页，若该条数据已不存在，则跳转至**查看器**默认显示状态。

![](img/issue-detail.png)

#### 事件 {#event}

入口 1：鼠标 hover 某一事件列表，即可点击进入左侧出现的 **Issue**；

![](img/exception-issue-4.png)

自动显示该条事件标题为该条 Issue 来源名称。点击**来源**可自动跳转至对应事件详情页，若该条事件已不存在，则跳转至**事件**默认进入显示页面。

![](img/issue-event-1.png)
 
入口 2：点击进入某一事件的详情页，可在右上角点击**新建 Issue**。自动显示该条事件标题为该条 Issue 来源名称。点击**来源**可自动跳转至对应事件详情页，若该条事件已不存在，则跳转至**事件**默认进入显示页面。

![](img/exception-issue-5.png)


<!--
![](img/issue-event-2.png)
-->
若某个异常追踪 Issue 存在由监控器同步创建关联的事件信息，该条 Issue 会直接在列表显示所关联的事件数量。点击即可直接跳转到事件查看器查看所有的相关事件。

**注意**：无论是直接触发异常追踪或在 Issue 的评论中追加，均包含在此处的关联事件数量统计中。

![](img/issue-event-1116.png)

### 自动创建 {#others}

当您在配置**监控器**时，可选择关联**频道**。当监控器产生异常事件告警，则会自动创建 Issue。以[配置阈值检测](../monitoring/monitor/threshold-detection.md#steps)为例:

1、由事件触发创建的 Issue，状态默认 Open、等级默认未知；

2、来源为当前监控器；

3、输入事件标题，默认为 Issue 标题；

4、输入事件内容，默认为 Issue 描述；

**注意**：

- 如需在事件描述中 `@成员`，您可以在内容框上方点击 `@` 按钮、在内容框内输入 `@` 或直接在下方 `@` 选择下拉框点击选择通知成员。选定后，当事件创建完成，会自动向该成员发送邮箱通知。
- @ 通知成员仅在同步创建的异常追踪问题中生效，正常监控器事件的告警通知列表请参考对应的告警策略配置。


<img src="../img/issue-monitor-1.png" width="80%" >

5、在**事件通知 > 关联异常追踪**，点击启用按钮，按需选择等级、频道及负责人。选定后，当事件创建完成，会将一同自动创建的 Issue 投递到此时您选定的频道显示，并向该 Issue 负责人发送邮件通知。

**注意**：默认频道即为异常追踪里的**全部**频道。

<img src="../img/issue-monitor.png" width="60%" >

6、当监控器的事件通知规则配置完成后，若该监控器下产生了异常事件，将同步创建 Issue 异常追踪，您可以前往**异常追踪 > 您选定的频道**进行查看。


**注意**：若您在当前事件对应的**监控器 > 检测指标**中选定了 by 分组条件，且当前监控器关联的 Issue 状态为 Open 或 Pending，那么后续来自同一来源的产生的多个事件则不会创建新的 Issue，而是追加到已存在的 Issue 的回复下。
        
## <u>示例</u>

1. 在**日志 > 查看器**，筛选 `status:unknown` 的日志数据。点击右下角新建 Issue。

2. 输入该条 Issue 标题为“测试数据”，设置等级为 P2；

3. 在描述中，除输入文本外，艾特相关成员，被艾特通知的成员会在邮箱收到该条 Issue 的通知；还可以在描述中输入形式为 `#异常数据` 的频道进行关联；

4. 选定 Issue 等级；

5. 按需选定该条 Issue 的负责人；负责人会在邮箱收到该条 Issue 的通知；

6. 保存后即可在**异常追踪 > 频道**或已关联的频道进行查看。

![](img/issue-des.png)

## 自定义等级 {#level}

观测云为异常追踪 Issue 配置了 4 种默认等级选项：P0、P1、P2 和未知。除此之外，您可以配置自定义等级，以满足您的多种需求。

**注意**：您最多支持添加 10 个等级。

进入**异常追踪 > 配置管理**，即可开始配置：

![](img/issue-level.png)

点击**添加等级**，选择等级色块、输入等级名称及其描述，即可创建成功。

### 启用 / 禁用默认配置：

- 启用：若默认配置为启用状态，且当前工作空间内有新增的自定义等级，则您在创建或修改异常追踪时可选择默认和自定义等级；

- 禁用：若默认配置为禁用状态，则您在创建/修改异常追踪时仅能选择自定义等级配置。

???+ warning "禁用此选项需要注意三点："

    - 已经存在自定义等级，从而保证在创建/修改 Issue 时有可选择的等级；
    - 在监控器产生了异常事件并同步创建 Issue 异常追踪的情况下，需要将其调整为自定义等级；
    - 若工作空间内仍然存在使用默认等级的 Issue，需要将仍然处于【Open】【Pending】的 Issue 调整为自定义等级。

在配置管理页面，您可进行以下操作：

:material-numeric-1-circle-outline: 编辑：点击编辑按钮，即可修改当前自定义等级的颜色、名称及描述。

:material-numeric-2-circle-outline: 删除：点击即刻删除当前等级。

## Issue 自动发现 {#auto}

若在 APM/RUM 处启用了 **Issue 自动发现**的配置，系统将自动按照配置的检测频率进行错误发现并生成 Issue，生成的 Issue 会投递到配置的频道下，并带上相关标识。

![](img/issue-auto.png)

通过 **Issue 自动发现**创建的异常追踪 Issue 会以组合维度作为唯一的 ID，若历史已经存在了相同组合维度的 Issue，则不会创建一个新的 Issue，而是将内容追加到历史 Issue 回复区域做更新。一般情况下可以通过 “新问题”、“重复问题”、“回归问题” 的特殊标记来识别状态。

![](img/issue-auto-1.png)

- 创建人：显示为 “Issue 自动发现”，标明其自动生成的属性。  
- 组合维度：新增组合维度分组信息，展示在 Issue 卡片页面和详情页。  
- 特殊标记：自动发现的 Issue 一般情况下会存在  “新问题”、“重复问题”、“回归问题” 3 种不同的特殊标记。   
    - 新问题：若历史 Issue 不存在有相同组合维度，则创建 Issue 并在右侧标记“新问题”；  
    - 重复问题：若历史 Issue 已经存在有相同组合维度且状态为 Open 或者 Pending，即问题重复出现，历史 Issue 右侧标记为“重复问题”；
    - 回归问题：若历史 Issue 已经存在有相同组合维度且状态为 Resolved，即问题解决后又重现，历史 Issue 右侧标记为“回归问题”。

![](img/auto-issue-1.png)

![](img/auto-issue-2.png)

     

