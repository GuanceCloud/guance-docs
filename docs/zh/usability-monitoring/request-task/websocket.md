# 创建 WEBSOCKET 拨测任务
---


WEBSOCKET 拨测允许您的客户端向服务端发起 HTTP 请求，建立 WEBSOCKET 连接，以验证定义请求和判断条件，例如请求头、响应时间等。

## 创建任务

在观测云工作空间，点击**新建 > API 拨测**，选择 **WEBSOCKET 协议**。

![](../img/4.dailtesting_websocket_1.png)

您可在左上角为当前拨测任务添加[标签](../../management/global-label.md)，通过全局标签实现当前工作空间的数据联动。已添加的标签保存后可直接在列表内显示。您可以根据左侧**快捷筛选 > 标签**快速查找对应标签下所包含的监控器。


**标签逻辑补充**：

1. 标签值格式不限，可以是 `value` 的格式，例如 `aaa`，或是`key:value`，例如 `test:123`；  

2. 若您自定义的标签 key 与其他事件属性重复，则做丢弃操作（tags 除外）。例如：当设置监控器 by `host`，最终生成的事件属性有 `host:guance_01`。若您为监控器添加了标签 `host:000`，则丢弃自定义标签 `host:000`，不写入到事件属性中。

### 定义请求格式

<img src="../../img/4.dailtesting_websocket_2.png" width="70%" >

1. URL：同时支持 WS / WSS 两种协议的 URL；  
2. 高级设置：根据实际情况进行高级设置，包括请求设置、身份验证；  
3. 内容：输入向客户端发送的信息；  
4. 名称：自定义 WEBSOCKET 拨测任务名称，在当前空间内不支持重名。


### 可用判断

您可添加判断条件，基于筛选条件来最终匹配数据。当选择多个判断条件时，多个判断条件之间可以通过选择“所有”或者“任意”来判断 `AND` 或 `OR` 关系。

<img src="../../img/4.dailtesting_websocket_3.png" width="80%" >

定义好请求格式，且添加完成可用判断条件后，可点击 URL 右侧的**测试**，判断拨测连接配置是否成功。

**注意**：测试与选择的节点无关。

### 选择拨测节点

目前观测云在全球已覆盖 14 个拨测节点。您可选择中国地区、海外地区（仅支持商业版及以上版本用户）的一个或多个节点，快速开启站点的服务质量监测。

<img src="../../img/4.dailtesting_http_4.png" width="80%" >

### 选择拨测频率

选择云拨测的数据返回频率，支持 1 分钟（仅支持商业版及以上版本用户）、5 分钟（仅支持商业版及以上版本用户）、15 分钟（仅支持商业版及以上版本用户）、30 分钟、1 小时、6 小时、12 小时、24 小时等 8 种选择。

<img src="../../img/4.dailtesting_http_5.png" width="70%" >



