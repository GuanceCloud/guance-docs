# 主机
---

## 简介

主机数据采集成功后会主动上报到 “观测云” 控制台。在「基础设施」的「主机」，您可以查看到所采集到的全部主机数据信息。

“观测云” 的主机数据有两种查看和分析模式，通过切换页面左上角查看器，您可以查看以下页面：

- **主机对象列表**，您可以查看当前空间**最近24小时内**每个主机的数据信息，包括主机名称及标签、主机的CPU使用率、MEM使用率，CPU的单核负载等；
- **主机拓扑图**，您能够以拓扑图的方式快速查看主机指标值的大小，并分析不同系统、不同状态、不同版本、不同地区等的主机的运行状态。



## 主机对象列表

通过主机对象列表，您可以查看当前空间**最近24小时内**每个主机的数据信息，包括主机状态、主机名称、主机的CPU使用率、MEM使用率，CPU的单核负载等；支持为主机设置标签，并通过添加的标签筛选展示相同标签的主机列表。

![](img/image.png)

### 主机状态

“观测云” 为方便您快速识别主机状态，主机数据被分为：online(在线）、offline(离线）。

- online状态下，数据状态显示为“绿色”，主机处于运行状态
- offline状态下，数据状态显示为“灰色”，主机处于离线状态

注意：

- 当主机 offline 状态时，cpu使用率、mem使用率、负载均不作显示，值填充为“ - ”
- 若主机超过 24 小时仍未有数据上报，该主机记录将会在列表中移除
### 主机标签

面对多个主机的管理环境，观测云支持为每一台主机自定义标签，以便于用户进行分组管理。通过点击主机对象列表中的主机名称，您可以在划出详情页中为主机添加标签「Label 属性」。

操作步骤如下：

1）点击「编辑 Label」

2）输入 Label 标签，回车确认后可继续添加

3）添加完成后，点击保存即可

注意：标签配置完成后不会马上生效，需要等待 1-5 分钟后生效。



![](img/7.host_label_1.png)



### 主机详情

在主机对象列表中，点击主机名即可侧滑出主机详情页。您可以在主机详情页中为该主机添加主机标签（Labe属性）、查看对应主机

#### 集成运行情况

「集成运行情况」展示了该主机安装的 DataKit 版本信息和相关的采集器运行情况，运行情况共有两种状态：

- 正常运行状态的采集器，默认展示为 ‘浅蓝色’
- 发生错误的采集器，默认展示为 ‘红色’ 且支持点击查看错误信息。

同时，带 “视图符号” 的采集器（如下图）支持“查看监控视图”，点击「查看监控视图」即可查看相关内置视图。

![](img/2.host_6.png)

#### 系统信息

在主机详情页可查看主机的系统信息，包括主机名称、操作系统、处理器、内存，网络，磁盘、连接跟踪、文件等。
![](img/2.host_7.png)

#### 云厂商信息

若主机是云主机且配置了 [「云同步」](../datakit/hostobject.md)，点击列表中的主机名称即可划出查看云主机的「云厂商信息」，包括云平台、实例名、实例ID、实例规格、地域、可用区、创建时间、网络类型、付费类型、IP地址等。

![](img/2.host_8.png)



#### 关联分析

观测云支持对每一个基础设施对象进行关联分析，在主机对象的详情页，您不仅能够了解主机的基本信息，还可以一站式关联对应主机的指标、日志、进程、事件、容器、网络、安全巡检等，更快更全面的监测主机运行情况。

=== "指标"

    在主机详情页，“观测云” 支持您通过详情页下方的「指标」实时监控**最近24小时内**主机的性能状态，包括CPU负载、内存使用等。

=== "日志"

    通过详情页下方的「日志」，您可以查看与该主机相关的**最近1小时**的日志及日志数量，并对这些相关日志进行关键字搜索、多标签筛选和时间排序等。
    - 如您需要查看更详细的日志信息，可以点击日志内容跳转到对应日志详情页面，或点击「跳转」至「日志」查看与该主机相关的全部日志。
    - 如您需要查看更多的日志字段或更完整的日志内容，可以通过关联日志查看器「显示列」自定义调整“最大显示行数”、“显示列”。
    **注意：为了更流畅的用户查询体验，“观测云”默认即时保存用户在「日志」的浏览设置（包括“最大显示行数”、“显示列”），以使「关联日志」于「日志」保持一致。然而，在「关联日志」进行的自定义调整，在退出页面后不做保存。**


=== "进程"

    通过详情页下方的「进程」，您可以查看与该主机相关的**最近十分钟**的进程及进程数量，并对这些相关进程进行关键字搜索、多标签筛选和数据排序。如需查看更详细的进程信息，您可以点击进程内容跳转到对应进程详情页面，或点击「跳转」至「进程」查看与该主机相关的全部进程。

=== "事件"

    通过详情页下方的「事件」，您可以查看与该主机相关的**最近1小时**的告警事件（关联字段：host），并对这些相关事件进行关键字搜索、多标签筛选和数据排序。如需查看更详细的事件信息，您可以点击事件内容跳转到对应事件详情页面，或点击「跳转」至「事件」查看与该主机相关的全部事件。

=== "容器"

    通过详情页下方的「容器」，您可以查看**最近十分钟内**与该主机相关的全部容器 （Container）数据，并对这些相关容器进行关键字搜索、多标签筛选和数据排序。如需查看更详细的容器信息，您可以点击容器跳转到对应容器详情页面，或点击「跳转」至「容器」查看与该主机相关的全部容器。

=== "安全巡检"

    通过详情页下方的「安全巡检」，您可以查看**最近一天内**与该主机相关的安全巡检数据，并对这些安全巡检数据进行关键字搜索、多标签筛选和数据排序。如需查看更详细的安全巡检信息，您可以点击安全巡检数据即可跳转到对应安全巡检详情页面，或点击「跳转」至「安全巡检」查看与该主机相关的全部安全巡检数据。

=== "主机网络"

    主机网络支持查看主机之间的网络流量。支持基于 IP/端口查看源主机到目标之间的网络流量和数据连接情况，通过可视化的方式进行实时展示，帮助企业实时了解业务系统的网络运行状态，快速分析、追踪和定位问题故障，预防或避免因网络性能下降或中断而导致的业务问题。
    
    主机网络数据采集成功后会上报到观测云控制台，您可以通过「基础设施」-「主机」详情页中的「网络」，查看到主机的网络性能监测数据信息。更多详情可参考 [网络](network.md) 。

![](img/9.host_4.png)



#### 静默主机

在主机详情页，您可以通过「静默主机」选择该主机的告警静默时间，即您在该时间里将不再收到与该主机相关的告警通知，产生的告警事件会存入事件管理。所有静默的主机列表可在「监控」-「静默管理」中查看。详情参考文档 [告警设置](../monitoring/alert-setting.md) 。

![](img/3.host_15.png)

#### 绑定内置视图

“观测云” 支持在观测云工作空间「管理」-「内置视图」，设置绑定或者删除内置视图（系统视图、用户视图）到主机详情页面。

完成内置视图的绑定后，在主机对象详情中可查看所绑定的内置视图。如：绑定了“CPU 监控视图“为内置视图，成员可以在详情页中查看当前主机做为视图变量的“CPU 监控视图”，并通过「跳转」按钮，点击跳转至对应的内置视图页面，对该内置视图进行编辑、复制和导出。

**注意：**绑定内置视图前，需要确认所绑定内置视图（系统视图、用户视图）中的视图变量是否存在与该对象分类相关的字段，如`host`。更多配置详情，可参考[绑定内置视图](../scene/built-in-view/bind-view.md)。

![](img/4.view_bang_4.png)

### 数据查询与分析

在「主机对象列表」页面，观测云支持您通过搜索、筛选、排序、分组聚合分析等方式查询和分析主机数据。

#### 时间控件

主机对象列表默认为您展示最近24小时的主机数据，通过「刷新」按钮可以刷新至当前时间范围，重新获取数据列表

#### 搜索与筛选

在查看器搜索栏，支持关键字搜索、通配符搜索、关联搜索、JSON 搜索等多种搜索方式，支持通过 `标签/属性` 进行值的筛选，包括正向筛选、反向筛选、模糊匹配、反向模糊匹配、存在和不存在等多种筛选方式。更多搜索与筛选可参考文档 [查看器的搜索和筛选](../getting-started/necessary-for-beginners/explorer-search.md) 。

#### 快捷筛选

在查看器快捷筛选，支持编辑“快捷筛选”，添加新的筛选字段。添加完成后，可以选择其字段值进行快捷筛选。更多快捷筛选可参考文档 [快捷筛选](../getting-started/necessary-for-beginners/explorer-search.md#quick-filter) 。

#### 自定义显示列

在主机对象列表页面，可通过「显示列」自定义添加、编辑、删除、拖动显示列。当鼠标放在查看器显示列上时，点击「设置」按钮，支持对显示列进行升序、降序、向左移动列、向右移动列、向左添加列、向右添加列、替换列、添加到快捷筛选、添加到分析（分组聚合分析）、移除列等操作。更多自定义显示列可参考文档 [显示列说明](../getting-started/necessary-for-beginners/explorer-search.md#columns) 。

#### 分析模式

在基础设施主机查看器分析栏，支持基于 **1-3 个标签**进行多维度分析统计，以反映出数据在不同维度下的分布特征，支持多种数据图表分析方式，包括排行榜、饼图和矩形树图。更多详情可参考文档 [查看器的分析模式](../getting-started/necessary-for-beginners/explorer-search.md#analysis) 。

![](img/4.jichusheshi_1.png)

#### 数据导出

查看器右上角（“显示列”旁边）的" :material-cog: 设置"图标，支持导出当前对象列表数据到CSV文件或场景仪表板和笔记。

- 导出到CSV文件：保存当前列表为CSV文件到本地。

- 导出到仪表板：保存当前列表为「可视化图表」到指定「仪表板」。
- 导出到笔记：保存当前列表为「可视化图表」到指定「笔记」。

![](img/21.host_1.png)



## 主机拓扑图

通过「主机拓扑图」，您能够可视化查询主机的指标数据大小，进而快速分析不同系统、不同状态、不同版本、不同地区等自定义标签下的主机的运行状态。

- 搜索与筛选：在查看器搜索栏，支持关键字搜索、通配符搜索、关联搜索、JSON 搜索等多种搜索方式，支持通过 `标签/属性` 进行值的筛选，包括正向筛选、反向筛选、模糊匹配、反向模糊匹配、存在和不存在等多种筛选方式。更多搜索与筛选可参考文档 [查看器的搜索和筛选](../getting-started/necessary-for-beginners/explorer-search.md) 。
- 分析：您可以通过添加一个或多个分组标签重新聚合主机对象。
- 填充：您可以通过「填充」自定义填充指标，填充指标值的大小将决定填充的图例颜色。支持选择 CPU 使用率、MEM 使用率、CPU 单核负载三种指标填充方式。
- 自定义区间：您可以开启「自定义区间」为选择的填充指标自定义图例颜色区间范围。图例的颜色将依据图例的最大和最小值等分为5个区间，每个区间将自动对应五个不同的颜色。
- 鼠标悬停：悬停鼠标至主机对象，可查看主机的名称、CPU 使用率和 MEM 使用率。

![](img/3.host_2.2.png)
