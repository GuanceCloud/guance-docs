# 自定义
---

## 简介

除了主机、容器、进程以外，观测云支持您自定义新的对象分类并上报相关对象数据到观测云控制台。通过「基础设施」的「自定义」，您可以查看上报到工作空间的全部自定义对象数据。

## 自定义对象分类

观测云支持您自定义对象分类，帮助您跟踪和存储同一类的自定义上报对象数据。通过观测云工作平台，您可以添加对象分类、修改现有对象分类和删除现有对象分类。

### 添加对象分类

在观测云工作空间，通过 「基础设施」-「自定义」-「添加对象分类」，您可以创建新的对象分类，并自定义对象分类名称和对象字段。

- 对象分类：自定义对象的分类名称，即进行自定义对象数据上报时的 “对象分类名称”。在数据上报时，您需要使**“对象分类名称”与数据上报时的命名保持一致。**
- 别名：对当前对象分类添加别名，即当前对象分类在自定义对象列表显示的名称。
- 默认属性：添加对象需要的自定义字段及字段别名，默认添加对象的`name`字段。在数据上报时，自定义字段为该对象分类下进行数据上报时的必填字段。

![](../img/1.custom_1.png)

### 自定义对象数据上报

添加完自定义对象分类以后，即可进行自定义数据上报。进行自定义对象数据上报时，需要先安装并连通 DataKit 和 DataFlux Func，再通过 DataFlux Func 上报数据到 DataKit，最终通过 DataKit 上报数据到观测云工作空间。具体操作过程可参考文档 [自定义对象数据上报](data-reporting.md) 。

**注意：**

1. 「默认属性」中的自定义字段，均为数据上报时的必填字段，若上报的数据缺失必填字段，该数据将无法上报到观测云工作空间
1. 若上报的数据包含必填字段且包括其他的字段，非必填字段显示为数据标签。
1. 若上报的数据类型与定义的字段数据类型不符，该数据无法上报到观测云工作空间。如：在DataFlux Func 中定义了字段类型是字符型，上报的时候数据类型为整型，该数据将无法上报到观测云工作空间。

### 修改对象分类

通过 「基础设施」-「自定义」，在页面左侧的对象分类列表中，您可以点击「更多」对现有的对象分类进行「设置」，包括更改现有对象分类别名和添加/删除字段。

![](../img/11.custom_2.png)

**注意：**添加字段后，原有对象数据不变，后上报的数据则必须包含新增的字段。

### 删除对象分类

观测云支持**拥有者**和**管理员**删除指定自定义对象分类以及所有自定义对象，进入「管理」-「基本设置」，点击「删除自定义对象」后，选择删除自定义对象的方式，即可删除对应的对象数据。

- 指定自定义对象分类：仅删除所选对象分类下的数据，不会删除索引
- 所有自定义对象：删除所有自定义对象数据及索引

注意：所有自定义对象一旦删除，上报到基础设施自定义的所有数据及索引全部会被删除且无法恢复，所有设置的自定义对象分类数据需要重新上报，每天限制5次删除所有自定义对象操作。

![](../img/7.custom_cloud_3.png)



## 自定义对象详情页

自定义对象数据上报后，点击自定义对象列表中的名称即可划出详情页查看该对象的详细信息, 包括对象名称、对象分类、属性标签等。

![](../img/11.custom_4.png)

### 基础属性

通过点击自定义对象详情页的基础属性标签「主机」，您可以进行以下操作：

- “添加到筛选”，即添加该标签至 container列表查看器，查看与该主机相关的全部 Container数据
- “复制”，即复制该标签内容至本地剪贴板 
- “查看相关日志”，即查看与该主机相关全部日志
- “查看相关容器”，即查看与该主机相关全部容器
- “查看相关进程”，即查看与该主机相关全部进程
- “查看相关链路”，即查看与该主机相关全部链路
- “查看相关巡检”，即查看与该主机相关全部巡检数据

![](../img/11.custom_5.png)

### 自定义内置视图

观测云支持在观测云工作空间「管理」-「内置视图」，设置绑定或者删除内置视图（系统视图、用户视图）到基础设施自定义对象详情页面。完成内置视图的绑定后，在自定义对象详情中可查看所绑定的内置视图。

**注意：**绑定内置视图前，需要确认所绑定内置视图中的视图变量是否存在与该对象分类相关的字段，如`host`。更多配置详情，可参考[绑定内置视图](../../scene/built-in-view/bind-view.md)。

## 数据查询与分析

进入「自定义」查看器，观测云支持您通过搜索、筛选、排序、分组等方式查询和分析自定义对象数据。

- 页面上方的“ :octicons-search-24: 搜索”，支持关键字搜索、通配符搜索、关联搜索、JSON 搜索等多种搜索方式，支持通过 `标签/属性` 进行值的筛选，包括正向筛选、反向筛选、模糊匹配、反向模糊匹配、存在和不存在等多种筛选方式。更多搜索与筛选可参考文档 [查看器的搜索和筛选](../../getting-started/necessary-for-beginners/explorer-search.md#search) 。
- 页面左侧的“ :octicons-search-24: 搜索对象分类”，支持通过关键字匹配相关对象分类。

![](../img/11.custom_10.png)

### 自定义显示列

在自定义主机对象列表页面，可通过「显示列」自定义添加、编辑、删除、拖动显示列。当鼠标放在查看器显示列上时，点击「设置」按钮，支持对显示列进行升序、降序、向左移动列、向右移动列、向左添加列、向右添加列、替换列、添加到快捷筛选、添加到分组、移除列等操作。更多自定义显示列可参考文档 [显示列说明](../../getting-started/necessary-for-beginners/explorer-search.md#columns) 。

![](../img/11.custom_6.png)

### 数据导出

在自定义对象列表中，观测云支持您通过「:material-cog:设置」导出当前对象列表的数据为CSV文件、仪表板或者笔记。

![](../img/11.custom_7.png)

### 分析模式

在基础设施自定义查看器分析栏，支持基于 **1-3 个标签**进行多维度分析统计，以反映出数据在不同维度下的分布特征，支持多种数据图表分析方式，包括排行榜、饼图和矩形树图。更多详情可参考文档 [查看器的分析模式](../getting-started/necessary-for-beginners/explorer-search.md#analysis) 。

![](../img/4.jichusheshi_4.png)

#### 
