# 自定义
---


除了主机、容器、进程以外，观测云支持您自定义新的对象分类并上报相关对象数据到观测云控制台。

## 自定义对象分类

观测云支持您针对自定义对象进行分类，帮助您跟踪和存储同一类的自定义上报对象数据。

### 添加对象分类

在观测云工作空间，通过 **基础设施 > 自定义 > 添加对象分类**，您可以创建新的对象分类，并自定义对象分类名称和对象字段。

<img src="../img/1.custom_1.png" width="70%" >

| 字段 | 说明 |
| --- | --- |
| 对象分类 | 即进行自定义对象数据上报时的对象分类名称。在数据上报时，您需要使<u>对象分类名称与数据上报时的命名保持一致</u>。 |
| 别名 | 即当前对象分类在自定义对象列表显示的名称。 |
| 必有属性 | 即数据中必须包含的字段；默认添加对象的 `name` 字段。若上报的数据中不包含您设置的字段，最终将不会上报到观测云。这可以一定程度上过滤不规范数据。 |

### 自定义对象数据上报

添加完自定义对象分类以后，即可进行自定义数据上报。在此之前，需要先安装并连通 DataKit 和 DataFlux Func，再通过 DataFlux Func 上报数据到 DataKit，最终通过 DataKit 上报数据到观测云工作空间。

> 关于具体操作过程，可参考 [自定义对象数据上报](data-reporting.md)。

???+ attention

    - **默认属性**中的自定义字段，均为数据上报时的必填字段，若上报的数据缺失必填字段，该数据将无法上报到观测云工作空间；    
    - 若上报的数据包含必填字段且包括其他的字段，非必填字段显示为数据标签；     
    - 若上报的数据类型与定义的字段数据类型不符，该数据无法上报到观测云工作空间。如：在DataFlux Func 中定义了字段类型是字符型，上报的时候数据类型为整型，该数据将无法上报到观测云工作空间；   
    - 自定义对象离线 48 小时后会做清除处理。     


### 修改对象分类

在页面左侧的对象分类列表中，您可以点击 :material-dots-vertical: 按钮：

- 对现有的对象分类进行**设置**，包括更改现有对象分类别名和添加/删除字段；
- 将当前对象添加至二级菜单，便于查看。

<img src="../img/11.custom_2.png" width="70%" >

**注意**：添加字段后，原有对象数据不变，后上报的数据则必须包含新增的字段。

### 删除对象分类

观测云支持**拥有者**和**管理员**删除指定自定义对象分类以及所有自定义对象，进入**管理 > 删除自定义对象**，选择删除自定义对象的方式，即可删除对应的对象数据。

- 指定自定义对象分类：仅删除所选对象分类下的数据，不会删除索引；     
- 所有自定义对象：删除所有自定义对象数据及索引。   

**注意**：所有自定义对象一旦删除，上报到基础设施自定义的所有数据及索引全部会被删除且无法恢复，所有设置的自定义对象分类数据需要重新上报，每天限制 5 次删除所有自定义对象操作。

![](../img/7.custom_cloud_3.png)

### 快捷筛选 {#filter}

您可以为自定义对象添加空间级筛选项。

**注意**：仅当前工作空间 Owner 和 Administrator 可以添加。

<img src="../img/filter.png" width="60%" >

> 关于快接筛选相关操作，可参考 [快捷筛选 > 空间级筛选项](../../getting-started/function-details/explorer-search.md#quick-filter)。

## 自定义对象详情页

自定义对象数据上报后，点击自定义对象列表中的名称即可划出详情页查看该对象的详细信息, 包括对象名称、对象分类、属性标签等。

![](../img/11.custom_4.png)

### 基础属性

通过点击自定义对象详情页的基础属性标签**主机**，您可以进行以下操作：  

| 操作 | 说明 |
| --- | --- |
| 添加到筛选 | 即添加该标签至 container 列表查看器，查看与该主机相关的全部 Containers 数据。 |
| 复制 | 即复制该字段至剪贴板。 |
| 查看相关日志 | 即查看与该主机相关全部日志。 |
| 查看相关容器 | 即查看与该主机相关全部容器。 |
| 查看相关进程 | 即查看与该主机相关全部进程。 |
| 查看相关链路 | 即查看与该主机相关全部链路。 |
| 查看相关巡检 | 即查看与该主机相关全部巡检数据。 |

![](../img/11.custom_5.png)

### 自定义内置视图

观测云支持设置绑定或者删除内置视图（系统视图、用户视图）到基础设施自定义对象详情页面。完成内置视图的绑定后，在自定义对象详情中可查看所绑定的内置视图。



**注意**：绑定内置视图前，需要确认所[绑定内置视图](../../scene/built-in-view/bind-view.md)中的视图变量是否存在与该对象分类相关的字段，如 `host`。

## 数据查询与分析

进入**自定义**查看器，观测云支持您通过搜索、筛选、排序、分组等方式查询和分析自定义对象数据。

- 在 :octicons-search-24: 搜索栏支持通过关键字搜索、通配符搜索、关联搜索、JSON 搜索等多种搜索方式；并支持通过 `标签/属性` 进行值的筛选，包括正向筛选、反向筛选、模糊匹配、反向模糊匹配、存在和不存在等多种筛选方式；    
- 左侧 :octicons-search-24: 搜索对象分类可通过关键字匹配相关对象分类。

> 更多搜索与筛选介绍，可参考[查看器的搜索和筛选](../../getting-started/function-details/explorer-search.md#search)。      

![](../img/11.custom_10.png)

### 自定义显示列

在自定义主机对象列表页面，可通过**显示列**自定义添加、编辑、删除、拖动显示列。

> 更多详情，可参考[显示列说明](../../getting-started/function-details/explorer-search.md#columns)。

### 数据导出

在自定义对象列表中，观测云支持您通过 :material-cog: 设置按钮导出当前对象列表的数据为 CSV 文件、仪表板或者笔记。


### 分析模式

支持基于 <u>1-3 个标签</u>进行多维度分析统计，以反映出数据在不同维度下的分布特征，支持多种数据图表分析方式，包括排行榜、饼图和矩形树图。

> 更多详情，可参考[查看器的分析模式](../../getting-started/function-details/explorer-search.md#analysis)。

![](../img/4.jichusheshi_4.png)


