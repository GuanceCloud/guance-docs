# 数据存储策略
---

随着使用的应用程序的增加，数据观测需求范围的扩大，对数据的存储时长的需求也会随之调整。观测云提供多种数据存储策略，您可以根据需求自定义您的数据存储时长，来有效控制您的数据存储费用。

## 数据存储时长

| 数据存储类型 | 数据存储时长 |
| --- | --- |
| 指标 | 3天 / 7天（默认）/ 14天 / 30天 / 180天 / 360天 |
| 日志 / CI 可视化数据 / 可用性监测 / 安全巡检 | 3天 / 7天 / 14天（默认）/ 30天 / 60天 |
| 备份日志 | 180天（默认）/ 360天 / 720天 |
| 事件 | 14天（默认）/ 30天 / 60天 |
| 用户访问 / 应用性能 （Trace、Profile） | 3天 / 7天（默认）/ 14天 |

## 变更数据存储时长

商业版工作空间拥有者当天可以多次调整数据存储策略，当天内除第一次修改会立即生效，其他的修改操作将按照最后一次调整记录次日生效。

数据存储时长变更步骤如下：

- 步骤一：在观测云工作空间**管理 > 设置**，在**变更数据存储策略**，点击**更换**；
- 步骤二：选择需要修改数据存储策略的数据类型，点击**编辑**，在弹出的对话框中，选择需要修改的时长，点击**确定**；
- 步骤三：您可以根据第二步，修改其他数据类型的存储时长，全部修改完成后，点击**确定**，即可变更当前工作空间内的数据存储时长。

![](../img/2.data_storage_2.1.png)

???+ attention "注意事项"

    1. 只允许商业版工作空间拥有者进行此操作；  
    2. 指标数据存储策略变更后，旧的存储策略里面的数据将会被删除，请谨慎选择。支持为指标集[自定义设置](../../metrics/dictionary.md#storage) 数据存储策略；  
    3. 除指标数据以外的其他数据存储策略变更后，新的保存策略即时生效，旧的存储策略里面的数据不会立即删除，在策略滚动删除旧数据之前仍然存在这部分计费。

        - 数据保存时间缩短：假设应用性能数据从14天调整为7天，以当天调整的时间为分界线，在此之前的数据仍然按照14天存储策略计算费用，在此之后的数据会生成新的索引并按照新的7天存储策略计算费用；
        - 数据保存时间变长：假设应用性能数据从7天调整为14天，以当天调整的时间为分界线，在此之前的数据仍然按照7天存储策略计算费用，在此之后的数据会生成新的索引并按照新的14天存储策略计算费用。
        
        > 更多详情可参考文档 [观测云 ES 多租户生命周期管理实践](../../billing/billing-method/es-life-cycle.md)。



## 数据存储方式 {#options}

观测云提供两种数据存储方案：**默认存储**和 **SLS 存储**：

- 默认存储：使用观测云 [GuanceDB](./gauncedb.md) 存储指标类数据，Elasticsearch / OpenSearch 存储日志类数据；开通方式可参考文档 [注册观测云商业版](../../billing/commercial-register.md)；
- SLS 存储：使用阿里云日志服务 SLS 存储数据，日志库（LogStore）存储日志类数据，时序库（MetricStore）存储指标类数据；开通方式可参考文档 [阿里云市场开通观测云专属版](../../billing/commercial-aliyun-sls.md)。


## 体验版数据存储策略 {#free}

观测云支持免费开始，按需购买，按量付费的计费方式，为您提供开箱即用，实现全面观测的云平台。观测云体验版为用户提供 7 天的数据存储策略，若您需要变更数据存储策略，您可以 [升级到观测云商业版](../../billing/commercial-version.md) 进行变更。

| **计费项**             | **体验额度**  | **数据存储策略** | **备注**                                                     |
| ---------------------- | ------------- | ---------------- | ------------------------------------------------------------ |
| 时间线数量             | 3000 条       | 7 天             |                                                              |
| 日志类数据数量         | 每天 100 万条 | 7 天             | 日志类数据范围：事件、安全巡检、日志(不含可用性监测的日志数据) |
| 备份日志数据数量       | /             | /                | 体验版不支持备份日志数据                                     |
| 应用性能 Trace 数量    | 每天 8000 个  | 7 天             |                                                              |
| 应用性能 Profile 数量    | 每天 60 个  | 7 天             |                                                              |
| 用户访问 PV 数量       | 每天 2000 个  | 7 天             |                                                              |
| 会话重放 Session 数量       | 每天 1000 个  | 7 天             |                                                              |
| 可用性监测拨测任务次数 | 每天 20 万次  | 7 天             |                                                              |
| 任务调用次数           | 每天 10 万次  | /                |                                                              |
| 短信发送次数           | /             | /                | 体验版不支持短信通知                                         |

???+ attention "体验版计费须知"

    - 体验版不同计费项目若存在数据额度使用满载的情况，数据将停止上报更新；基础设施、事件这两类数据依旧支持上报更新，您仍然可以看到基础设施列表数据，事件数据；     
    - 体验版支持在线升级到商业版，不升级则不收费，一旦升级到付费版本，不可回退；        
    - 体验版升级到商业版后，采集数据会继续上报到观测云工作空间，但是体验版时期采集的数据将无法查看；   
    - 时间线和备份日志统计的是全量数据，其他计费项都为增量数据；增量数据统计每天 0 点重置免费配额，当天有效。   

