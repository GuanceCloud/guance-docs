# 服务拓扑 

在该模式下，您可以以拓扑图的形式查看各个服务之间的调用关系。

## 拓扑图 {#map}

1. 区分环境和版本：支持基于服务（`service`）和服务环境版本（`service+env+version`) 两种维度绘制链路拓扑图，开启区分环境和版本后，将按照不同的环境版本绘制服务拓扑图。例如金丝雀发布，通过开启环境和版本，即可查看不同环境版本下的服务调用情况。

2. 填充：支持选择不同的性能指标请求数、P50 响应时间、P75 响应时间、P99 响应时间和错误率来查看服务节点颜色。

3. 自定义区间：为选择的**填充指标**自定义服务节点颜色区间范围。节点的颜色根据最大值和最小值等分为 5 个区间，每个区间将自动对应五个不同的颜色。

4. 节点尺寸：节点大小共有 3 种尺寸，对服务每秒请求数的**最大值（Max）**和**最小值（Min）**进行三等分，得出的三个区间对应 3 种图形尺寸。

**注意**：若每秒请求数 < 0.01，则直接显示为 < 0.01，但实际 ⚪ 的尺寸大小要以真实数据为准，这里只作显示（举例：查询出来的最大值为 0.009，最小值为 0.0003，都小于 0.01，则显示为 Min < 0.01，Max < 0.01，但真实的尺寸大小还是以 0.009 和 0.0003 计算）。

![](../img/service-8.gif)

在拓扑图，您可以进行以下操作：

<div class="grid" markdown>

=== "节点指标数据查询"

    将鼠标悬浮在服务节点处时，对应服务高亮显示，其他无关联服务及连接线变灰，您可以查看该服务的请求数、错误率、平均响应时间、和 P99 响应时间等指标数据。

=== "自定义颜色区间"

    开启**自定义区间**为选择的**填充指标**自定义服务节点颜色区间范围。通过**填充**选择不同的性能指标请求数、P50 响应时间、P75 响应时间、P99 响应时间和错误数来查看服务节点颜色。

=== "查看缩略图"

    放大拓扑图，可在左下角查看小缩略图。

=== "查看上下游"

    点击服务图标，点击**查看上下游**，即可查看当前服务的上下游服务关联；点击左上角**返回总览**可返回到原服务拓扑图，在搜索框进行搜索或筛选可过滤关联的上下游服务，根据搜索或筛选的结果显示匹配的关联上下游服务。

=== "查看服务概览"

    点击服务图标，可查看服务概览详情。

=== "关联查询"

    点击服务图标，可查看相关日志、相关链路。

</div>

![](../img/service-7.gif)

### Service Map 查询 {#servicemap}

**前提**：所有商业版工作空间归属于同一个[组织 ID](../../management/attribute-claims.md)，即 `organization` 相同。

若同一个 Trace 数据存在分流情况，数据会归属于不同的工作空间，此时无法在同一个工作空间查看完整的链路数据。而跨工作空间 Service Map 查询可保证数据查询的连贯性，直接在当前工作空间点击按钮即可查看当前服务的上下游调用拓扑。

![](../img/servicemap.gif)



