# 错误追踪
---

## 简介

在观测云控制台，您可以在「应用性能监测」的「错误追踪」，快速查看链路中的类似错误及其分布情况，帮助快速定位性能问题。

## 错误追踪查看器模式

观测云错误追踪查看器支持三种查看模式，包括所有错误、聚类分析和图表分析。

=== "所有错误"

    在观测云工作空间「应用性能监测」-「错误追踪」中，选择「所有错误」即可基于所有错误的链路数据进行查看和分析。
    
    注意：所有错误的链路数据统计的是基于 `status=error` ，且含有 `error_type` 字段的顶层 `span` 。
    
    ![](img/1.apm_error_1.png)

=== "聚类分析"

    在观测云工作空间「应用性能监测」-「错误追踪」中，选择「聚类分析」即可对所有错误的链路数据基于 `error_msg` 和 `error_type` 两个字段进行进行相似度计算分析，根据右上方选择的时间范围固定当前时间段，并获取该时间段内 10000 条数据进行聚类分析，将近似度高的错误链路进行聚合，提取并统计共同的 Pattern 聚类，帮助快速发现异常链路和定位问题。
    
    ![](img/1.apm_error_5.png)

=== "图表分析"

    在观测云工作空间「应用性能监测」-「错误追踪」中，选择右上角「分析」即可对所有错误的链路数据基于**1-3个标签**进行分组统计，以反映出错误链路在不同的分组下，不同时间的分布特征与趋势。观测云支持多种分组数据浏览方式：时序图、排行榜、饼图和矩形树图。更多详情可参考文档 [查看器的分析模式](../getting-started/necessary-for-beginners/explorer-search.md#analysis) 。
    
    ![](img/1.apm_error_6.png)



## 错误查询与分析

### 时间控件

观测云查看器默认展示最近 15 分钟的数据，通过右上角的「时间控件」，您可以选择数据展示的时间范围。更多详情可参考文档 [时间控件说明](../getting-started/necessary-for-beginners/explorer-search.md#time) 。

### 搜索与筛选

在查看器搜索栏，支持关键字搜索、通配符搜索、关联搜索等多种搜索方式，支持通过 `标签/属性` 进行值的筛选，包括正向筛选、反向筛选、模糊匹配、反向模糊匹配、存在和不存在等多种筛选方式。更多搜索与筛选可参考文档 [查看器的搜索和筛选](../getting-started/necessary-for-beginners/explorer-search.md) 。

### 快捷筛选

在查看器快捷筛选，支持编辑“快捷筛选”，添加新的筛选字段。添加完成后，可以选择其字段值进行快捷筛选。

**注意：**

- 快捷筛选的「持续时间」默认进度条最小值、最大值为链路数据列表里最小和最大的持续时间
- 支持拖动进度条调整最大/最小值，输入框中的值同步变化
- 支持手动输入最大/最小值，"按回车键"或"点击输入框外"进行过滤搜索
- 输入不规范时输入框变红，不进行搜索，正确格式：纯“数字”或“数字+ns/μs/ms/s/min”
- 若没有输入单位进行搜索，默认直接在输入的数字后面填入"s"然后进行过滤搜索
- 若手动输入单位，则直接进行搜索

更多快捷筛选可参考文档 [快捷筛选](../getting-started/necessary-for-beginners/explorer-search.md#quick-filter) 。

![](img/1.apm_error_7.png)

### 自定义显示列

在错误追踪查看器，默认查看“时间”、“错误类型”、“服务”、“错误内容”以及“资源”，可通过「显示列」自定义添加、编辑、删除、拖动显示列。当鼠标悬停查看器显示列上时，点击「设置」按钮，支持对显示列进行升序、降序、向左移动列、向右移动列、向左添加列、向右添加列、替换列、添加到快捷筛选、添加到分组、移除列等操作。更多自定义显示列可参考文档 [显示列说明](../getting-started/necessary-for-beginners/explorer-search.md#columns) 。

### 错误数据导出

在错误追踪查看器，您可以先筛选出想要的错误链路数据，通过导出后进行查看和分析，支持导出到 CSV 文件或者场景仪表板和笔记。

## 错误详情 {#detail}

在错误追踪查看器，您可以通过点击任意错误查看对应的错误链路详情，包括服务、错误类型、错误内容、错误分布图、错误详情、链路详情、扩展属性以及关联的日志、主机、网络等。

![](img/1.apm_error_2.png)

![](img/1.apm_error_3.png)

### 查看链路

在错误追踪详情页，点击右上角“查看链路”，即可跳转到链路详情页查看错误链路关联的上下文 span，点击“返回”可跳转回错误链路详情页。

![](img/1.apm_error_4.png)

### 扩展属性

在错误链路详情页，您可以在「扩展属性」查看当前错误链路的相关字段属性，点击字段可通过“筛选字段值”、“反向筛选字段值”、“添加到显示列”和“复制”进行快速筛选查看。

- “筛选字段值”，即添加该字段至查看器，查看与该字段相关的全部数据
- “反向筛选字段值”，即添加该字段至查看器，查看除了该字段以外的其他数据
- “添加到显示列”，即添加该字段到查看器列表进行查看
- “复制”，即复制该字段至剪贴板 

![](img/1.apm_error_8.png)

### 关联分析

=== "关联日志"

    在错误链路详情页，点击「日志」，即可查看和链路ID（trace_id）关联的日志。您可以对日志进行关键字搜索和多标签筛选，日志内容默认按照日志查看器的 “最大显示行数”、“显示列” 的配置展示，支持自定义，若您需要查看更详细的日志内容，您可以点击日志内容跳转到日志详情页面，或点击跳转按钮到日志页打开。

=== "关联主机"

    在错误链路详情页，点击「主机」，即可查看关联主机（关联字段：host）的指标视图和属性视图。

=== "关联网络"

    在错误链路详情页，点击「网络」，查看相关视图（包括主机、Pod 和 Deployment）的数据连接情况。

