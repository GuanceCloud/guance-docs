# 内存泄漏
---

## 概述

「内存泄漏」基于内存异常分析检测器，定期对主机进行智能巡检，通过出现内存异常的主机来进行根因分析，确定对应异常时间点的进程和 pod 信息，分析当前工作空间主机是否存在内存泄漏问题。

![](../img/1.bot_obs_1.1.png)

## 启用/禁用

智能巡检「内存泄漏」默认是「禁用」状态，可手动「启用」，开启后，将对当前工作空间的所有主机进行巡检。

## 查看相关事件

智能巡检基于观测云智能算法，会查找内存指标中的异常情况，如内存使用率突然飙升。对于异常情况，智能巡检会生成相应的事件，在智能巡检列表右侧的操作菜单下，点击「查看相关事件」按钮，即可查看对应异常事件。

![](../img/1.bot_obs_4.png)

点击「事件」，可查看智能巡检事件的详情页。

- 状态：红色代表未恢复，绿色代表已恢复（已解决）
- 时间：异常发生的时间

- 筛选条件：手动配置的「筛选条件」，点击「筛选条件」支持复制和查看相关日志、容器、进程、安全巡检、链路、用户访问监测、可用性监测以及 CI 等
- 消息：描述异常巡检事件内容
- 影响：该异常事件的影响，包括智能检测的内存指标异常图表趋势（其中虚线代表提前预测的趋势），内存占用 Top 10 的进程和 Pod 列表，帮助用户快速定位内存异常的原因
- 内置视图：支持手动添加 `tags` 关联的内置视图结合智能巡检进行分析。关于如何配置内置视图可参考文档 [绑定内置视图](../management/built-in-view/bind-view.md) 。

![](../img/1.bot_obs_3.png)

## 常见问题

**1.智能巡检内存泄漏的检测频率**

- 数据点颗粒度(数据上报频率)：1 分钟

- 检测数据范围：6 小时

- 定时执行周期：1 小时一次

说明：按 1 分钟时间间隔聚合数据， 6 小时为取数周期，1 小时为运行周期，查看区间时间内 `used_percent` 是否出现异常，根据出现的异常的 host 来进行根因分析，并根据 host 的类型来确定异常的进程或者 pod。



**2.智能巡检内存泄漏相关的指标集**

基于主机对象`(hostobject)` 和 内存指标`(mem)` 。



**3.在何种情况下会产生内存泄漏智能巡检事件**

通过观测云的智能算法，跟踪 `used_percent`  指标趋势，当指标快速升高、或将要逼近临界值、或触发临界值时会触发巡检事件。

