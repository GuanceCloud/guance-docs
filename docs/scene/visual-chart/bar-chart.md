# 柱状图
---

## 简介

柱状图一般适用于实现一段时间内的数据变化和各变量间的对比情况。默认分组显示。

## 图表查询

图表查询支持「简单查询」、「表达式查询」、「DQL查询」，图表查询条件详细说明请点击 [图表查询](chart-query.md) 进行查看，默认添加简单查询。查询的指标集以及指标可以不同，但 by（分组）的Tag 必须一致，修改一个，其他查询自动同步修改。

## 图表链接

链接可以帮助你实现从当前图表跳转至目标页面，支持添加平台内部链接和外部链接，支持通过模板变量修改链接中对应的变量值将数据信息传送过去，完成数据联动。相关设置说明请点击 [图表链接](chart-link.md) 进行查看。

## 图表样式
| 选项 | 说明 |
| --- | --- |
| 图表标题 | 为图表设置标题名称，设置完成后，在图表的左上方显示，支持隐藏 |
| 图表样式 | 支持【柱状图】和【条形图】两种柱状表现方式 |
| 堆叠显示 | 支持【指标堆叠】和【分组堆叠】，默认关闭，开启后，默认选中【指标堆叠】。右侧出现“方式”选项，包含默认、百分比。<br />- 默认：将每根柱子进行分割，以显示大类目下的细分类目占比情况，统计每个分组下不同指标的大小<br />- 百分比：柱子的各个层代表的是该类别数据占该分组总体数据的百分比，每个系列按照所占的百分比进行堆积<br /> |
| 别名 | 支持对分组后的查询添加别名 |
| 颜色 | 设置柱状图的颜色 |


## 图表设置

### 基本设置
| 选项 | 说明 |
| --- | --- |
| 单位 | 支持为查询结果自定义设置单位。若不设置单位，则按照科学计数自动计算图表Y轴数值；按照千分位的格式在图表上展示原始数值。<br /><li> Y轴数值展示<br />默认查询结果值自动转换单位展示遵循「科学计数 K、M、B」，保留两位小数点（1千 = 1K，100万 = 1M，10亿 = 1B）；人民币自动转换单位「元、万、亿」，保留两位小数点<br />       例如：单位的时间间隔选择单位为ns，那么按照数据的大小，查询结果只自动转换单位效果如下，以此类推：<br />   - 1000000ns：图表查询数据结果显示为1ms<br />   - 1000000000ns：图表查询数据结果显示为1s<br />   - 10000000000ns：图表查询数据结果显示为1m<br />注意：选择自定义单位后，取消科学计数，按用户设置的单位显示。<br /><li> 图表数值展示<br />可参考文档 [图表千分位](chart-query.md) 。 |
| 基线 | 支持添加基线值、基线标题以及基线颜色 |

### 高级设置
| 选项 | 说明 |
| --- | --- |
| 时间分片 | 对数据按照一定的时间间隔进行聚合处理，默认关闭 |
| 锁定时间 | 支持锁定图表查询数据的时间范围，不受全局时间组件的限制。设置成功后的图表右上角会出现用户设定的时间，如【xx分钟】、【xx小时】、【xx天】。如锁定时间间隔30分钟，那么当调节时间组件无论查询什么时间范围视图，仍只会显示最近 30 分钟数据 |
| 时间间隔 | 若时间分片关闭，无时间间隔选项，若时间分片开启，时间间隔选项如下：<br /><li>当没有选择【锁定时间】时，【时间间隔】可以选择 “原始间隔” 和 “自动对齐” ；【显示密度】可以进行切换。<br />   - 原始间隔：根据时间组件的时间范围默认查询显示数据<br />   - 自动对齐：开启后，将按选择的时间范围和聚合时间间隔动态的调整查询。系统预设了1毫秒、10毫秒、50毫秒、100毫秒、500毫秒、1秒、5秒、15秒、30秒、1分钟、5分钟，10分钟、30分钟、1小时，6小时，12小时、1天、1周、1月，多种时间间隔，根据计算的时间间隔就近向上取实际查询的时间间隔。（ 例如：自动聚合算法计算出时间间隔是 50 秒，那么实际将按照  1 分钟的时间间隔发起查询 ）<br /><li>当选择了【锁定时间】时，【时间间隔】可以选择 “原始间隔” 和具体时间间隔。当选择了具体时间间隔时（例如1分钟、5分钟），显示密度灰置，不生效。<br />   - 原始间隔：根据时间组件的时间范围默认查询显示数据<br />   - 时间间隔：根据锁定时间的长短，自动匹配不同的可选时间间隔查询显示数据。（ 例如：时间间隔选择 1 分钟，那么实际将按照  1 分钟的时间间隔发起查询 ）<br /> |
| 字段映射 | 配合视图变量的对象映射功能，默认为关闭，若在视图变量已配置对象映射：<br />- 开启字段映射时，图表显示查询的「分组字段」和对应的「映射字段」，未指定映射的分组字段不显示<br />- 关闭字段映射时，图表正常显示，不显示映射的字段<br /> |
| 图表说明 | 为图表添加描述信息，设置后图表标题后方会出现【i】的提示，不设置则不显示 |
| 工作空间 | 被授权的工作空间列表，选择后即可通过图表查询并展示该工作空间数据 |


## 示例图

- 柱状图

![](../img/zhuzhuangtu001.png)

- 条形图

![](../img/zhuzhuangtu002.png)

