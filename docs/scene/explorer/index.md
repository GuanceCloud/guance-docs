# 查看器
---

## 概述

观测云的场景自定义查看器为你提供了可快速搭建的日志查看器，你可以与空间成员共同搭建基于自定义的日志查看器，定制化你的查看需求，还可以将制作完成的查看器导出分享给他人，共享查看器模板。

## 新建查看器

进入「场景」-「查看器」，点击「+新建查看器」，即可开始创建自定义查看器。

![](../img/6.log_explorer_1.png)

- 空白查看器：即创建一个空白的查看器，后续可自定义设置该查看器
- 自定义模板：导入自定义的查看器模板进行使用
- 内置查看器模板：系统提供的查看器模板，无需配置，即选即用。

![](../img/9.logviewer_2.png)

选择「+新建空白查看器」并完成自定义查看器名称及标签后，即可创建一个新的查看器。

- 查看器名称：工作空间内查看器名称不可重复，且支持最大长度 64个字符

- 自定义标签：自定义的可识别语言符号，用于将仪表板和查看器分组。”观测云“的仪表板与查看器共用一套标签数据，点击「标签」即可搜索对应的查看器

- 可见范围：查看器“创建者”可自定义当前查看器的查看权限，包括“公开”和“仅自己可见”。

  - 公开：对空间内所有成员开放的查看器，其他成员的查看和编辑权限不受影响。
  - 仅自己可见：仅查看器“创建人”可查看的**非公开查看器**，其他成员不具备查看权限。

  注意：以链接形式分享的**非公开查看器**，非创建人不可见。

![](../img/5.browser_1.png)



## 查看器配置

在新创建的查看器，支持「默认」、「近似文本」和「分组」三种日志查看器类型。选择日志的数据范围，即可开始对查看器进行编辑。

- 默认：支持基于采集的原始日志数据进行查看和分析；
- 近似文本：支持根据右上方选择的时间范围固定当前时间段，并获取该时间段内10000条数据进行近似文本分析，将近似度高的日志进行聚合，并提取共同的 pattern 聚类，有利于发现异常日志和快速定位问题；
- 分组：支持对原始日志数据基于**1-3个标签**进行分组统计，以反映出日志数据在不同的分组下，不同时间的分布特征与趋势；

- 日志来源：用于选择日志的来源，需先安装 DataKit ，并配置对应的日志采集器；
- 筛选：基于字段进行筛选日志内容；
- 搜索：基于日志来源和筛选的结果进行关键字搜索，筛选日志的展示内容；
- 时序图图表：用于显示数据在相等时间间隔下的趋势变化，同时可用来分析多组指标数据之间的作用及影响。支持自定义图表查询，并展示为折线图、面积图或柱状图，详情可参考 [图表查询](../visual-chart/chart-query.md) 和 [时序图](../visual-chart/timeseries-chart.md) ；
- 图表同步搜索：用于筛选搜索的内容是否同步到图表，默认开启。当搜索框有内容时，关闭开关，即图表查询回到默认状态；开启开关，即图表查询受到筛选内容的影响；
- 快捷筛选：默认显示 主机、状态 两个字段；支持用户自定义快捷筛选列表；
- 数据列表：默认配置 时间、内容 两个字段，支持用户自定义显示列表字段；

![](../img/6.log_explorer_2.1.png)

- 配置显示列：自定义配置显示列，支持手动输入或者下拉选择；支持选择「近似文本分析」查看器字段，默认使用 message 字段对应内容做近似文本分析

![](../img/6.log_explorer_6.png)

## 查看和分析创建的查看器

查看器创建完成后，您可以通过以下功能查询和分析日志数据，帮助您快速定位问题。

- 搜索：基于字段标签、日志文本进行关键词搜索、字段筛选、关联搜索、模糊搜索
- 快捷筛选：基于字段标签，快捷筛选日志数据
- 格式化配置：隐藏敏感日志数据内容或者突出需要查看的日志数据内容，还可以通过替换原有日志内容进行快速筛选
- 显示列：自定义数据列表显示列

- 设置按钮：设置日志多行查看和导出CSV
- 复制日志内容：使用“鼠标悬停”至日志内容，展开查看日志的全部内容，点击“复制”按钮可把整条日志内容复制到粘贴板。展开时若可以系统会将该条日志JSON格式化，若不可以则正常展示该日志内容

![](../img/6.log_explorer_3.1.png)

### 格式化配置

格式化配置可以让您隐藏敏感日志数据内容或者突出需要查看的日志数据内容，还可以通过替换原有日志内容进行快速筛选。

在查看器的格式化配置，添加映射，输入以下内容，点击保存，即可把含“48043”的原日志内容替换成您想显示的格式。

- 字段：如内容
- 匹配方式：如match（目前支持`=`、`!=`、`match`、`not match`）
- 匹配内容：如48043
- 显示为内容：如xxxxxx

注意：仅管理员及以上可进行查看器格式化配置。

![](../img/5.browser_5.png)



## 编辑查看器

“查看器”可通过点击右侧操作下的按钮进行收藏、修改名称和标签、导出和删除。左侧可通过“过滤”和“标签筛选”对查看器进行分组查看，以便快速获取查询结果。在查看器列表，点击查看器名称，即可编辑查看器。

![](../img/6.log_explorer_1.png)

## 导入/导出/复制查看器

观测云支持复制当前查看器为新的查看器进行编辑；支持导出Json文件为模板，以共享当前查看器的数据监测方案，实现反复使用模板的价值，导出的查看器Json文件可以通过导入新建或者覆盖原先的模板进行编辑。

![](../img/6.log_explorer_7.png)

## 保存快照

观测云支持保存当前日志内容作为快照进行分享。

![](../img/6.log_explorer_8.png)

快照保存以后，可以在查看器左上角点击「快照小图标」查看已经保存的快照列表，支持分享、复制链接和删除快照。

![](../img/6.log_explorer_9.png)

更多详情可参考文档 [快速搭建自定义日志查看器](custom-explorer.md) 。
