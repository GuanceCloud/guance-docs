# 日志索引
---

观测云支持设置日志多索引，筛选符合条件的日志保存在不同的日志索引中，并通过为日志索引选择不同的数据存储策略，帮助用户节约日志数据存储费用。

注意：默认情况下，日志多索引无法设置，需要联系观测云客户经理申请开通此功能。

## 新建索引

在观测云工作空间，点击「日志」-「索引」-「新建索引」。

![](img/1.log_11.png)

在新建索引页面，输入「索引名称」，设置「过滤条件」，选择「数据存储策略」，点击「确定」即可创建一个新的索引。

- 索引名称：自定义索引的名称，索引名称必须唯一，不可修改，且已删除的索引名称不可再创建
- 过滤条件：支持正向筛选、反向筛选、模糊匹配、模糊不匹配、存在、不存在等筛选方式
- 数据存储策略：支持选择 7 天、14 天、30 天 和 60 天

注意：

- 默认情况下，所有日志都存在一个名称为 default 的默认索引中，默认索引不允许修改和删除
- 设置日志多索引以后，日志会流入第一个匹配的索引中，同一条日志不会跨索引重复保存
- 日志多索引包括 default 索引在内，最多存在 3 个，即自定义索引最多能创建 2 个
- 日志多索引设置仅支持「中国区1（杭州）」站点使用
- 标准成员和只读成员只有查看权限，管理员和拥有者可以编辑、删除、拖拽排序

![](img/image_10.png)

### 示例

以下示例中，黑名单设置后，datakit 的日志，满足`status`为`ok 或 info`，且`host`不为`cc-testing-cluster-001`，且`message`中包含`kodo`字样，即同时满足这三个匹配规则的数据将被过滤，不再上报工作空间。

![](img/1.log_13.png)

## 禁用/启用索引





注意：

- 禁用索引后，后续日志不会在进入该索引，会继续匹配流入其他索引进行保存；

- 启用索引后，后续日志会重新进入该索引进行保存。



## 编辑索引

在日志黑名单右侧，点击「编辑」图标，即可编辑已经创建的日志过滤规则。以下示例中，黑名单设置后，datakit 的日志，满足`status`为`ok 或 info`，或者`host`不为`cc-testing-cluster-001`，或者`message`中包含`kodo`字样，即满足这三个匹配规则中任意一个规则的数据将被过滤，不再上报工作空间。

注意：变更存储策略会删除索引中的入职数据，请谨慎操作。

![](img/1.log_12.png)

## 删除索引

在日志黑名单右侧，点击「删除」图标，即可对已有的日志过滤规则进行删除。过滤规则删除后，日志数据将正常上报到工作空间。



注意：删除索引会同时删除该索引中的日志数据，且不能再创建同名称的索引，请谨慎操作。

![](img/1.log_5.png)



## 拖拽索引



注意：日志会流入第一个匹配到的索引中，改变索引顺序可能会导致日志更改流向。
