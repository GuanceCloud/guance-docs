# Operation Audit
---

This feature records operation audit events generated by user actions within a workspace. It can real-time document the usage of projects, user behavior, and resource changes within the workspace. This includes but is not limited to:

1. Workspace management events: such as modifications to basic settings, changes in member permissions, deletion of notification targets, expiration of licenses, etc.;
2. Function and service usage events: such as creating/modifying/deleting views, initiating APM, disabling a detection library, setting host mute periods, generating metrics, etc.;
3. Billing project events: such as approaching free quota limits;
4. ...

![Audit](../img/audit.png)

## Managing Audit Events

Go to **Management > Audit Events** to view all user operation events generated within the workspace.

1. In the list, you can search for and group-aggregate events;
2. Use the time component at the top of the page to view events within different time ranges;
3. Click on settings to directly create monitors from audit events or export the current audit event list as CSV.


### Group Aggregation

Group-aggregate events by operator to view the total number of aggregated events triggered by users on the Guance platform within a specific time range.

![Audit 2](../img/audit_2.png)


#### Group Aggregation Details Page

In group aggregation mode, you can view **Aggregated Events**. On the details page, you can see all audit events triggered by a particular user (operator).

![Audit 3](../img/audit_3.png)

## Audit Event Details

Click on a single event in the operation event list to slide out the event's details page, where you can view the trigger time, label attributes, operator, event content, etc.

![Audit 1](../img/audit_1.png)

You can also use the following fields for custom queries and analysis:

| <div style="width: 140px"> Field Name </div> | Type      | Required | Description |
| ----------- | ---------------- | ----------- | ---------------- |
| `date`	      | Integer      | Yes	      | Generation time, Unix timestamp in ms      |
| `df_date_range`		      | Integer      | Yes	      | Time range in seconds     |
| `df_source`	      | String      | Yes	      | Data source, value for operation events is audit      |
| `df_status`		      | String      | Yes	      | Status, default value for operation events is info      |
| `df_origin`	      | String      | Yes	      | Operation source, used to record the entry point of the current operation.<br />Reference values:<br /><li>front: Front-end user operation <br /><li>openapi: Operation via OpenAPI<br /><li>manage: Operation via management backend<br /><li>inner: Operation via internal trusted system      |
| `df_menu`	      | String      | Yes	      | Menu path accessed by the user, e.g., Logs-Explorer      |
| `df_event_id`		      | String      | Yes	      | Unique event ID      |
| `df_title`		      | String      | Yes	      | Title      |
| `df_message`	      | String      | Yes	      | Description      |
| `df_user_id`		      | String      | Yes	      | User ID      |
| `df_user_name`		      | String      | Yes	      | User name      |
| `df_user_email`	      | String      | Yes	      | User email, corresponding to the id, name, and email in [Member Management]      |
| `df_user_team`		      | String      | Yes	      | Current team of the user      |
| `df_role_scope`		      | String      | Yes	      | Role scope currently owned by the user      |
| `df_operation_id` | String | Yes | Unique ID of the actual operation item corresponding to the current audit |
| `df_operation_name` | String | Yes | The menu name of the operation item that generated the current audit event. For example, if the audit event corresponds to a notification policy operation, this field would be the current notification policy name |
| `df_query_typeDQL` | String | Yes | Query type |
| `df_query` | String | Yes | DQL query |
| `df_query_range` | String | Yes | DQL query duration in ms |
| `df_cost` | String | Yes | DQL query execution time |
| `df_hit_count` | String | Yes | Number of query hits |

## Audit Event Data Storage

Operation audit data is stored according to the event storage policy. You can view and adjust the event storage policy at **Management > Settings > Change Data Storage Policy**.

![Audit 4](img/audit_4.png)

## Further Reading

<font size=2>

<div class="grid cards" markdown>

- [<font color="coral"> :fontawesome-solid-arrow-right-long: &nbsp; **Detailed Logic of Audit Events**</font>](./audit-event.md)

</div>

</font>