# Log Monitoring
---

The log monitoring feature is used to monitor all log data generated by log collectors within the workspace. It supports setting up alert rules based on log keywords to quickly identify abnormal patterns that do not conform to expected behavior, such as abnormal tags appearing in log text. This helps promptly detect and respond to potential security threats or system issues.

## Application Scenarios

It is widely applicable for code exceptions or task scheduling detection in IT monitoring scenarios, such as monitoring excessively high log error rates.

## Monitoring Configuration

![](../img/5.monitor_2.png)

### Monitoring Frequency

This refers to the execution frequency of the monitoring rules; the default is set to 5 minutes.

### Monitoring Interval

This refers to the time range for querying metrics each time a task is executed. Depending on the monitoring frequency, different intervals are available.

| Monitoring Frequency | Monitoring Intervals (Dropdown Options) |
| --- | --- |
| 1m | 1m/5m/15m/30m/1h/3h |
| 5m | 5m/15m/30m/1h/3h |
| 15m | 15m/30m/1h/3h/6h |
| 30m | 30m/1h/3h/6h |
| 1h | 1h/3h/6h/12h/24h |
| 6h | 6h/12h/24h |
| 12h | 12h/24h |
| 24h | 24h |

### Monitoring Metrics

Monitor the number of logs containing specified keywords in the log list of a designated object over a certain period.

| Field | Description |
| --- | --- |
| Index | The index associated with the current monitoring metric.<br />:warning: After setting the index under [**Logs > Index**](../../logs/multi-index/index.md), when selecting "Logs" as the data source for chart queries, you can choose logs from different indices. By default, it selects the `default` index. |
| Source | The data source for the current monitoring metric, supporting selection of all (`*`) or a specific source. |
| Keyword Search | Supports keyword search |
| Filtering Conditions | Filters the monitoring metric data based on labels to limit the scope of monitored data; supports adding one or more label filters; supports fuzzy matching and non-matching filtering conditions. |
| Aggregation Algorithm | Defaults to “*”, corresponding function is `count`. If other fields are selected, the function automatically changes to `count distinct` (counts the number of unique data points where the keyword appears). |
| Monitoring Dimensions | Any string type (`keyword`) fields in the configuration can be chosen as monitoring dimensions, currently supporting up to three fields. By combining multiple dimension fields, a specific monitoring object can be determined. Guance will evaluate whether the statistical metric for a given monitoring object meets the threshold conditions for triggering an event.<br/>* (For example, choosing monitoring dimensions `host` and `host_ip` would result in a monitoring object like `{host: host1, host_ip: 127.0.0.1}`. For log objects, the default monitoring dimensions are `status`, `host`, `service`, `source`, `filename`.) |
| [Query](../../scene/visual-chart/chart-query.md) Method | Supports simple queries and expression queries. If the query method is an expression query involving multiple queries, the monitoring object remains the same. For instance, if expression query A targets "logs," then expression query B also targets "logs."|

### Trigger Conditions

Set the trigger conditions for alert levels: you can configure any one of critical, major, minor, or normal.

Configure trigger conditions and severity levels; if the query results contain multiple values, any value meeting the trigger condition will generate an event.

> For more details, refer to [Event Level Description](event-level-description.md).

If **Continuous Trigger Judgment** is enabled, you can configure how many consecutive times the trigger condition must be met before another event is triggered. The maximum limit is 10 times.


???+ abstract "Alert Levels"

	1. **Alert Levels Critical (Red), Major (Orange), Minor (Yellow)**: Based on configured conditions and operators.
  

	2. **Alert Level Normal (Green)**: Based on configured detection counts, described as follows:

	- Each execution of a detection task counts as 1 detection, e.g., if [Detection Frequency = 5 minutes], then 1 detection = 5 minutes;
	- You can customize the detection count, e.g., if [Detection Frequency = 5 minutes], then 3 detections = 15 minutes.

	| Level | Description |
	| --- | --- |
	| Normal | After the detection rule takes effect, if critical, major, or minor events occur, and the data returns to normal within the configured custom detection count, a recovery alert event is generated.<br/> :warning: Recovery alert events are not subject to [Alert Silencing](../alert-setting.md). If no recovery alert detection count is set, the alert event will not recover and will remain in the [**Events > Unrecovered Events List**](../../events/event-explorer/unrecovered-events.md).|


### Data Gaps

You can configure seven strategies for handling data gaps.

1. In conjunction with the monitoring interval, determine the query results for the most recent minutes of the monitoring metric, **do not trigger an event**;

2. In conjunction with the monitoring interval, determine the query results for the most recent minutes of the monitoring metric, **consider the query results as 0**; at this point, the query results will be compared against the thresholds configured in the **Trigger Conditions**, determining whether to trigger an anomaly event.

3. Customize the filling of monitoring interval values, **trigger data gap events, critical events, major events, minor events, and recovery events**; if this strategy is chosen, it is recommended that the custom data gap time be **>= monitoring interval**. If the configured time <= monitoring interval, both data gaps and anomalies might be met simultaneously, in which case only the data gap handling result will apply.


### Information Generation

Enabling this option writes unmatched detection results as "information" events.

**Note**: When configuring trigger conditions, data gaps, and information generation simultaneously, the following priority applies: data gaps > trigger conditions > information event generation.