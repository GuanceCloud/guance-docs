# Alert Aggregation Notification Template

## Title

> You have {N} {{severity}} alert notifications


## Content

### No Aggregation

> You have N new Guance alerts
>
> 1st / 2nd alert:
>
> Title
>
> Content
>
> <font color=#2F61CC> Go to Workspace </font>
>
> ---
>
> 2nd / 2nd alert:
>
> Title
>
> Content
>
> <font color=#2F61CC> Go to Workspace </font>


- Go to Workspace: Redirects to the Event Explorer to view current events (filter condition: `df_event_id`)

*Diagram:*

<img src="../img/alert-template.png" width="70%" >

### Rule-based Aggregation

#### All

> Associated Events: 123
>
> Aggregation Period: 2023/11/20 10:00 ~ 2023/11/20 10:05
>
> Associated Detection Rules:
>
> - {{Event Title}} <font color=#2F61CC> >>View  </font>

- View: Redirects to the Explorer to view all events generated by the current monitor within the aggregation period (filter condition: `df_monitor_checker_id`)

*Diagram:*

<img src="../img/alert-template-1.png" width="70%" >

#### Detection Rule - Monitor

> Detection Type: Monitor
>
> Detection Rule Name: {{Host}} CPU exceeds {Result}%
>
> Detection Rule ID: rule_cdbkjcbsdjcb1234445455
>
> Associated Events: 123
>
> Aggregation Period: 2023/11/20 10:00 ~ 2023/11/20 10:05
>
> <font color=#2F61CC> Go to Workspace </font>

- Redirects to the Explorer to view associated events of the current monitor (filter condition: `df_monitor_checker_id`)

*Diagram:*

<img src="../img/alert-template-2.png" width="70%" >


#### Detection Rule - Smart Check

> Detection Type: Smart Check
>
> Detection Rule Name: {{Host}} CPU exceeds {Result}%
>
> Detection Rule ID: rule_cdbkjcbsdjcb1234445455
>
> Associated Events: 123
>
> Aggregation Period: 2023/11/20 10:00 ~ 2023/11/20 10:05
>
> <font color=#2F61CC> Go to Workspace </font>

- Redirects to the Explorer to view associated events of the current smart check rule (filter condition: `df_monitor_checker_id`)

*Diagram:*

<img src="../img/alert-template-3.png" width="70%" >

#### Detection Rule - SLO

> Detection Type: SLO
>
> Detection Rule Name: {{Host}} CPU exceeds {Result}%
>
> Detection Rule ID: rule_cdbkjcbsdjcb1234445455
>
> Associated Events: 123
>
> Aggregation Period: 2023/11/20 10:00 ~ 2023/11/20 10:05
>
> <font color=#2F61CC> Go to Workspace </font>

- Redirects to the Explorer to view associated events of the current SLO (filter condition: `df_monitor_checker_id`)

*Diagram:*

<img src="../img/alert-template-3.png" width="70%" >

#### Detection Dimensions

> Detection Dimensions: service:kodo,host:test
>
> Associated Events: 123
>
> Aggregation Period: 2023/11/20 10:00 ~ 2023/11/20 10:05
>
> Associated Detection Rules:
>
> - {{Event Title}} <font color=#2F61CC> >>View  </font>

*Diagram:*

<img src="../img/alert-template-4.png" width="70%" >

#### Tags

> Tags: service:kodo,host:test
>
> Associated Events: 123
>
> Aggregation Period: 2023/11/20 10:00 ~ 2023/11/20 10:05
>
> Associated Detection Rules:
>
> - {{Event Title}} <font color=#2F61CC> >>View  </font>

- Redirects to the Explorer to view associated events of the current detection rule (filter condition: `df_monitor_checker_id`)

*Diagram:*

<img src="../img/alert-template-5.png" width="70%" >

### Intelligent Aggregation

#### Title Clustering

> Title: {{Host}} CPU exceeds {Result}%
>
> Associated Events: 123
>
> Aggregation Period: 2023/11/20 10:00 ~ 2023/11/20 10:05
>
> Associated Detection Rules:
>
> - {{Event Title}} <font color=#2F61CC> >>View  </font>

- Redirects to the Explorer to view all events generated by the current detection rule within the aggregation period (filter condition: `df_monitor_checker_id`)

*Diagram:*

<img src="../img/alert-template-6.png" width="70%" >

#### Content Clustering

> Title: {{Host}} CPU exceeds {Result}%
>
> Associated Events: 123
>
> Aggregation Period: 2023/11/20 10:00 ~ 2023/11/20 10:05
>
> Associated Detection Rules:
>
> - {{Event Title}} <font color=#2F61CC> >>View  </font>

- Redirects to the Explorer to view all events generated by the current detection rule within the aggregation period (filter condition: `df_monitor_checker_id`)

*Diagram:*

<img src="../img/alert-template-7.png" width="70%" >

### AI Aggregation

> Title: Summary of the alert information.

> Handling Suggestions: Recommendations for handling the current alert.
        
> {xxx related} Alert Aggregation: "summary": "Multiple hosts experienced CPU and memory anomalies, with the highest anomaly value being 98% (host 172.16.200.108). Host 1
        
> Related Detection Rules: df_monitor_checker_ids: Involved monitors (rule IDs).
        
> {xxx related} Alert Aggregation: "summary": "Multiple hosts experienced CPU and memory anomalies, with the highest anomaly value being 98% (host 172.16.200.108). Host 1
        
> Related Detection Rules: df_monitor_checker_ids: Involved monitors (rule IDs).

Example:

```
Title: During the aggregation period, a total of 3 monitors triggered alert events, generating 19 alert notifications.

Handling Suggestions: Prioritize high-frequency alert hosts, such as host 172.16.200.101 involving CPU anomalies, memory anomalies, and communication issues, requiring comprehensive inspection. Check alert correlations; multiple monitors (rule IDs) involve host resources (CPU, memory) and module communications, possibly indicating systematic issues. Optimize monitoring strategies to reduce repeated alerts in short periods and apply alert noise reduction based on time windows.

Host-related Alert Aggregation: Multiple hosts experienced CPU and memory anomalies, with the highest anomaly value being 98% (host 172.16.200.108). Host 172.16.200.101 simultaneously triggered CPU and memory alerts, requiring focused inspection.
        
Related Detection Rules: title view("rul_e68e2d5e620b40c691128a399de3f479")
        
Application-related Alert Aggregation: Multiple hosts experienced CPU and memory anomalies, with the highest anomaly value being 98% (host 172.16.200.108). Host 172.16.200.101 simultaneously triggered CPU and memory alerts, requiring focused inspection.
        
Related Detection Rules: title view("rul_e68e2d5e620b40c691128a399de3f479")

```

*Diagram:*

<img src="../img/alert-template-8.png" width="70%" >