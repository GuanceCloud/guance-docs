# Android Application Data Collection
---

After collecting application data to Guance, you can perform custom configuration scenarios and configure anomaly detection events through the Guance console.

## Data Types

Guance's RUM includes six data types:

| **Type** | **Description** |
| --- | --- |
| session | User session information records. During the current session, data related to user pages, resources, actions, errors, and long tasks will be recorded based on the session dimension. |
| view | A view record is generated each time a user visits a page in the mobile application. When a user stays on the same page, resource, long task, error, and action logs are linked to the relevant RUM view via the `view_id` attribute. |
| resource | Records of resources loaded when the user accesses a page. |
| error | Exceptions or crashes issued by the mobile application. |
| long_task | A long task event is generated for any task in the application that blocks the main thread for longer than a specified duration threshold. |
| action | Records user activities within the mobile application (such as app launches, clicks, swipes, back actions). Each action is attached with a unique `action_id`. |

## Global Attributes

Scenarios for RUM and event alerts can be queried using the following global attributes.

### SDK Attributes

| **Field** | **Type** | **Description** |
| --- | --- | --- |
| `sdk_name` | string | Collector name, fixed names:<br>`df_macos_rum_sdk`<br>`df_linux_rum_sdk`<br>`df_windows_rum_sdk`<br>`df_web_rum_sdk`<br>`df_miniapp_rum_sdk`<br>`df_ios_rum_sdk`<br>`df_android_rum_sdk` |
| `sdk_version` | string | Collector version information |

### Application Attributes

| **Field** | **Type** | Description |
| --- | --- | --- |
| `app_id` | string | Required, unique ID for user access applications, auto-generated when creating monitoring in the Guance console. |
| `env` | string | Required, environment field. Possible values: prod/gray/pre/common/local. Where:<br>prod: production environment<br>gray: gray release environment<br>pre: pre-release environment<br>common: daily environment<br>local: local environment |
| `version` | string | Required, version number. |
| `service` | string | Optional, name of the associated business or service. Fixed names:<br/>`df_rum_ios`<br/>`df_rum_android`<br/>`df_rum_windows`<br/>`df_rum_linux` |

### User & Session Attributes

| **Field** | **Type** | **Description** |
| --- | --- | --- |
| `userid` | string | For unlogged users, a random UUID is used as `userid`; for logged-in users, the user ID generated by the application backend is used. |
| `user_name` | string | Optional, user name. |
| `user_email` | string | Optional, user email. |
| `session_id` | string | Session ID, a new `session_id` is generated if there has been no activity for more than 15 minutes. |
| `session_type` | string | Session type. Reference values: user & synthetics<br>user: data generated by RUM functionality;<br>synthetics: data generated by headless dial testing. |
| `is_signin` | boolean | Whether it is a registered user, attribute values: T & F. |

### Device & Resolution Attributes

| **Field**           | **Type** | **Description**         |
| :----------------- | :------- | :--------------- |
| `device`           | string   | Mobile device manufacturer     |
| `model`            | string   | Mobile device model     |
| `device_uuid`      | string   | Unique ID of the mobile device. Generated using [ANDROID_ID](https://developer.android.com/reference/android/provider/Settings.Secure.html#ANDROID_ID) |
| `os`               | string   | Operating system information     |
| `os_version`       | string   | Operating system version     |
| `os_version_major` | string   | Major operating system version |
| `screen_size`      | string   | Screen resolution       |

### Geographic & Network Attributes

| **Field**           | **Type** | **Description**                                                     |
| ------------------ | -------- | ------------------------------------------------------------ |
| `ip`               | string   | User access IP address                                               |
| `isp`              | string   | Carrier                                                       |
| `network_type`     | string   | Network connection type, reference values:<br>wifi & 2g & 3g & 4g & 5g & unknown (unknown network) & unreachable (unavailable network) |
| `country`          | string   | Country                                                         |
| `country_iso_code` | string   | ISO code of the country                                                |
| `province`         | string   | Province                                                           |
| `city`             | string   | City                                                         |

## Custom Attributes

In addition to global attributes, custom attributes (supported by the SDK for tagging custom data) can be used to build scenarios and configure event alerts. Custom attributes are non-global properties that allow tracking the entire process of user access to the application, identifying and discovering affected user sessions, and monitoring user access performance.

## Other Data Type Attributes

### Session 

#### Attributes

| **Field**                      | **Type**   | **Description**                                                        |
| ------------------------- | ------ | ------------------------------------------------------------ |
| `session_id`              | string | Session ID          |
| `session_type`            | string | Session type. Reference values: user & test<br>user: data generated by RUM functionality;<br>test: data generated by headless dial testing. |
| `session_referrer`        | string | Session source, usually recording the source page URL.                         |
| `session_first_view_id`   | string | The `view_id` of the first page in the current session                                |
| `session_first_view_name` | string | The URL of the first page in the current session                                    |
| `session_last_view_id`    | string | The `view_id` of the last visited page in the current session                          |
| `session_last_view_name`  | string | The URL of the last page in the current session                                  |

#### Metrics

| **Field** | **Type** | **Description** |
| --- | --- | --- |
| `time_spent` | number(ns) | Duration of the current session |
| `session_view_count` | number | Number of `view_id` associated with the current session |
| `session_error_count` | number | Number of errors generated during the current session |
| `session_resource_count` | number | Number of resources loaded during the current session |
| `session_action_count` | number | Number of user actions during the current session |
| `session_long_task_count` | number     | Number of long tasks generated during the current session  |

### View 

#### Attributes

| **Field**        | **Type** | **Description**                                            |
| --------------- | -------- | --------------------------------------------------- |
| `view_id`       | string   | Unique ID generated each time a page is visited                          |
| `view_referrer` | string   | Parent page, source of the page                                |
| `view_name`     | string   | Page name                                            |

#### Metrics

| **Field** | **Type** | **Description**   |
| --- | --- | --- |
| `loading_time` | number(ns) | Page loading time |
| `time_spent` | number(ns) | Time spent on the page |
| `is_active`     | boolean  | Whether the user is still active, reference values: true & false |

#### Statistics

| **Field** | **Type** | **Description** |
| --- | --- | --- |
| `view_error_count` | number | Number of errors that occurred during each page load |
| `view_resource_count` | number | Number of resources requested during each page load |
| `view_long_task_count` | number | Number of long tasks generated during each page load |
| `view_action_count` | number | Number of operations performed during the page view |

#### Monitoring Metrics

| **Field**                    | **Type** | **Description**                 |
| --------------------------- | -------- | ------------------------ |
| `cpu_tick_count`            | number   | Optional, CPU ticks count for the page    |
| `cpu_tick_count_per_second` | number   | Optional, average CPU ticks per second  |
| `fps_avg`                   | number   | Optional, average frames per second   |
| `fps_mini`                  | number   | Optional, minimum frames per second   |
| `memory_avg`                | number   | Optional, average memory usage |
| `memory_max`                | number   | Optional, peak memory usage       |
| `battery_current_avg `                | number   | Optional, average battery current |
| `battery_current_max `                | number   | Optional, maximum battery current |

### Resource

#### View Attributes

| **Field**        | **Type** | **Description**                   |
| --------------- | -------- | -------------------------- |
| `view_id`       | string   | Unique ID generated each time a page is visited |
| `view_referrer` | string   | Parent page, source of the page       |
| `view_name`     | string   | Page name                   |

#### Action Attributes

| **Field**      | **Type** | **Description**                            |
| ------------- | -------- | ----------------------------------- |
| `action_id`   | string   | Unique ID generated when a user performs an action on the page          |
| `action_name` | string   | Action name                            |
| `action_type` | string   | Action type (cold/hot start, click, etc.) |

#### Resource Attributes

| **Field**                  | **Type** | **Description**                 |
| ------------------------- | -------- | ------------------------ |
| `resource_url`            | string   | Resource URL                  |
| `resource_url_host`       | string   | Domain part of the resource URL         |
| `resource_url_path`       | string   | Path part of the resource URL         |
| `resource_url_query`      | string   | Query part of the resource URL        |
| `resource_url_path_group` | string   | Grouped path part of the resource URL         |
| `resource_type`           | string   | Category of the resource               |
| `resource_method`         | string   | Request method for the resource             |
| `resource_status`         | string   | Status value returned by the resource request     |
| `resource_status_group`   | string   | Grouped status value returned by the resource request |
| `resource_host_ip`   | string   | Target IP address of the resource URL |

#### Metrics

| **Field** | **Type** | **Description** |
| --- | --- | --- |
| `resource_size` | number | Size of the resource, default unit: byte |
| `resource_dns` | number(ns) | DNS resolution time for resource loading<br>Calculation: domainLookupEnd - domainLookupStart |
| `resource_tcp` | number(ns) | TCP connection time for resource loading<br>Calculation: connectEnd - connectStart |
| `resource_ssl` | number(ns) | SSL connection time for resource loading<br>Calculation: connectEnd - secureConnectStart |
| `resource_ttfb` | number(ns) | Response time for resource loading<br>Calculation: responseStart - requestStart |
| `resource_trans` | number(ns) | Content transfer time for resource loading<br>Calculation: responseEnd - responseStart |
| `resource_first_byte` | number(ns) | First byte time for resource loading<br>Calculation: responseStart - domainLookupStart |
| `duration` | number(ns) | Total loading time for the resource<br>Calculation: duration(responseEnd-startTime) |
| `request_header` | string | Request headers for the resource |
| `response_header` | string | Response headers for the resource |

### Error

#### View Attributes

| **Field**        | **Type** | **Description**                                        |
| :-------------- | :------- | :---------------------------------------------- |
| `view_id`       | string   | Unique ID generated each time a page is visited                      |
| `view_referrer` | string   | Parent page, source of the page                            |
| `view_name`     | string   | Page name                                        |

#### Action Attributes

| **Field**      | **Type** | **Description**                            |
| ------------- | -------- | ----------------------------------- |
| `action_id`   | string   | Unique ID generated when a user performs an action on the page          |
| `action_name` | string   | Action name                            |
| `action_type` | string   | Action type (cold/hot start, click, etc.) |

#### Error Attributes

| **Field** | **Type** | **Description** |
| --- | --- | --- |
| `error_source` | string | Source of the error, reference values: logger &#124; network |
| `error_type` | string | Type of error<br>logger error type: java_crash &#124; native_crash &#124; anr_error &#124; anr_crash <br>network error typeï¼šnetwork_error |
| `error_situation` | string | Timing of the error occurrence, reference values: startup (during startup) and run (during runtime) |

**When `type=network`, the following Network Error attributes are added.**

| **Field** | **Type** | **Description** |
| --- | --- | --- |
| `resource_status` | string | Status value returned by the resource request |
| `resource_url` | string | Resource URL |
| `resource_url_host` | string | Domain part of the resource URL |
| `resource_url_path` | string | Path part of the resource URL |
| `resource_url_path_group` | string | Grouped path part of the resource URL |
| `resource_method` | string | Request method for the resource |

#### Error Monitoring Attributes

| **Field**       | **Type** | **Description**                 |
| -------------- | -------- | ------------------------ |
| `memory_total` | string   | Optional, total memory           |
| `memory_use`   | number   | Optional, memory usage rate         |
| `cpu_use`      | number   | Optional, CPU usage rate         |
| `battery_use`  | number   | Optional, current battery level |
| `locale`       | string   | Current system language         |

#### Metrics

| **Field**        | **Type** | **Description** |
| --------------- | -------- | -------- |
| `error_message` | string   | Error message |
| `error_stack`   | string   | Error stack trace |

### Long Task

#### View Attributes

| **Field**        | **Type** | **Description**                   |
| --------------- | -------- | -------------------------- |
| `view_id`       | string   | Unique ID generated each time a page is visited |
| `view_referrer` | string   | Parent page, source of the page       |
| `view_name`     | string   | Page name                   |

#### Action Attributes

| **Field**      | **Type** | **Description**                            |
| ------------- | -------- | ----------------------------------- |
| `action_id`   | string   | Unique ID generated when a user performs an action on the page          |
| `action_name` | string   | Action name                            |
| `action_type` | string   | Action type (cold/hot start, click, etc.) |

#### Metrics

| **Field** | **Type** | **Description** |
| --- | --- | --- |
| `duration` | number(ns) | Duration of the freeze |
| `long_task_message` | string | Freeze information |
| `long_task_stack` | string | Freeze stack trace |

### Action

#### View Attributes

| **Field**        | **Type** | **Description**                   |
| --------------- | -------- | -------------------------- |
| `view_id`       | string   | Unique ID generated each time a page is visited |
| `view_referrer` | string   | Parent page, source of the page       |
| `view_name`     | string   | Page name                   |

#### Action Attributes

| **Field**      | **Type** | **Description**                            |
| ------------- | -------- | ----------------------------------- |
| `action_id`   | string   | Unique ID generated when a user performs an action on the page          |
| `action_name` | string   | Action name                            |
| `action_type` | string   | Action type (cold/hot start, click, etc.) |

#### Metrics

| **Field** | **Type** | **Description** |
| --- | --- | --- |
| `duration` | number(ns) | Time taken for the page action |

#### Statistics

| **Field** | **Type** | **Description** |
| --- | --- | --- |
| `action_long_task_count` | number | Number of long tasks associated with the action |
| `action_resource_count` | number | Number of resource requests associated with the action |
| `action_error_count` | number | Number of errors associated with the action |