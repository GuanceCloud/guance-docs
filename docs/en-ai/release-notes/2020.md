# Changelog (2020)
---

This document records the update content of each release of Guance, including DataKit, Guance best practices, Guance integration documents, and Guance.

## December 29, 2020

### DataFlux Studio

- Added built-in views
- Added new chart type: Image
- Added support for stacked bar charts and percentage stacked bar charts in bar charts
- Added unit conversion: Traffic, Bandwidth, Timestamps
- Optimized the data gateway page, added an option to enable host monitoring
- Optimized DQL queries, DQL functions, and DQL command-line client
- Optimized chart query methods, supporting normal queries, expression queries, and DQL queries
- Optimized view variable management, supporting DQL queries
- Optimized preview/edit view, adding chart interaction
- Optimized scenario creation, supporting creation based on view templates
- Optimized object monitoring views, supporting binding views
- Relationship diagrams can be saved as charts, with improved drawing interactions
- Optimized node tree click interactions

### DataKit

- Added WeChat Mini Program application monitoring data collection
- Added default host monitoring configuration file

## December 15, 2020

### DataFlux Studio

- Added RUM application monitoring module, supporting Web, iOS, Android application monitoring
- Added DQL query, supporting remote CLI
- Added composite chart, supporting up to 5 chart combinations
- Added Top List chart, supporting bar chart and table chart display types
- Added chart links, supporting line chart, pie chart, bar chart, table chart navigation from current page to target page
- Added chart title descriptions
- Added map chart top 5 Top List and ascending/descending sorting
- Optimized scatter plot, added bubble chart, supporting the use of point size to represent data size

### DataKit

- Added Web, iOS, Android application monitoring data collection

## November 26, 2020

### DataFlux Studio

- Adjusted billing model to pay-as-you-go
- Added usage statistics module for viewing version information and usage of chargeable items
- Added object addition functionality, supporting resource catalog attributes and tags
- Added relationship diagram function to objects
- Added quick filtering for logs, events, and traces, supporting user-defined tags
- Added billing-related landing pages to the official website

### DataKit

- Added data collection for Alibaba Cloud, Tencent Cloud, Huawei Cloud, Docker container objects

## November 5, 2020

### DataFlux Studio

- Time component added relative time selection and data refresh time adjustment
- Supported setting different time ranges for different views
- Added tag filtering for objects and traces, allowing data filtering
- Added two new chart types: Object list chart, alert statistics chart
- Log stream chart added unit settings and display column addition functionality
- Added metric query copy functionality
- Anomaly detection added log detection
- Optimized event page data loading speed
- Optimized several interactions and front-end interfaces, enhancing user experience

## October 15, 2020

### DataFlux Studio

- Optimized detail pages for logs, events, and objects, providing clearer and more intuitive detailed information
- View variables added search functionality
- Added chart copy functionality, supporting copying charts and pasting them into any scenario
- Adjusted object data structure
- Fixed several style issues, improving chart loading speed

### DataKit

- Optimized CSV/Excel metric collection
- Added Huawei Cloud cloud monitoring metrics, TiDB metrics collection

## September 22, 2020

### DataFlux Studio

- Added "Dark Mode" theme

## September 17, 2020

### DataFlux Studio

- Objects added monitoring view functionality, used for IT infrastructure monitoring
- Added view variables for object types

## September 8, 2020

### DataFlux Studio

- Added metric search functionality
- Added breadcrumb functionality
- Optimized several interactions and front-end interfaces, enhancing user experience
- Fixed discovered bugs

## August 20, 2020

### DataFlux Studio

- Optimized scenario creation process, adjusting node tree display effects
- Optimized new node creation process and page UI
- View templates added source configuration functionality, supporting automatic generation of source configurations by importing template files.
- Added one new chart type: Honeycomb chart
- Fixed discovered bugs

## August 6, 2020

### DataFlux Studio

- "Trace Analysis" added service map functionality, displaying service call relationships
- "Logs", "Objects", and "Traces" added list setting functionality, supporting custom display columns and column names; added display setting functionality, supporting hiding "filter bar" and "statistics chart"
- Added ticketing functionality, allowing users to submit tickets for questions and suggestions encountered during use

### DataKit

- Added 15 data sources: ASP .NET, .NET CLR, Druid, Envoy, Ansible, Kibana, Microsoft Exchange Server, ModBus, MQTT Consumer, Nfsstat, Puppet Agent, systemd_utils, Kong monitoring metrics, WeChat Mini Program operation metrics, AWS CloudWatch logs and event collection

## July 16, 2020

### DataFlux Studio

- Adjusted left navigation menu, adding log, trace analysis, object function modules
- Added log collection and management functionality, supporting "extract labels" and "generate metrics" based on log data
- Added trace analysis functionality for analyzing and managing trace data, suitable for APM monitoring
- Added object collection and analysis functionality, supporting manual addition of objects
- "Critical Events" renamed to **Events**, restructured business logic, adjusted display interface, supporting aggregation of related events; supporting display of related metrics line charts triggered by events; supporting creating new events based on charts in analysis mode
- Scenarios added 4 view categories: "Log Views", "Event Views", "Trace Views", and "Object Views", supporting saving logs, events, traces, and objects to corresponding views for querying and analysis
- Added tag association analysis functionality. Supports querying related metrics, logs, objects, events, and traces based on tags
- "Metric Browser" renamed to "Metrics", added tile mode, supporting simultaneous viewing of multiple metrics line charts
- "Trigger" renamed to "Anomaly Detection", adjusted "Basic Detection" to "Threshold Detection", "Advanced Detection" to "Custom Detection Function", and added four anomaly detection types: Event Detection, Mutation Detection, Interval Detection, Water Level Detection
- Removed "Trigger History" module, alert history data will be directly saved to **Events**
- Added a new chart type: Log Stream Chart, supporting adding log data tables to views
- In Metric Query UI mode, added InfluxDB's built-in transformation functions
- Added 5 view templates: etcd monitoring view, CoreDNS monitoring view, Traefik monitoring view, Hadoop monitoring view, Raspberry Pi (Raspberry Pi) monitoring view
- Other optimizations and adjustments
- Optimized navigation menu collapse/expand styles
- Integration page added verification status indicators, including "Verified" and "Beta" states
- Optimized derived node sorting method, defaulting to alphabetical order by node name
- Optimized several interface UI designs, added hover display effects for view charts
- SaaS version user registration added enterprise/team information

### DataFlux Admin Console

- Adjusted DataWay gateway usage logic, moved DataWay installation to the admin console, all workspace members can use it
- Supported setting different data retention durations for different types

### DataKit

- DataKit added 15 data sources: Containerd, GitLab, Yarn, Harbor, Tailf, Rsyslog, Jira, AWS CloudWatch Log, Raspberry Pi (Raspberry Pi), Go runtime metrics, Neo4j monitoring metrics, directory monitoring metrics, Alibaba Cloud security metrics, Baidu Index, and host object data collection
- DataKit supported collecting trace data through Zipkin and Jaeger
- Adjusted DataKit installation commands, supporting more platforms and offline installation
- Adjusted some fields in certain DataKit collectors, not recommended to copy original conf.d directory to new collectors
- Organized DataKit configuration file directory structure and default installation path

### DataWay

- DataWay added interfaces for writing log data and object data, while adjusting the event data write interface

## May 7, 2020

### DataFlux Studio

- Charts added scatter plots, displaying data distribution
- Metric Browser's "Mearsurement" added "Configure Automatic Aggregation Rules" functionality, supporting automatic down-sampling of collected metrics according to predefined aggregation rules
- Removed dataset mode from views, optimized metric browsing interaction, added table mode viewing in metric browsing
- Optimized integration component display effects
- Fixed bugs where users would automatically log out after logging in for a period of time, and certain label filter conditions were not saved when creating queries, among other bugs, improving product usability

### DataFlux Admin Console

- Workspace added data warehouse configuration, supporting synchronization of specified Mearsurements to data warehouses
- Workspace supported configuring automatic aggregation of Mearsurements on/off

### DataFlux f(x)

- Updated "DataFlux.f(x) Package Learning" to the latest version
- Authorization link GET access supports flat form (?kwargs_key=value) and simplified form (?key=value)

## April 29, 2020

### Data Collection

- DataKit added 6 data sources: Oracle monitoring metrics, CoreDNS, uWSGI, Traefik, Solr, and Alibaba Cloud RDS slow query logs. Added monitoring metrics collection for Express projects
- Added four view templates: Self-built MySQL monitoring, Alibaba Cloud PolarDB MySQL monitoring, Alibaba Cloud PolarDB PostgreSQL monitoring, Alibaba Cloud RDS for PostgreSQL monitoring; optimized two view templates: MySQL monitoring, PostgreSQL monitoring

## April 21, 2020

### DataFlux Studio

- Added a new chart type: Custom Chart, supporting drawing charts based on custom background images
- Basic charts added "Auto Align Time Intervals" functionality. The system calculates time intervals based on selected time range and aggregation time, dynamically adjusting queries to the nearest preset time interval (including 1 minute, 5 minutes, 10 minutes, 30 minutes, 1 hour, etc.)
- Charts added adaptive view window functionality. When only one chart exists in a view, supports selecting "Fill View" to make the chart adapt to the entire view window
- Adding nodes allows specifying Mearsurement and node icons for derived nodes
- Adjusted left navigation bar classification and naming
- Basic settings support viewing the current workspace version
- Adjusted SAAS version data gateway interface
- Fixed several bugs, improving system stability

### DataKit (`v1.0.0-109-g13b2ced`)

- Added timezone, StatsD, SSH, lighttpd, etcd, and Alibaba Cloud pricing six data sources
- Supported CentOS 6.7 and Ubuntu 14.04 or later operating systems
- DataKit supported cascading and Lua script cleaning

## April 14, 2020

### DataFlux Studio

- DataFlux online added product version restrictions, all newly created workspaces default to Free Plan (Time Series 500 entries, data retention 1 day, trigger rule count 1, trigger rule validity 7 days)
- Restructured and optimized the underlying logic of triggers; trigger rules now support customizing downtime alert message content, added advanced detection functionality, supporting development of advanced detection functions on the DataFlux f(x) platform
- Optimized chart loading speed and SQL queries
- Fixed issues with chart aliases and color display
- Fixed issues with deleting Mearsurements
- Fixed issues with querying data containing English periods in Mearsurement names

### DataFlux Admin Console

- Adjusted "Add Workspace" logic, removed "Select Existing Database" and "Set Data Permissions" features, all new workspaces automatically create new databases
- New workspaces support setting "data retention duration" and "trigger history retention duration"

### DataFlux.f(x)

- Added official script library online update functionality, no longer needing to export and import official scripts
- Official script library added basic detection support (requires installing the latest official library)
- Editor uses monospaced font, ensuring 1 Chinese character equals 2 English characters in width
- Fixed known issues and improved system stability

### DataWay (V1.0.1-401-ga917b59)

- Lua module MongoDB/Redis/MySQL added connection pool functionality (enabled by default)
- Removed correctness validation for $flow_, $alert metrics
- **DataWay added data reporting security authentication mechanism, all deployed DataWays must be upgraded, otherwise they cannot continue to be used**

## April 3, 2020

- Line charts, bar charts, pie charts' "Settings" support setting colors, and support setting colors for different groups after grouping
- Chart settings support customizing metric units
- Fixed Safari compatibility issues
- Optimized side navigation bar

## March 31, 2020

### DataFlux Studio

- Help Center added search functionality, supporting quick keyword targeting
- Scenario nodes added sharing functionality, supporting viewing share history, editing shares, canceling shares, and viewing share QR codes
- Baseline functionality adjusted, moving "Baseline" from "Query" and "Anomaly Detection" to "Line Chart" and "Bar Chart" settings
- "Metric Browser" supports viewing Mearsurement "Data Types"
- Added 37 view templates for IT operations scenarios
- Adjusted chart query rules and UI styles, supporting multiple field selections for one Mearsurement and nested aggregation functions
- Optimized scenario node tree, recording expanded state selection; fixed selection issues
- Optimized left navigation bar, supporting collapsed display, increasing chart visualization area
- Optimized "Custom SQL" functionality in metric queries, supporting point limit and time limit returns
- Optimized tag key, tag value, Mearsurement, fieldkey query performance issues

### DataFlux Mobile

- Added "Service Agreement" confirmation feature, requiring agreement before using the app
- Added node import functionality, supporting direct viewing of node charts

### Data Collection

- Added PostgreSQL, MongoDB, network packet capture (pcap), and Alibaba Cloud CDN four data sources

## March 16, 2020

### DataFlux Studio

- Supported users exiting workspaces; administrators can dissolve workspaces
- In chart analysis mode, line charts support adjusting query conditions; support critical events aggregated by time display; support critical event list display
- Added overview chart, line chart, bar chart year-over-year comparison functionality
- Added two chart types: China Map, World Map
- In new charts, aliases support formatted display, including "Only Display Group Name", "Only Display Metric Name", etc.
- Creating child nodes does not require inheriting parent node tag filters
- Supported locking chart time ranges, not affected by global time ranges
- Optimized table charts, supporting group-based query displays
- DataFlux now supports Warehouse functionality
- Fixed issues with pie chart, table chart aggregation modes, dashboard, and bar chart grouping modes incorrectly querying data
- Optimized integration component filtering methods
- Fixed bug where trigger rules sometimes did not generate trigger history

### DataFlux Admin Console

- Adding workspaces supports "Automatically Create New Database" and "Select Existing Database" options
- Optimized default workspace names, unified to [Username]'s Workspace

### DataFlux.f(x)

- "Simple Debugging Panel" now supports built-in DataWay browsing workspace lists
- "Script List" added "Quick Preview Panel", allowing viewing another script code while editing a script
- "DataWay Operation Object" now supports specifying Token for data writes
- "Script Editor" no longer allows multiple windows to edit the same script
- "@DFF.API" now supports cagetory='check' option, indicating check functions
- Fixed known issues and improved system stability

### Data Collection

- Added 5 new DataWay APIs: `/v1/config`, `/v1/reload`, `/v1/lua`, `/v1/lua/list`, `/v1/license`
- Optimized `/v1/write/metrics` API functionality
- DataWay upgrade now supports merging old and new configuration files. Including `remote_host`, `collect_second`, `lua_worker`, `access_key`, `secret_key` parameters that can be passed via command line
- DataWay installation added two parameter supports: DW_ENABLE_CONFIG_API and DW_CONFIG_PASSWORD, respectively allowing config API to be enabled and setting config API password. If config API is enabled without specifying a password, installation will fail
- Adjusted DataWay Cache cleanup behavior: limited single cleanup quantity, increased cleanup frequency
- All Lua files are now placed under <DataWay Installation Directory>/lua, old versions need manual migration, necessary route configurations may need changes
- No longer supports absolute path Lua configurations, if configured in old versions, manual handling is required
- DataKit allows specifying token via X-Token header to send data to public DataWay

## March 13, 2020

### Data Collection

- Added DataWay Android SDK, DataWay iOS SDK, DataWay Python SDK, DataWay JavaScript SDK

## March 11, 2020

### Data Collection

- DataKit (`v1.0.0-44-gaa4a656`) added support for Azure Monitor, Zabbix, Prometheus Exporter, NSQ monitoring metrics, network port scanning, Kubernetes monitoring data, GitHub, and Java middleware (Cassandra, Hadoop-HDFS, Java JVM, JBoss, Kafka, Tomcat, Weblogic, BitBucket) monitoring data collection
- DataWay added support for Logstash, Prometheus data collector
- Released CSV data collector
- Added Oracle data collection support

## March 5, 2020

### DataFlux Studio

- Mearsurement supports deletion

### DataFlux Admin Console

- Backend account addition for administrator accounts and member accounts added password strength requirements

## February 28, 2020

### DataFlux Studio

- Chart queries added custom function mode, supporting custom query functions developed using DataFlux.f(x)
- View variables added sorting functionality, supporting sorting and previewing variable values when creating and modifying view variables
- Optimized SQL mode, supporting direct mapping of UI mode to SQL mode, adding execution button and error feedback
- Optimized chart query function interaction experience, adding function description prompts
- Optimized overview chart value selection, supporting aggregation algorithm selection
- Fixed issue with null data in table charts not displaying on the interface
- Fixed issue with bar chart top settings sorting incorrectly

### DataFlux Admin Console

- Management backend account added role functionality, divided into administrator and developer roles, developers can only log into the DataFlux.f(x) platform

### DataFlux.f(x)

- Added data source structure browser
- Code editor can switch between published, editing, and DIFF views
- Enhanced UI/API asynchronous call support
- Added query function support (category=query)
- Updated built-in official script package
- Fixed known issues and improved system stability

### Data Collection

- DataKit added Alibaba Cloud Log Service (SLS) data collection, Alibaba Cloud ActionTrail data collection, Kafka Consumer data collection, route tracing metrics collection, Kubernetes monitoring metrics, Kube Inventory monitoring metrics collection, HTTP performance metrics collection
- Added Oracle data collection support
- DataWay compatible with DataX data synchronization tool

## February 20, 2020

### DataFlux Studio

- Added command component, supporting creation and settings of command components in charts
- Optimized chart addition interaction and chart categorization, including basic charts and advanced charts
- Added PNG image export functionality for charts
- Overview chart added mapping functionality
- Integration added scenario category filtering
- When adding/modifying scenarios, supports setting scenario data range
- Optimized chart data display, retaining two decimal places for all float type data
- Supported adding custom icons to nodes
- Trigger rules' trigger actions added action function triggers
- Added DataFlux EBA Agent Builder, which can package and generate dedicated collectors for enterprise behavior analysis scenarios
- System deployment supports configuring Continuous Query rules for metric down-sampling

### DataKit

- Added support for agent configuration
- Fixed bugs related to Alibaba Cloud fee collection
- Optimized collection and reporting performance

## February 15, 2020

### DataFlux Studio

- Fixed occasional white screen issue in views
- Fixed issue with prediction functions unable to input custom parameters in analysis mode
- Fixed issue with bar charts not displaying in SQL mode
- Fixed issue with private deployment version generated scenario QR codes not scannable on mobile devices
- Fixed issues with previous and next page buttons not clickable, refreshing returning to first page, duplicate data being hidden, and pagination not displayed when data is empty after pagination

### DataFlux.f(x)

- Script editor added read-only mode, entering edit mode only after clicking start editing
- Fixed issue with API interface failure when script function returned non-standard JSON
- Fixed text and display issues, added page prompts

## February 10, 2020

- Added scenario templates, supporting creation based on templates, existing scenarios can be exported as templates
- Scenarios support sharing, sharable via DataFlux APP or mini-program on mobile devices
- Views support adding flowcharts, videos, live video streams
- Added chart combination functionality, combining bar charts with line charts, overview charts with line charts
- Chart query transformation functions support selecting custom transformation functions developed using DataFlux f(x)
- Released DataFlux mobile app, supporting scanning QR codes to view scenes after scene publication
- Bar charts support Top List display method
- Optimized view display pages, supporting dynamic chart loading
- Optimized Dataway management interface monitoring views
- Released DataWay API documentation and SDK
- Mearsurement multiple RP (data retention policy) support

## January 10, 2020

- Added Telegraf collector configuration documentation
- DataKit collector added support for `snmp`, `syslog`, `exec`, `varnish`, `NSQ Consumer` data sources
- Optimized page load performance when query returns too many data points
- Optimized string type metric trigger rule configuration logic: removed unsupported aggregation functions for strings; optimized trigger condition settings when counting string occurrences
- Fixed issue with incorrect redirection after pinning a scene to the home page
- Fixed issue with misaligned bars in multi-query bar charts
- Fixed data interruption issue after deleting custom expressions when creating new queries