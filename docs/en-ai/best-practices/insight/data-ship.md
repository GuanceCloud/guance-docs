# Best Practices for Data Correlation

---

## Preface

The Opentelemetry protocol, defined by the CNCF (Cloud Native Computing Foundation), is the latest generation of observability standards. This standard defines the three pillars of observability: Metrics, Trace, Log (Metrics, Traces, Logs). The correlation analysis between these three pillars has become a key competitive area for various vendors.

![image.png](../images/data-ship-14.png)

As a leading observability product in China, how does Guance break through technical barriers and overcome challenges?

## Data Correlation

### Metrics
Usually represented by a "value", which can be numeric, string, floating-point, boolean, etc.

#### Metrics Correlation

Prerequisites:

- The view must include a `by` condition (click any view to check).

- The target of the correlation must have this condition (tag).

```
M::`cpu`:(LAST(`usage_total`)) BY `host`
```

#### Logs
Click on the view, **View Related Logs**, to navigate to the logs module.

![image.png](../images/data-ship-1.png)

#### Containers

**View Related Containers**, to navigate to the container module and quickly query all containers on the host (Node).

![image.png](../images/data-ship-2.png)

#### Processes

**View Related Processes**, to navigate to the process module and quickly query all processes on the host (requires enabling [Processes Collection](/datakit/host_processes/)).

![image.png](../images/data-ship-3.png)

#### Traces

**View Related Traces**, to navigate to the trace module and quickly query all traces on the host.

![image.png](../images/data-ship-4.png)

### Logs

Records generated during system/application operation, used for troubleshooting and data statistical analysis.

#### Logs Correlation

Prerequisites:

- Usually use the hostname as the correlation condition (can be customized).

- The target of the correlation must have this condition (tag).

#### Metrics

Click on any log record, select **Metrics View**, to view the operational status of the host system where the log resides (dashed line represents the time of the log record).

![image.png](../images/data-ship-5.png)

#### Containers

Click on any log record, select the host, **View Related Containers**, to navigate to the container module.

![image.png](../images/data-ship-6.png)

#### Processes

**View Related Processes**, to navigate to the process module and quickly query all processes on the host (requires enabling [Processes Collection](/datakit/host_processes/)).

![image.png](../images/data-ship-7.png)

#### Traces

(Host Correlation) **View Related Traces**, to navigate to the trace module and quickly query all traces on the host.

![image.png](../images/data-ship-8.png)

#### Security

**View Related Security Checks**, to navigate to the security check module and quickly query security vulnerabilities on the host (requires deploying [Scheck](/datakit/sec-checker/)).

![image.png](../images/data-ship-9.png)

### Traces

With the expansion of internet architecture and the widespread use of distributed systems, application calls have become extremely complex. Trace tracking can effectively and quickly locate issues.

#### Traces Correlation

Prerequisites:

- Usually use the hostname/trace_id as the correlation condition (can be customized).

- The target of the correlation must have this condition (tag).

#### Metrics

Click on any trace record, select **Host - Metrics View**, to view the operational status of the host system where the trace resides (dashed line represents the time of the trace record).

![578DAA74-7521-499a-8630-88478B9FFD0A.png](../images/data-ship-10.png)

#### Logs

Click on any trace record, select **Logs - traceid**, to view the log records generated by the trace (requires configuring log output with trace_id).

![image.png](../images/data-ship-11.png)

### Customization

In addition to the default data correlation features, the Guance product supports more flexible user-defined view correlations.

#### Custom Correlation

Management - Built-in Views - User Views - Create View, supporting five fields corresponding to different data types:

- service (Trace Service)

- app_id (Application)

- source (Log Source)

- project (Project)

- label (Label)

![image.png](../images/data-ship-12.png)

![](../images/data-ship-13.png)