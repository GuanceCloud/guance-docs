# 绑定内置视图
---

## 简介

“观测云” 支持自定义绑定内置视图（用户视图）到查看器。通过将内置视图与链路服务、应用、日志源、项目、或其他自定义字段进行关联绑定，匹配字段值的查看器，可通过侧滑详情页查看新增被绑定的内置视图。

**支持自定义绑定内置视图的查看器包括场景自定义查看器、基础设施、日志、链路、服务、用户访问、安全巡检、可用性。**


## 步骤说明

在「管理」-「内置视图」-「用户视图」中，支持通过“绑定字段“创建用户视图与查看器的绑定关系。

### 1.创建绑定关系

在观测云工作空间「管理」-「内置视图」-「用户视图」，选择 “设置” 下的 “绑定”，可以基于链路服务（Service)、应用 (app_id)、日志源 (Source)、项目 (project)、标签 (label) 或自定义输入空间内的 key、value 进行内置视图与查看器绑定。

![](../img/4.view_7.png)

注意：为保证数据的一致性，创建用户视图与查看器的绑定关系时，需**至少添加指定对象分类下的一个字段作为该内置视图的视图变量**，系统会依据这个视图变量自动同步内置视图。

### 2.在查看器详情查看绑定的内置视图

完成绑定关系的配置后，您可以前往匹配绑定字段值的查看器侧滑详情页面查看该内置视图。

![](../img/4.view_8.png)


### 3.删除查看器详情已绑定的内置视图

如若您需要删除查看器详情中已绑定的内置视图，在设置下选择“绑定”，清除“绑定”中的字段内容，点击“确定”即可删除查看器详情已绑定的内置视图。

![](../img/4.view_9.png)


---

## 字段说明

在内置视图绑定字段时，除下列**固定字段**数据范围以外，还支持用户**自定义输入空间内已有的字段（Key)、字段值（Value）**生成绑定关系。

| **字段名** | **数据范围** | **适配范围** | **数值范围** |
| --- | --- | --- | --- |
| `service`<br />(链路服务) | 当前工作空间 Tracing （用户性能监测）数据中的 service 值 | 场景-自定义查看器<br />基础设施-所有查看器<br />日志查看器<br />链路查看器<br />用户访问-session、view查看器<br />安全巡检查看器<br />可用性查看器 | ``*``：表示匹配全部服务<br />``value``：表示仅匹配对应的服务，支持多值 |
| `app_id`<br />(应用) | 当前工作空间 Rum-View （用户访问监测）数据中的 app_id 值 | 场景-自定义查看器<br />基础设施-所有查看器<br />日志查看器<br />链路查看器<br />用户访问-session、view查看器<br />安全巡检查看器<br />可用性查看器 | ``*``：表示匹配全部应用<br />``value``：表示仅匹配对应的应用，支持多值 |
| `source`<br />(日志源) | 当前工作空间 Logging （日志）数据中的 source 值 | 场景-自定义查看器<br />基础设施-所有查看器<br />日志查看器<br />链路查看器<br />安全巡检查看器<br />可用性查看器 | ``*``：表示匹配全部日志源<br />``value``：表示仅匹配对应的日志源，支持多值 |
| `project`<br />(项目) | 当前工作空间的 Object（基础设施） 数据中的 project 值 | 场景-自定义查看器<br />基础设施-所有查看器<br />日志查看器<br />链路查看器<br />用户访问-session、view查看器<br />安全巡检查看器<br />可用性查看器 | ``*``：表示匹配全部项目<br />``value``：表示仅匹配对应的项目，支持多值 |
| `label` | 当前工作空间的 Object（基础设施） 数据中的 label 值 | 基础设施-所有查看器 | ``*``：表示匹配全部项目<br />``value``：表示仅匹配对应的 label，支持多值 |

**绑定字段后在查看器详情页的显示逻辑说明：**<br />1）绑定字段的 value 值支持 `*` ，单值，多值 3种模式。

- 若 value 值选择 `*`，如配置 `Service:*`：所有列表里面存在 Service 字段的查看器详情页绑定该内置视图
- 若 value 值选择“单值”，如配置 `Service:value1`，所有列表里面存在 service=value1 的查看器详情页绑定该内置视图
- 若 value 值选择“多值”，如配置 `Service:value1,value2`，所有列表数据中存在 service=value1 或者 service=value2 的查看器详情页绑定该内置视图；若存在多个 key:value ，如配置 `Service:value1` , `source:value2` , 所有列表数据中存在 service=value1 或者 source=value2 的查看器详情页绑定该内置视图；

2）绑定字段显示顺序：service>app_id>source>project>label，相同字段的顺序不做特殊处理。

- 若 service = ${value}、source = ${value}、 project = ${value} 匹配到同一个内置视图，则在查看器详情页只显示这个内置视图
- 若 service = ${value}、source = ${value}、 project = ${value} 匹配到不同的内置视图，则在查看器详情页按照Service>Source>Project 顺序显示对应的内置视图

3）在查看器详情页绑定的内置视图，默认显示的时间范围是“最近15分钟”，且会获取当前数据记录的时间在图中标注显示。

---

## 示例说明（固定字段）

下面以绑定“用户视图- CPU监控视图”到匹配全部项目的查看器为例。

### 1.创建绑定关系

在观测云工作空间「管理」-「内置视图」-「用户视图」，在设置下选择“绑定”，可以看到上面表格中列出的几个字段名，具体介绍可参考上面的表格。<br />![](../img/4.view_4.png)<br />在“绑定”中选择`project:*`，点击“确定”。<br />![](../img/4.view_5.png)

### 2.在查看器详情查看绑定的内置视图
1）在基础设施主机详情页查看绑定的内置视图，前提条件该主机具有“project（项目）”的标签。<br />![](../img/4.view_bang_4.png)<br />2）在日志查看器详情页查看绑定的内置视图，前提条件该主机具有“project（项目）”的标签。<br />![](../img/4.view_bang_5.png)


---


## 示例说明（自定义Key、Value）

下面以绑定“用户视图- Network 监控视图”到主机名为guance.local的主机查看器详情页为例。

### 1.创建绑定关系

在观测云工作空间「管理」-「内置视图」-「用户视图」，在设置下选择“绑定”，即能够以“host:guance.local" 为绑定字段创建当前内置视图与host为guance.local的关联关系。

**注意：选择绑定字段（自定义Key、Value）时，您需要确保该字段能够在当前工作空间内与支持配置内置视图的查看器对象进行准确匹配。如出现Key、Value的输入错误，或无法匹配到相关查看器对象的情况，系统将无法处理此类请求**

![](../img/4.view_10.png)


### 2.在查看器详情查看绑定的内置视图

当前绑定关系为“host:guance.local"，您可以前往匹配“host:guance.local"字段的自定义查看器、基础设施、日志、链路、服务、用户访问、安全巡检、可用性查看器，查看详情页绑定成功的“Network 监控视图”。

(下图以host:guance.local的主机查看器详情为例）
![](../img/4.view_11.png)

